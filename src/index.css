@import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Inter:wght@400..900&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: dark;
  --light-x: 50vw;
  --light-y: 50vh;
}


/* Base */
html,
body,
#root {
  height: 100%;
}
body {
  margin: 0;
  padding: 0;
  background-color: #000;
  color: #fff;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ========= THEME VARIABLE CONTAINERS ========= */
@layer utilities {
  .theme-velour-nights {
    --theme-highlight: #ffd700;
    --theme-base: #d4af37;
    --theme-shadow: #7a5c00;
    --theme-label: #ffd700;
    --meter-stop-0: #9b59b6;
    --meter-stop-1: #d4af37;
    --meter-stop-2: #ffd700;
    --meter-stop-3: #f777b6;
    --wave-glow-color: #f777b6;
  }
  .theme-lotus-dreamscape {
    --theme-highlight: #e6e6fa;
    --theme-base: #c0c0c0;
    --theme-shadow: #5a5a7a;
    --theme-label: #e6e6fa;
    --meter-stop-0: #6a5acd;
    --meter-stop-1: #9aa4ff;
    --meter-stop-2: #c0c0c0;
    --meter-stop-3: #e6e6fa;
    --wave-glow-color: #add8e6;
  }
  .theme-velvet-carnival {
    --theme-highlight: #ffd700;
    --theme-base: #ff4500;
    --theme-shadow: #662200;
    --theme-label: #ffd700;
    --meter-stop-0: #ff7f50;
    --meter-stop-1: #ffa559;
    --meter-stop-2: #ffd700;
    --meter-stop-3: #ff4500;
    --wave-glow-color: #ffd700;
  }
  .theme-starlit-abyss {
    --theme-highlight: rgba(224, 255, 255, 0.8);
    --theme-base: #8a2be2;
    --theme-shadow: #1c1030;
    --theme-label: #e0ffff;
    --meter-stop-0: #4b5d9a;
    --meter-stop-1: #6c5ce7;
    --meter-stop-2: #8a2be2;
    --meter-stop-3: rgba(224, 255, 255, 0.7);
    --wave-glow-color: #c792ea;
  }
  .theme-crimson-frenzy {
    --theme-highlight: #ffd700;
    --theme-base: #dc143c;
    --theme-shadow: #3d0000;
    --theme-label: #ffd700;
    --meter-stop-0: #f08080;
    --meter-stop-1: #dc143c;
    --meter-stop-2: #ff6f91;
    --meter-stop-3: #ffd700;
    --wave-glow-color: #ff4500;
  }
}

/* ========= BACKGROUND GRADIENT CLASSES ========= */
.theme-velour-nights-bg {
  background:
    radial-gradient(1200px 600px at 20% -10%, rgba(247, 119, 182, 0.15), transparent 60%),
    radial-gradient(1000px 500px at 110% 110%, rgba(212, 175, 55, 0.12), transparent 60%),
    linear-gradient(135deg, #4c1d2f, #200f18);
}
.theme-lotus-dreamscape-bg {
  background:
    radial-gradient(1000px 600px at 10% 0%, rgba(122, 162, 255, 0.15), transparent 60%),
    radial-gradient(800px 500px at 90% 100%, rgba(230, 230, 250, 0.18), transparent 60%),
    linear-gradient(135deg, #2d2447, #191526);
}
.theme-velvet-carnival-bg {
  background:
    radial-gradient(900px 500px at 15% -5%, rgba(255, 215, 0, 0.18), transparent 60%),
    radial-gradient(900px 500px at 85% 105%, rgba(255, 69, 0, 0.15), transparent 60%),
    linear-gradient(135deg, #6b2c00, #2e1100);
}
.theme-starlit-abyss-bg {
  background:
    radial-gradient(1100px 700px at 50% -10%, rgba(138, 43, 226, 0.22), transparent 60%),
    radial-gradient(1100px 700px at 50% 110%, rgba(224, 255, 255, 0.12), transparent 60%),
    linear-gradient(135deg, #0a0b20, #120a1f 60%, #0b0820);
}
.theme-crimson-frenzy-bg {
  background:
    radial-gradient(900px 500px at 0% 0%, rgba(255, 0, 0, 0.2), transparent 55%),
    radial-gradient(900px 500px at 100% 100%, rgba(255, 215, 0, 0.16), transparent 55%),
    linear-gradient(135deg, #2a0000, #110000 60%, #2a0000);
}

/* ========= CINEMATIC BACKGROUND LAYERS ========= */
.bg-layer {
  position: fixed;
  inset: 0;
  background: radial-gradient(
      circle at center,
      rgba(20, 20, 20, 0.85) 0%,
      rgba(0, 0, 0, 1) 100%
    ),
    url("/textures/noise.png");
  background-blend-mode: overlay;
  background-size: cover;
  z-index: 0;
}

.aurora-reflect {
  position: fixed;
  inset: 0;
  background: radial-gradient(
      circle at 40% 40%,
      rgba(200, 100, 255, 0.12),
      rgba(0, 0, 0, 0)
    ),
    radial-gradient(circle at 60% 60%, rgba(80, 180, 255, 0.08), transparent);
  mix-blend-mode: screen;
  z-index: 1;
  opacity: 0.9;
  animation: aurora-pulse 12s ease-in-out infinite alternate;
}

@keyframes aurora-pulse {
  0% {
    transform: translateY(0) scale(1);
    filter: blur(0);
  }
  100% {
    transform: translateY(-10px) scale(1.05);
    filter: blur(1.5px);
  }
}

.vignette-overlay {
  position: fixed;
  inset: 0;
  background: radial-gradient(
    circle at center,
    rgba(0, 0, 0, 0) 60%,
    rgba(0, 0, 0, 0.8) 100%
  );
  z-index: 2;
  pointer-events: none;
}

.noise-animated {
  position: fixed;
  inset: 0;
  background-image: url("/textures/noise.png");
  opacity: 0.04;
  z-index: 3;
  animation: noise-move 0.6s steps(3, end) infinite;
  mix-blend-mode: soft-light;
}

@keyframes noise-move {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: 100% 100%;
  }
}

.radial-light-overlay {
  position: fixed;
  inset: 0;
  background: radial-gradient(
    circle at var(--light-x, 50%) var(--light-y, 50%),
    rgba(255, 255, 200, 0.06),
    rgba(0, 0, 0, 0)
  );
  mix-blend-mode: overlay;
  z-index: 4;
}

.hdr-glow-overlay {
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(
    circle at center,
    rgba(255, 255, 255, 0.05),
    rgba(0, 0, 0, 0)
  );
  z-index: 5;
}

/* metallic input wrapper + buttons */
.metallic-input-wrapper {
  border-radius: 9999px;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.08),
    rgba(255, 255, 255, 0.02)
  );
  border: 1px solid rgba(255, 255, 255, 0.12);
  backdrop-filter: blur(6px);
}

/* ==== Performance hints ==== */
.bg-layer,
.vignette-overlay,
.aurora-reflect,
.noise-animated,
.radial-light-overlay,
.hdr-glow-overlay {
  will-change: opacity, transform, filter;
  transform: translateZ(0);
}

canvas,
button {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

.modal-metallic,
.settings-section {
  contain: layout paint size style;
}

/* === MODAL STACK FIX === */
/* ensures all modals and their controls appear above HDR, aurora, vignette, etc. */

.modal-metallic,
.modal-close-button,
.modal-header,
.modal-body,
.modal-footer {
  position: relative;
  z-index: 9999 !important;
  isolation: isolate; /* prevents backdrop blending from swallowing it */
}

/* internal gradients / reflections stay underneath modal content */
.modal-metallic::before,
.modal-metallic::after {
  z-index: 9998 !important;
}

/* Settings panels and sub-modals still above main UI but below dialogs */
.settings-section {
  z-index: 9997 !important;
}

/* close button highest in the stack */
.modal-close-button {
  z-index: 10000 !important;
}

/* optional fade-in micro-animation for polish */
.modal-metallic {
  transition: opacity 0.25s ease-out, transform 0.25s ease-out;
}
/* === FINAL MODAL STACK FIX === */
.modal-metallic,
.modal-close-button,
.modal-header,
.modal-body,
.modal-footer,
.modal-content-text,
.settings-section,
.confirm-modal,
.editor-modal,
.prompt-modal,
.extreme-intro-modal {
  position: fixed !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  z-index: 99999 !important;
  opacity: 1 !important;
  visibility: visible !important;
  pointer-events: auto !important;
}

.modal-backdrop {
  position: fixed !important;
  inset: 0;
  background: rgba(0, 0, 0, 0.65);
  backdrop-filter: blur(10px);
  z-index: 99998 !important;
  opacity: 1 !important;
  visibility: visible !important;
}

