function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var e={exports:{}},n={},s={exports:{}},i={},r=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator,y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,_={};function x(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||y}function b(){}function w(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||y}x.prototype.isReactComponent={},x.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},x.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},b.prototype=x.prototype;var k=w.prototype=new b;k.constructor=w,v(k,x.prototype),k.isPureReactComponent=!0;var S=Array.isArray,T=Object.prototype.hasOwnProperty,C={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function E(t,e,n){var s,i={},o=null,a=null;if(null!=e)for(s in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)T.call(e,s)&&!A.hasOwnProperty(s)&&(i[s]=e[s]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(s in l=t.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:r,type:t,key:o,ref:a,props:i,_owner:C.current}}function D(t){return"object"==typeof t&&null!==t&&t.$$typeof===r}var M=/\/+/g;function O(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(t){return e[t]})}(""+t.key):e.toString(36)}function R(t,e,n,s,i){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case r:case o:l=!0}}if(l)return i=i(l=t),t=""===s?"."+O(l,0):s,S(i)?(n="",null!=t&&(n=t.replace(M,"$&/")+"/"),R(i,e,n,"",function(t){return t})):null!=i&&(D(i)&&(i=function(t,e){return{$$typeof:r,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(M,"$&/")+"/")+t)),e.push(i)),1;if(l=0,s=""===s?".":s+":",S(t))for(var u=0;u<t.length;u++){var c=s+O(a=t[u],u);l+=R(a,e,n,c,i)}else if(c=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=g&&t[g]||t["@@iterator"])?t:null}(t),"function"==typeof c)for(t=c.call(t),u=0;!(a=t.next()).done;)l+=R(a=a.value,e,n,c=s+O(a,u++),i);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function P(t,e,n){if(null==t)return t;var s=[],i=0;return R(t,s,"","",function(t){return e.call(n,t,i++)}),s}function F(t){if(-1===t._status){var e=t._result;(e=e()).then(function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)},function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)}),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var N={current:null},V={transition:null},I={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:V,ReactCurrentOwner:C};function j(){throw Error("act(...) is not supported in production builds of React.")}i.Children={map:P,forEach:function(t,e,n){P(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return P(t,function(){e++}),e},toArray:function(t){return P(t,function(t){return t})||[]},only:function(t){if(!D(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},i.Component=x,i.Fragment=a,i.Profiler=u,i.PureComponent=w,i.StrictMode=l,i.Suspense=p,i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,i.act=j,i.cloneElement=function(t,e,n){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=v({},t.props),i=t.key,o=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,a=C.current),void 0!==e.key&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)T.call(e,u)&&!A.hasOwnProperty(u)&&(s[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)s.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];s.children=l}return{$$typeof:r,type:t.type,key:i,ref:o,props:s,_owner:a}},i.createContext=function(t){return(t={$$typeof:h,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},i.createElement=E,i.createFactory=function(t){var e=E.bind(null,t);return e.type=t,e},i.createRef=function(){return{current:null}},i.forwardRef=function(t){return{$$typeof:d,render:t}},i.isValidElement=D,i.lazy=function(t){return{$$typeof:m,_payload:{_status:-1,_result:t},_init:F}},i.memo=function(t,e){return{$$typeof:f,type:t,compare:void 0===e?null:e}},i.startTransition=function(t){var e=V.transition;V.transition={};try{t()}finally{V.transition=e}},i.unstable_act=j,i.useCallback=function(t,e){return N.current.useCallback(t,e)},i.useContext=function(t){return N.current.useContext(t)},i.useDebugValue=function(){},i.useDeferredValue=function(t){return N.current.useDeferredValue(t)},i.useEffect=function(t,e){return N.current.useEffect(t,e)},i.useId=function(){return N.current.useId()},i.useImperativeHandle=function(t,e,n){return N.current.useImperativeHandle(t,e,n)},i.useInsertionEffect=function(t,e){return N.current.useInsertionEffect(t,e)},i.useLayoutEffect=function(t,e){return N.current.useLayoutEffect(t,e)},i.useMemo=function(t,e){return N.current.useMemo(t,e)},i.useReducer=function(t,e,n){return N.current.useReducer(t,e,n)},i.useRef=function(t){return N.current.useRef(t)},i.useState=function(t){return N.current.useState(t)},i.useSyncExternalStore=function(t,e,n){return N.current.useSyncExternalStore(t,e,n)},i.useTransition=function(){return N.current.useTransition()},i.version="18.3.1",s.exports=i;var q=s.exports;const L=t(q);var z=q,B=Symbol.for("react.element"),W=Symbol.for("react.fragment"),U=Object.prototype.hasOwnProperty,$=z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,G={key:!0,ref:!0,__self:!0,__source:!0};function H(t,e,n){var s,i={},r=null,o=null;for(s in void 0!==n&&(r=""+n),void 0!==e.key&&(r=""+e.key),void 0!==e.ref&&(o=e.ref),e)U.call(e,s)&&!G.hasOwnProperty(s)&&(i[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps)void 0===i[s]&&(i[s]=e[s]);return{$$typeof:B,type:t,key:r,ref:o,props:i,_owner:$.current}}n.Fragment=W,n.jsx=H,n.jsxs=H,e.exports=n;var Q=e.exports,Y={},X={exports:{}},Z={},K={exports:{}},J={};!function(t){function e(t,e){var n=t.length;t.push(e);t:for(;0<n;){var s=n-1>>>1,r=t[s];if(!(0<i(r,e)))break t;t[s]=e,t[n]=r,n=s}}function n(t){return 0===t.length?null:t[0]}function s(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var s=0,r=t.length,o=r>>>1;s<o;){var a=2*(s+1)-1,l=t[a],u=a+1,c=t[u];if(0>i(l,n))u<r&&0>i(c,l)?(t[s]=c,t[u]=n,s=u):(t[s]=l,t[a]=n,s=a);else{if(!(u<r&&0>i(c,n)))break t;t[s]=c,t[u]=n,s=u}}}return e}function i(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"==typeof performance&&"function"==typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,p=!1,f=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function _(t){for(var i=n(u);null!==i;){if(null===i.callback)s(u);else{if(!(i.startTime<=t))break;s(u),i.sortIndex=i.expirationTime,e(l,i)}i=n(u)}}function x(t){if(m=!1,_(t),!f)if(null!==n(l))f=!0,R(b);else{var e=n(u);null!==e&&P(x,e.startTime-t)}}function b(e,i){f=!1,m&&(m=!1,y(T),T=-1),p=!0;var r=d;try{for(_(i),h=n(l);null!==h&&(!(h.expirationTime>i)||e&&!E());){var o=h.callback;if("function"==typeof o){h.callback=null,d=h.priorityLevel;var a=o(h.expirationTime<=i);i=t.unstable_now(),"function"==typeof a?h.callback=a:h===n(l)&&s(l),_(i)}else s(l);h=n(l)}if(null!==h)var c=!0;else{var g=n(u);null!==g&&P(x,g.startTime-i),c=!1}return c}finally{h=null,d=r,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,k=!1,S=null,T=-1,C=5,A=-1;function E(){return!(t.unstable_now()-A<C)}function D(){if(null!==S){var e=t.unstable_now();A=e;var n=!0;try{n=S(!0,e)}finally{n?w():(k=!1,S=null)}}else k=!1}if("function"==typeof v)w=function(){v(D)};else if("undefined"!=typeof MessageChannel){var M=new MessageChannel,O=M.port2;M.port1.onmessage=D,w=function(){O.postMessage(null)}}else w=function(){g(D,0)};function R(t){S=t,k||(k=!0,w())}function P(e,n){T=g(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(t){t.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,R(b))},t.unstable_forceFrameRate=function(t){0>t||125<t||(C=0<t?Math.floor(1e3/t):5)},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(t){switch(d){case 1:case 2:case 3:var e=3;break;default:e=d}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_scheduleCallback=function(s,i,r){var o=t.unstable_now();switch(r="object"==typeof r&&null!==r&&"number"==typeof(r=r.delay)&&0<r?o+r:o,s){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return s={id:c++,callback:i,priorityLevel:s,startTime:r,expirationTime:a=r+a,sortIndex:-1},r>o?(s.sortIndex=r,e(u,s),null===n(l)&&s===n(u)&&(m?(y(T),T=-1):m=!0,P(x,r-o))):(s.sortIndex=a,e(l,s),f||p||(f=!0,R(b))),s},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(t){var e=d;return function(){var n=d;d=e;try{return t.apply(this,arguments)}finally{d=n}}}}(J),K.exports=J;var tt=K.exports,et=q,nt=tt;function st(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var it=new Set,rt={};function ot(t,e){at(t,e),at(t+"Capture",e)}function at(t,e){for(rt[t]=e,t=0;t<e.length;t++)it.add(e[t])}var lt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ut=Object.prototype.hasOwnProperty,ct=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ht={},dt={};function pt(t,e,n,s,i,r,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ft[t]=new pt(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ft[e]=new pt(e,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){ft[t]=new pt(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ft[t]=new pt(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ft[t]=new pt(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){ft[t]=new pt(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){ft[t]=new pt(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){ft[t]=new pt(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){ft[t]=new pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var mt=/[\-:]([a-z])/g;function gt(t){return t[1].toUpperCase()}function yt(t,e,n,s){var i=ft.hasOwnProperty(e)?ft[e]:null;(null!==i?0!==i.type:s||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,s){if(null==e||function(t,e,n,s){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,s))return!0;if(s)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,s)&&(n=null),s||null===i?function(t){return!!ut.call(dt,t)||!ut.call(ht,t)&&(ct.test(t)?dt[t]=!0:(ht[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,s=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mt,gt);ft[e]=new pt(e,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mt,gt);ft[e]=new pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mt,gt);ft[e]=new pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){ft[t]=new pt(t,1,!1,t.toLowerCase(),null,!1,!1)}),ft.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){ft[t]=new pt(t,1,!1,t.toLowerCase(),null,!0,!0)});var vt=et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_t=Symbol.for("react.element"),xt=Symbol.for("react.portal"),bt=Symbol.for("react.fragment"),wt=Symbol.for("react.strict_mode"),kt=Symbol.for("react.profiler"),St=Symbol.for("react.provider"),Tt=Symbol.for("react.context"),Ct=Symbol.for("react.forward_ref"),At=Symbol.for("react.suspense"),Et=Symbol.for("react.suspense_list"),Dt=Symbol.for("react.memo"),Mt=Symbol.for("react.lazy"),Ot=Symbol.for("react.offscreen"),Rt=Symbol.iterator;function Pt(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=Rt&&t[Rt]||t["@@iterator"])?t:null}var Ft,Nt=Object.assign;function Vt(t){if(void 0===Ft)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ft=e&&e[1]||""}return"\n"+Ft+t}var It=!1;function jt(t,e){if(!t||It)return"";It=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(W){var s=W}Reflect.construct(t,[],e)}else{try{e.call()}catch(W){s=W}t.call(e.prototype)}else{try{throw Error()}catch(W){s=W}t()}}catch(W){if(W&&s&&"string"==typeof W.stack){for(var i=W.stack.split("\n"),r=s.stack.split("\n"),o=i.length-1,a=r.length-1;1<=o&&0<=a&&i[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==r[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==r[a]){var l="\n"+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=o&&0<=a);break}}}finally{It=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vt(t):""}function qt(t){switch(t.tag){case 5:return Vt(t.type);case 16:return Vt("Lazy");case 13:return Vt("Suspense");case 19:return Vt("SuspenseList");case 0:case 2:case 15:return jt(t.type,!1);case 11:return jt(t.type.render,!1);case 1:return jt(t.type,!0);default:return""}}function Lt(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case bt:return"Fragment";case xt:return"Portal";case kt:return"Profiler";case wt:return"StrictMode";case At:return"Suspense";case Et:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case Tt:return(t.displayName||"Context")+".Consumer";case St:return(t._context.displayName||"Context")+".Provider";case Ct:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case Dt:return null!==(e=t.displayName||null)?e:Lt(t.type)||"Memo";case Mt:e=t._payload,t=t._init;try{return Lt(t(e))}catch(n){}}return null}function zt(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lt(e);case 8:return e===wt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e}return null}function Bt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function Wt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Ut(t){t._valueTracker||(t._valueTracker=function(t){var e=Wt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){s=""+t,r.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(t){s=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function $t(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=Wt(t)?t.checked?"true":"false":t.value),(t=s)!==n&&(e.setValue(t),!0)}function Gt(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Ht(t,e){var n=e.checked;return Nt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Qt(t,e){var n=null==e.defaultValue?"":e.defaultValue,s=null!=e.checked?e.checked:e.defaultChecked;n=Bt(null!=e.value?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Yt(t,e){null!=(e=e.checked)&&yt(t,"checked",e,!1)}function Xt(t,e){Yt(t,e);var n=Bt(e.value),s=e.type;if(null!=n)"number"===s?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===s||"reset"===s)return void t.removeAttribute("value");e.hasOwnProperty("value")?Kt(t,e.type,n):e.hasOwnProperty("defaultValue")&&Kt(t,e.type,Bt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Zt(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!("submit"!==s&&"reset"!==s||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Kt(t,e,n){"number"===e&&Gt(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Jt=Array.isArray;function te(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Bt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(s&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function ee(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(st(91));return Nt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ne(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(st(92));if(Jt(n)){if(1<n.length)throw Error(st(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:Bt(n)}}function se(t,e){var n=Bt(e.value),s=Bt(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=s&&(t.defaultValue=""+s)}function ie(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function re(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?re(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ae,le,ue=(le=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ae=ae||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ae.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,s){MSApp.execUnsafeLocalFunction(function(){return le(t,e)})}:le);function ce(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];function pe(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||he.hasOwnProperty(t)&&he[t]?(""+e).trim():e+"px"}function fe(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var s=0===n.indexOf("--"),i=pe(n,e[n],s);"float"===n&&(n="cssFloat"),s?t.setProperty(n,i):t[n]=i}}Object.keys(he).forEach(function(t){de.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),he[e]=he[t]})});var me=Nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(t,e){if(e){if(me[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(st(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(st(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(st(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(st(62))}}function ye(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function _e(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var xe=null,be=null,we=null;function ke(t){if(t=yr(t)){if("function"!=typeof xe)throw Error(st(280));var e=t.stateNode;e&&(e=_r(e),xe(t.stateNode,t.type,e))}}function Se(t){be?we?we.push(t):we=[t]:be=t}function Te(){if(be){var t=be,e=we;if(we=be=null,ke(t),e)for(t=0;t<e.length;t++)ke(e[t])}}function Ce(t,e){return t(e)}function Ae(){}var Ee=!1;function De(t,e,n){if(Ee)return t(e,n);Ee=!0;try{return Ce(t,e,n)}finally{Ee=!1,(null!==be||null!==we)&&(Ae(),Te())}}function Me(t,e){var n=t.stateNode;if(null===n)return null;var s=_r(n);if(null===s)return null;n=s[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!s;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(st(231,e,typeof n));return n}var Oe=!1;if(lt)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(le){Oe=!1}function Pe(t,e,n,s,i,r,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(eh){this.onError(eh)}}var Fe=!1,Ne=null,Ve=!1,Ie=null,je={onError:function(t){Fe=!0,Ne=t}};function qe(t,e,n,s,i,r,o,a,l){Fe=!1,Ne=null,Pe.apply(je,arguments)}function Le(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{!!(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function ze(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&null!==(t=t.alternate)&&(e=t.memoizedState),null!==e)return e.dehydrated}return null}function Be(t){if(Le(t)!==t)throw Error(st(188))}function We(t){return t=function(t){var e=t.alternate;if(!e){if(null===(e=Le(t)))throw Error(st(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(null===i)break;var r=i.alternate;if(null===r){if(null!==(s=i.return)){n=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return Be(i),t;if(r===s)return Be(i),e;r=r.sibling}throw Error(st(188))}if(n.return!==s.return)n=i,s=r;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o)throw Error(st(189))}}if(n.alternate!==s)throw Error(st(190))}if(3!==n.tag)throw Error(st(188));return n.stateNode.current===n?t:e}(t),null!==t?Ue(t):null}function Ue(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Ue(t);if(null!==e)return e;t=t.sibling}return null}var $e=nt.unstable_scheduleCallback,Ge=nt.unstable_cancelCallback,He=nt.unstable_shouldYield,Qe=nt.unstable_requestPaint,Ye=nt.unstable_now,Xe=nt.unstable_getCurrentPriorityLevel,Ze=nt.unstable_ImmediatePriority,Ke=nt.unstable_UserBlockingPriority,Je=nt.unstable_NormalPriority,tn=nt.unstable_LowPriority,en=nt.unstable_IdlePriority,nn=null,sn=null,rn=Math.clz32?Math.clz32:function(t){return 0===(t>>>=0)?32:31-(on(t)/an|0)|0},on=Math.log,an=Math.LN2,ln=64,un=4194304;function cn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hn(t,e){var n=t.pendingLanes;if(0===n)return 0;var s=0,i=t.suspendedLanes,r=t.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?s=cn(a):0!==(r&=o)&&(s=cn(r))}else 0!==(o=n&~i)?s=cn(o):0!==r&&(s=cn(r));if(0===s)return 0;if(0!==e&&e!==s&&0===(e&i)&&((i=s&-s)>=(r=e&-e)||16===i&&4194240&r))return e;if(4&s&&(s|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=s;0<e;)i=1<<(n=31-rn(e)),s|=t[n],e&=~i;return s}function dn(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pn(t){return 0!=(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function fn(){var t=ln;return!(4194240&(ln<<=1))&&(ln=64),t}function mn(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gn(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-rn(e)]=n}function yn(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-rn(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}var vn=0;function _n(t){return 1<(t&=-t)?4<t?268435455&t?16:536870912:4:1}var xn,bn,wn,kn,Sn,Tn=!1,Cn=[],An=null,En=null,Dn=null,Mn=new Map,On=new Map,Rn=[],Pn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fn(t,e){switch(t){case"focusin":case"focusout":An=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":Mn.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":On.delete(e.pointerId)}}function Nn(t,e,n,s,i,r){return null===t||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},null!==e&&null!==(e=yr(e))&&bn(e),t):(t.eventSystemFlags|=s,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Vn(t){var e=gr(t.target);if(null!==e){var n=Le(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=ze(n)))return t.blockedOn=e,void Sn(t.priority,function(){wn(n)})}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function In(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qn(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=yr(n))&&bn(e),t.blockedOn=n,!1;var s=new(n=t.nativeEvent).constructor(n.type,n);ve=s,n.target.dispatchEvent(s),ve=null,e.shift()}return!0}function jn(t,e,n){In(t)&&n.delete(e)}function qn(){Tn=!1,null!==An&&In(An)&&(An=null),null!==En&&In(En)&&(En=null),null!==Dn&&In(Dn)&&(Dn=null),Mn.forEach(jn),On.forEach(jn)}function Ln(t,e){t.blockedOn===e&&(t.blockedOn=null,Tn||(Tn=!0,nt.unstable_scheduleCallback(nt.unstable_NormalPriority,qn)))}function zn(t){function e(e){return Ln(e,t)}if(0<Cn.length){Ln(Cn[0],t);for(var n=1;n<Cn.length;n++){var s=Cn[n];s.blockedOn===t&&(s.blockedOn=null)}}for(null!==An&&Ln(An,t),null!==En&&Ln(En,t),null!==Dn&&Ln(Dn,t),Mn.forEach(e),On.forEach(e),n=0;n<Rn.length;n++)(s=Rn[n]).blockedOn===t&&(s.blockedOn=null);for(;0<Rn.length&&null===(n=Rn[0]).blockedOn;)Vn(n),null===n.blockedOn&&Rn.shift()}var Bn=vt.ReactCurrentBatchConfig,Wn=!0;function Un(t,e,n,s){var i=vn,r=Bn.transition;Bn.transition=null;try{vn=1,Gn(t,e,n,s)}finally{vn=i,Bn.transition=r}}function $n(t,e,n,s){var i=vn,r=Bn.transition;Bn.transition=null;try{vn=4,Gn(t,e,n,s)}finally{vn=i,Bn.transition=r}}function Gn(t,e,n,s){if(Wn){var i=Qn(t,e,n,s);if(null===i)Bi(t,e,s,Hn,n),Fn(t,s);else if(function(t,e,n,s,i){switch(e){case"focusin":return An=Nn(An,t,e,n,s,i),!0;case"dragenter":return En=Nn(En,t,e,n,s,i),!0;case"mouseover":return Dn=Nn(Dn,t,e,n,s,i),!0;case"pointerover":var r=i.pointerId;return Mn.set(r,Nn(Mn.get(r)||null,t,e,n,s,i)),!0;case"gotpointercapture":return r=i.pointerId,On.set(r,Nn(On.get(r)||null,t,e,n,s,i)),!0}return!1}(i,t,e,n,s))s.stopPropagation();else if(Fn(t,s),4&e&&-1<Pn.indexOf(t)){for(;null!==i;){var r=yr(i);if(null!==r&&xn(r),null===(r=Qn(t,e,n,s))&&Bi(t,e,s,Hn,n),r===i)break;i=r}null!==i&&s.stopPropagation()}else Bi(t,e,s,null,n)}}var Hn=null;function Qn(t,e,n,s){if(Hn=null,null!==(t=gr(t=_e(s))))if(null===(e=Le(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=ze(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hn=t,null}function Yn(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case Ke:return 4;case Je:case tn:return 16;case en:return 536870912;default:return 16}default:return 16}}var Xn=null,Zn=null,Kn=null;function Jn(){if(Kn)return Kn;var t,e,n=Zn,s=n.length,i="value"in Xn?Xn.value:Xn.textContent,r=i.length;for(t=0;t<s&&n[t]===i[t];t++);var o=s-t;for(e=1;e<=o&&n[s-e]===i[r-e];e++);return Kn=i.slice(t,1<e?1-e:void 0)}function ts(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function es(){return!0}function ns(){return!1}function ss(t){function e(e,n,s,i,r){for(var o in this._reactName=e,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=r,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?es:ns,this.isPropagationStopped=ns,this}return Nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=es)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=es)},persist:function(){},isPersistent:es}),e}var is,rs,os,as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ls=ss(as),us=Nt({},as,{view:0,detail:0}),cs=ss(us),hs=Nt({},us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ks,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==os&&(os&&"mousemove"===t.type?(is=t.screenX-os.screenX,rs=t.screenY-os.screenY):rs=is=0,os=t),is)},movementY:function(t){return"movementY"in t?t.movementY:rs}}),ds=ss(hs),ps=ss(Nt({},hs,{dataTransfer:0})),fs=ss(Nt({},us,{relatedTarget:0})),ms=ss(Nt({},as,{animationName:0,elapsedTime:0,pseudoElement:0})),gs=Nt({},as,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ys=ss(gs),vs=ss(Nt({},as,{data:0})),_s={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ws(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=bs[t])&&!!e[t]}function ks(){return ws}var Ss=Nt({},us,{key:function(t){if(t.key){var e=_s[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=ts(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?xs[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ks,charCode:function(t){return"keypress"===t.type?ts(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?ts(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Ts=ss(Ss),Cs=ss(Nt({},hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),As=ss(Nt({},us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ks})),Es=ss(Nt({},as,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ds=Nt({},hs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ms=ss(Ds),Os=[9,13,27,32],Rs=lt&&"CompositionEvent"in window,Ps=null;lt&&"documentMode"in document&&(Ps=document.documentMode);var Fs=lt&&"TextEvent"in window&&!Ps,Ns=lt&&(!Rs||Ps&&8<Ps&&11>=Ps),Vs=String.fromCharCode(32),Is=!1;function js(t,e){switch(t){case"keyup":return-1!==Os.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qs(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var Ls=!1,zs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bs(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!zs[t.type]:"textarea"===e}function Ws(t,e,n,s){Se(s),0<(e=Ui(e,"onChange")).length&&(n=new ls("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Us=null,$s=null;function Gs(t){Vi(t,0)}function Hs(t){if($t(vr(t)))return t}function Qs(t,e){if("change"===t)return e}var Ys=!1;if(lt){var Xs;if(lt){var Zs="oninput"in document;if(!Zs){var Ks=document.createElement("div");Ks.setAttribute("oninput","return;"),Zs="function"==typeof Ks.oninput}Xs=Zs}else Xs=!1;Ys=Xs&&(!document.documentMode||9<document.documentMode)}function Js(){Us&&(Us.detachEvent("onpropertychange",ti),$s=Us=null)}function ti(t){if("value"===t.propertyName&&Hs($s)){var e=[];Ws(e,$s,t,_e(t)),De(Gs,e)}}function ei(t,e,n){"focusin"===t?(Js(),$s=n,(Us=e).attachEvent("onpropertychange",ti)):"focusout"===t&&Js()}function ni(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Hs($s)}function si(t,e){if("click"===t)return Hs(e)}function ii(t,e){if("input"===t||"change"===t)return Hs(e)}var ri="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e};function oi(t,e){if(ri(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!ut.call(e,i)||!ri(t[i],e[i]))return!1}return!0}function ai(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function li(t,e){var n,s=ai(t);for(t=0;s;){if(3===s.nodeType){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=ai(s)}}function ui(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?ui(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function ci(){for(var t=window,e=Gt();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(s){n=!1}if(!n)break;e=Gt((t=e.contentWindow).document)}return e}function hi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function di(t){var e=ci(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ui(n.ownerDocument.documentElement,n)){if(null!==s&&hi(n))if(e=s.start,void 0===(t=s.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,r=Math.min(s.start,i);s=void 0===s.end?r:Math.min(s.end,i),!t.extend&&r>s&&(i=s,s=r,r=i),i=li(n,r);var o=li(n,s);i&&o&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),r>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pi=lt&&"documentMode"in document&&11>=document.documentMode,fi=null,mi=null,gi=null,yi=!1;function vi(t,e,n){var s=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yi||null==fi||fi!==Gt(s)||(s="selectionStart"in(s=fi)&&hi(s)?{start:s.selectionStart,end:s.selectionEnd}:{anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},gi&&oi(gi,s)||(gi=s,0<(s=Ui(mi,"onSelect")).length&&(e=new ls("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=fi)))}function _i(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xi={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},bi={},wi={};function ki(t){if(bi[t])return bi[t];if(!xi[t])return t;var e,n=xi[t];for(e in n)if(n.hasOwnProperty(e)&&e in wi)return bi[t]=n[e];return t}lt&&(wi=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);var Si=ki("animationend"),Ti=ki("animationiteration"),Ci=ki("animationstart"),Ai=ki("transitionend"),Ei=new Map,Di="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(t,e){Ei.set(t,e),ot(e,[t])}for(var Oi=0;Oi<Di.length;Oi++){var Ri=Di[Oi];Mi(Ri.toLowerCase(),"on"+(Ri[0].toUpperCase()+Ri.slice(1)))}Mi(Si,"onAnimationEnd"),Mi(Ti,"onAnimationIteration"),Mi(Ci,"onAnimationStart"),Mi("dblclick","onDoubleClick"),Mi("focusin","onFocus"),Mi("focusout","onBlur"),Mi(Ai,"onTransitionEnd"),at("onMouseEnter",["mouseout","mouseover"]),at("onMouseLeave",["mouseout","mouseover"]),at("onPointerEnter",["pointerout","pointerover"]),at("onPointerLeave",["pointerout","pointerover"]),ot("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ot("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ot("onBeforeInput",["compositionend","keypress","textInput","paste"]),ot("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ot("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ot("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pi));function Ni(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,s,i,r,o,a,l){if(qe.apply(this,arguments),Fe){if(!Fe)throw Error(st(198));var u=Ne;Fe=!1,Ne=null,Ve||(Ve=!0,Ie=u)}}(s,e,void 0,t),t.currentTarget=null}function Vi(t,e){e=!!(4&e);for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;t:{var r=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==r&&i.isPropagationStopped())break t;Ni(i,a,u),r=l}else for(o=0;o<s.length;o++){if(l=(a=s[o]).instance,u=a.currentTarget,a=a.listener,l!==r&&i.isPropagationStopped())break t;Ni(i,a,u),r=l}}}if(Ve)throw t=Ie,Ve=!1,Ie=null,t}function Ii(t,e){var n=e[pr];void 0===n&&(n=e[pr]=new Set);var s=t+"__bubble";n.has(s)||(zi(e,t,2,!1),n.add(s))}function ji(t,e,n){var s=0;e&&(s|=4),zi(n,t,s,e)}var qi="_reactListening"+Math.random().toString(36).slice(2);function Li(t){if(!t[qi]){t[qi]=!0,it.forEach(function(e){"selectionchange"!==e&&(Fi.has(e)||ji(e,!1,t),ji(e,!0,t))});var e=9===t.nodeType?t:t.ownerDocument;null===e||e[qi]||(e[qi]=!0,ji("selectionchange",!1,e))}}function zi(t,e,n,s){switch(Yn(e)){case 1:var i=Un;break;case 4:i=$n;break;default:i=Gn}n=i.bind(null,e,n,t),i=void 0,!Oe||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),s?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Bi(t,e,n,s,i){var r=s;if(!(1&e||2&e||null===s))t:for(;;){if(null===s)return;var o=s.tag;if(3===o||4===o){var a=s.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=s.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=gr(a)))return;if(5===(l=o.tag)||6===l){s=r=o;continue t}a=a.parentNode}}s=s.return}De(function(){var s=r,i=_e(n),o=[];t:{var a=Ei.get(t);if(void 0!==a){var l=ls,u=t;switch(t){case"keypress":if(0===ts(n))break t;case"keydown":case"keyup":l=Ts;break;case"focusin":u="focus",l=fs;break;case"focusout":u="blur",l=fs;break;case"beforeblur":case"afterblur":l=fs;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ds;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=ps;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=As;break;case Si:case Ti:case Ci:l=ms;break;case Ai:l=Es;break;case"scroll":l=cs;break;case"wheel":l=Ms;break;case"copy":case"cut":case"paste":l=ys;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cs}var c=!!(4&e),h=!c&&"scroll"===t,d=c?null!==a?a+"Capture":null:a;c=[];for(var p,f=s;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&null!=(m=Me(f,d))&&c.push(Wi(f,m,p))),h)break;f=f.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(!(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===ve||!(u=n.relatedTarget||n.fromElement)||!gr(u)&&!u[dr])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=s,null!==(u=(u=n.relatedTarget||n.toElement)?gr(u):null)&&(u!==(h=Le(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=s),l!==u)){if(c=ds,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(c=Cs,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?a:vr(l),p=null==u?a:vr(u),(a=new c(m,f+"leave",l,n,i)).target=h,a.relatedTarget=p,m=null,gr(i)===s&&((c=new c(d,f+"enter",u,n,i)).target=p,c.relatedTarget=h,m=c),h=m,l&&u)t:{for(d=u,f=0,p=c=l;p;p=$i(p))f++;for(p=0,m=d;m;m=$i(m))p++;for(;0<f-p;)c=$i(c),f--;for(;0<p-f;)d=$i(d),p--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break t;c=$i(c),d=$i(d)}c=null}else c=null;null!==l&&Gi(o,a,l,c,!1),null!==u&&null!==h&&Gi(o,h,u,c,!0)}if("select"===(l=(a=s?vr(s):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Qs;else if(Bs(a))if(Ys)g=ii;else{g=ni;var y=ei}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=si);switch(g&&(g=g(t,s))?Ws(o,g,n,i):(y&&y(t,a,s),"focusout"===t&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&Kt(a,"number",a.value)),y=s?vr(s):window,t){case"focusin":(Bs(y)||"true"===y.contentEditable)&&(fi=y,mi=s,gi=null);break;case"focusout":gi=mi=fi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,vi(o,n,i);break;case"selectionchange":if(pi)break;case"keydown":case"keyup":vi(o,n,i)}var v;if(Rs)t:{switch(t){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else Ls?js(t,n)&&(_="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(_="onCompositionStart");_&&(Ns&&"ko"!==n.locale&&(Ls||"onCompositionStart"!==_?"onCompositionEnd"===_&&Ls&&(v=Jn()):(Zn="value"in(Xn=i)?Xn.value:Xn.textContent,Ls=!0)),0<(y=Ui(s,_)).length&&(_=new vs(_,t,null,n,i),o.push({event:_,listeners:y}),(v||null!==(v=qs(n)))&&(_.data=v))),(v=Fs?function(t,e){switch(t){case"compositionend":return qs(e);case"keypress":return 32!==e.which?null:(Is=!0,Vs);case"textInput":return(t=e.data)===Vs&&Is?null:t;default:return null}}(t,n):function(t,e){if(Ls)return"compositionend"===t||!Rs&&js(t,e)?(t=Jn(),Kn=Zn=Xn=null,Ls=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ns&&"ko"!==e.locale?null:e.data}}(t,n))&&0<(s=Ui(s,"onBeforeInput")).length&&(i=new vs("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:s}),i.data=v)}Vi(o,e)})}function Wi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ui(t,e){for(var n=e+"Capture",s=[];null!==t;){var i=t,r=i.stateNode;5===i.tag&&null!==r&&(i=r,null!=(r=Me(t,n))&&s.unshift(Wi(t,r,i)),null!=(r=Me(t,e))&&s.push(Wi(t,r,i))),t=t.return}return s}function $i(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Gi(t,e,n,s,i){for(var r=e._reactName,o=[];null!==n&&n!==s;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===s)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Me(n,r))&&o.unshift(Wi(n,l,a)):i||null!=(l=Me(n,r))&&o.push(Wi(n,l,a))),n=n.return}0!==o.length&&t.push({event:e,listeners:o})}var Hi=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function Yi(t){return("string"==typeof t?t:""+t).replace(Hi,"\n").replace(Qi,"")}function Xi(t,e,n){if(e=Yi(e),Yi(t)!==e&&n)throw Error(st(425))}function Zi(){}var Ki=null,Ji=null;function tr(t,e){return"textarea"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var er="function"==typeof setTimeout?setTimeout:void 0,nr="function"==typeof clearTimeout?clearTimeout:void 0,sr="function"==typeof Promise?Promise:void 0,ir="function"==typeof queueMicrotask?queueMicrotask:void 0!==sr?function(t){return sr.resolve(null).then(t).catch(rr)}:er;function rr(t){setTimeout(function(){throw t})}function or(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===s)return t.removeChild(i),void zn(e);s--}else"$"!==n&&"$?"!==n&&"$!"!==n||s++;n=i}while(n);zn(e)}function ar(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function lr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var ur=Math.random().toString(36).slice(2),cr="__reactFiber$"+ur,hr="__reactProps$"+ur,dr="__reactContainer$"+ur,pr="__reactEvents$"+ur,fr="__reactListeners$"+ur,mr="__reactHandles$"+ur;function gr(t){var e=t[cr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dr]||n[cr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=lr(t);null!==t;){if(n=t[cr])return n;t=lr(t)}return e}n=(t=n).parentNode}return null}function yr(t){return!(t=t[cr]||t[dr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function vr(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(st(33))}function _r(t){return t[hr]||null}var xr=[],br=-1;function wr(t){return{current:t}}function kr(t){0>br||(t.current=xr[br],xr[br]=null,br--)}function Sr(t,e){br++,xr[br]=t.current,t.current=e}var Tr={},Cr=wr(Tr),Ar=wr(!1),Er=Tr;function Dr(t,e){var n=t.type.contextTypes;if(!n)return Tr;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i,r={};for(i in n)r[i]=e[i];return s&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Mr(t){return null!=t.childContextTypes}function Or(){kr(Ar),kr(Cr)}function Rr(t,e,n){if(Cr.current!==Tr)throw Error(st(168));Sr(Cr,e),Sr(Ar,n)}function Pr(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,"function"!=typeof s.getChildContext)return n;for(var i in s=s.getChildContext())if(!(i in e))throw Error(st(108,zt(t)||"Unknown",i));return Nt({},n,s)}function Fr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Tr,Er=Cr.current,Sr(Cr,t),Sr(Ar,Ar.current),!0}function Nr(t,e,n){var s=t.stateNode;if(!s)throw Error(st(169));n?(t=Pr(t,e,Er),s.__reactInternalMemoizedMergedChildContext=t,kr(Ar),kr(Cr),Sr(Cr,t)):kr(Ar),Sr(Ar,n)}var Vr=null,Ir=!1,jr=!1;function qr(t){null===Vr?Vr=[t]:Vr.push(t)}function Lr(){if(!jr&&null!==Vr){jr=!0;var t=0,e=vn;try{var n=Vr;for(vn=1;t<n.length;t++){var s=n[t];do{s=s(!0)}while(null!==s)}Vr=null,Ir=!1}catch(i){throw null!==Vr&&(Vr=Vr.slice(t+1)),$e(Ze,Lr),i}finally{vn=e,jr=!1}}return null}var zr=[],Br=0,Wr=null,Ur=0,$r=[],Gr=0,Hr=null,Qr=1,Yr="";function Xr(t,e){zr[Br++]=Ur,zr[Br++]=Wr,Wr=t,Ur=e}function Zr(t,e,n){$r[Gr++]=Qr,$r[Gr++]=Yr,$r[Gr++]=Hr,Hr=t;var s=Qr;t=Yr;var i=32-rn(s)-1;s&=~(1<<i),n+=1;var r=32-rn(e)+i;if(30<r){var o=i-i%5;r=(s&(1<<o)-1).toString(32),s>>=o,i-=o,Qr=1<<32-rn(e)+i|n<<i|s,Yr=r+t}else Qr=1<<r|n<<i|s,Yr=t}function Kr(t){null!==t.return&&(Xr(t,1),Zr(t,1,0))}function Jr(t){for(;t===Wr;)Wr=zr[--Br],zr[Br]=null,Ur=zr[--Br],zr[Br]=null;for(;t===Hr;)Hr=$r[--Gr],$r[Gr]=null,Yr=$r[--Gr],$r[Gr]=null,Qr=$r[--Gr],$r[Gr]=null}var to=null,eo=null,no=!1,so=null;function io(t,e){var n=Ec(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function ro(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,to=t,eo=ar(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,to=t,eo=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Hr?{id:Qr,overflow:Yr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Ec(18,null,null,0)).stateNode=e,n.return=t,t.child=n,to=t,eo=null,!0);default:return!1}}function oo(t){return!(!(1&t.mode)||128&t.flags)}function ao(t){if(no){var e=eo;if(e){var n=e;if(!ro(t,e)){if(oo(t))throw Error(st(418));e=ar(n.nextSibling);var s=to;e&&ro(t,e)?io(s,n):(t.flags=-4097&t.flags|2,no=!1,to=t)}}else{if(oo(t))throw Error(st(418));t.flags=-4097&t.flags|2,no=!1,to=t}}}function lo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;to=t}function uo(t){if(t!==to)return!1;if(!no)return lo(t),no=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!tr(t.type,t.memoizedProps)),e&&(e=eo)){if(oo(t))throw co(),Error(st(418));for(;e;)io(t,e),e=ar(e.nextSibling)}if(lo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(st(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){eo=ar(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}eo=null}}else eo=to?ar(t.stateNode.nextSibling):null;return!0}function co(){for(var t=eo;t;)t=ar(t.nextSibling)}function ho(){eo=to=null,no=!1}function po(t){null===so?so=[t]:so.push(t)}var fo=vt.ReactCurrentBatchConfig;function mo(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(st(309));var s=n.stateNode}if(!s)throw Error(st(147,t));var i=s,r=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===r?e.ref:(e=function(t){var e=i.refs;null===t?delete e[r]:e[r]=t},e._stringRef=r,e)}if("string"!=typeof t)throw Error(st(284));if(!n._owner)throw Error(st(290,t))}return t}function go(t,e){throw t=Object.prototype.toString.call(e),Error(st(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yo(t){return(0,t._init)(t._payload)}function vo(t){function e(e,n){if(t){var s=e.deletions;null===s?(e.deletions=[n],e.flags|=16):s.push(n)}}function n(n,s){if(!t)return null;for(;null!==s;)e(n,s),s=s.sibling;return null}function s(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Mc(t,e)).index=0,t.sibling=null,t}function r(e,n,s){return e.index=s,t?null!==(s=e.alternate)?(s=s.index)<n?(e.flags|=2,n):s:(e.flags|=2,n):(e.flags|=1048576,n)}function o(e){return t&&null===e.alternate&&(e.flags|=2),e}function a(t,e,n,s){return null===e||6!==e.tag?((e=Fc(n,t.mode,s)).return=t,e):((e=i(e,n)).return=t,e)}function l(t,e,n,s){var r=n.type;return r===bt?c(t,e,n.props.children,s,n.key):null!==e&&(e.elementType===r||"object"==typeof r&&null!==r&&r.$$typeof===Mt&&yo(r)===e.type)?((s=i(e,n.props)).ref=mo(t,e,n),s.return=t,s):((s=Oc(n.type,n.key,n.props,null,t.mode,s)).ref=mo(t,e,n),s.return=t,s)}function u(t,e,n,s){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Nc(n,t.mode,s)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function c(t,e,n,s,r){return null===e||7!==e.tag?((e=Rc(n,t.mode,s,r)).return=t,e):((e=i(e,n)).return=t,e)}function h(t,e,n){if("string"==typeof e&&""!==e||"number"==typeof e)return(e=Fc(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case _t:return(n=Oc(e.type,e.key,e.props,null,t.mode,n)).ref=mo(t,null,e),n.return=t,n;case xt:return(e=Nc(e,t.mode,n)).return=t,e;case Mt:return h(t,(0,e._init)(e._payload),n)}if(Jt(e)||Pt(e))return(e=Rc(e,t.mode,n,null)).return=t,e;go(t,e)}return null}function d(t,e,n,s){var i=null!==e?e.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:a(t,e,""+n,s);if("object"==typeof n&&null!==n){switch(n.$$typeof){case _t:return n.key===i?l(t,e,n,s):null;case xt:return n.key===i?u(t,e,n,s):null;case Mt:return d(t,e,(i=n._init)(n._payload),s)}if(Jt(n)||Pt(n))return null!==i?null:c(t,e,n,s,null);go(t,n)}return null}function p(t,e,n,s,i){if("string"==typeof s&&""!==s||"number"==typeof s)return a(e,t=t.get(n)||null,""+s,i);if("object"==typeof s&&null!==s){switch(s.$$typeof){case _t:return l(e,t=t.get(null===s.key?n:s.key)||null,s,i);case xt:return u(e,t=t.get(null===s.key?n:s.key)||null,s,i);case Mt:return p(t,e,n,(0,s._init)(s._payload),i)}if(Jt(s)||Pt(s))return c(e,t=t.get(n)||null,s,i,null);go(e,s)}return null}function f(i,o,a,l){for(var u=null,c=null,f=o,m=o=0,g=null;null!==f&&m<a.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var y=d(i,f,a[m],l);if(null===y){null===f&&(f=g);break}t&&f&&null===y.alternate&&e(i,f),o=r(y,o,m),null===c?u=y:c.sibling=y,c=y,f=g}if(m===a.length)return n(i,f),no&&Xr(i,m),u;if(null===f){for(;m<a.length;m++)null!==(f=h(i,a[m],l))&&(o=r(f,o,m),null===c?u=f:c.sibling=f,c=f);return no&&Xr(i,m),u}for(f=s(i,f);m<a.length;m++)null!==(g=p(f,i,m,a[m],l))&&(t&&null!==g.alternate&&f.delete(null===g.key?m:g.key),o=r(g,o,m),null===c?u=g:c.sibling=g,c=g);return t&&f.forEach(function(t){return e(i,t)}),no&&Xr(i,m),u}function m(i,o,a,l){var u=Pt(a);if("function"!=typeof u)throw Error(st(150));if(null==(a=u.call(a)))throw Error(st(151));for(var c=u=null,f=o,m=o=0,g=null,y=a.next();null!==f&&!y.done;m++,y=a.next()){f.index>m?(g=f,f=null):g=f.sibling;var v=d(i,f,y.value,l);if(null===v){null===f&&(f=g);break}t&&f&&null===v.alternate&&e(i,f),o=r(v,o,m),null===c?u=v:c.sibling=v,c=v,f=g}if(y.done)return n(i,f),no&&Xr(i,m),u;if(null===f){for(;!y.done;m++,y=a.next())null!==(y=h(i,y.value,l))&&(o=r(y,o,m),null===c?u=y:c.sibling=y,c=y);return no&&Xr(i,m),u}for(f=s(i,f);!y.done;m++,y=a.next())null!==(y=p(f,i,m,y.value,l))&&(t&&null!==y.alternate&&f.delete(null===y.key?m:y.key),o=r(y,o,m),null===c?u=y:c.sibling=y,c=y);return t&&f.forEach(function(t){return e(i,t)}),no&&Xr(i,m),u}return function t(s,r,a,l){if("object"==typeof a&&null!==a&&a.type===bt&&null===a.key&&(a=a.props.children),"object"==typeof a&&null!==a){switch(a.$$typeof){case _t:t:{for(var u=a.key,c=r;null!==c;){if(c.key===u){if((u=a.type)===bt){if(7===c.tag){n(s,c.sibling),(r=i(c,a.props.children)).return=s,s=r;break t}}else if(c.elementType===u||"object"==typeof u&&null!==u&&u.$$typeof===Mt&&yo(u)===c.type){n(s,c.sibling),(r=i(c,a.props)).ref=mo(s,c,a),r.return=s,s=r;break t}n(s,c);break}e(s,c),c=c.sibling}a.type===bt?((r=Rc(a.props.children,s.mode,l,a.key)).return=s,s=r):((l=Oc(a.type,a.key,a.props,null,s.mode,l)).ref=mo(s,r,a),l.return=s,s=l)}return o(s);case xt:t:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(s,r.sibling),(r=i(r,a.children||[])).return=s,s=r;break t}n(s,r);break}e(s,r),r=r.sibling}(r=Nc(a,s.mode,l)).return=s,s=r}return o(s);case Mt:return t(s,r,(c=a._init)(a._payload),l)}if(Jt(a))return f(s,r,a,l);if(Pt(a))return m(s,r,a,l);go(s,a)}return"string"==typeof a&&""!==a||"number"==typeof a?(a=""+a,null!==r&&6===r.tag?(n(s,r.sibling),(r=i(r,a)).return=s,s=r):(n(s,r),(r=Fc(a,s.mode,l)).return=s,s=r),o(s)):n(s,r)}}var _o=vo(!0),xo=vo(!1),bo=wr(null),wo=null,ko=null,So=null;function To(){So=ko=wo=null}function Co(t){var e=bo.current;kr(bo),t._currentValue=e}function Ao(t,e,n){for(;null!==t;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==s&&(s.childLanes|=e)):null!==s&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Eo(t,e){wo=t,So=ko=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(gl=!0),t.firstContext=null)}function Do(t){var e=t._currentValue;if(So!==t)if(t={context:t,memoizedValue:e,next:null},null===ko){if(null===wo)throw Error(st(308));ko=t,wo.dependencies={lanes:0,firstContext:t}}else ko=ko.next=t;return e}var Mo=null;function Oo(t){null===Mo?Mo=[t]:Mo.push(t)}function Ro(t,e,n,s){var i=e.interleaved;return null===i?(n.next=n,Oo(e)):(n.next=i.next,i.next=n),e.interleaved=n,Po(t,s)}function Po(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Fo=!1;function No(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Io(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jo(t,e,n){var s=t.updateQueue;if(null===s)return null;if(s=s.shared,2&Tu){var i=s.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),s.pending=e,Po(t,n)}return null===(i=s.interleaved)?(e.next=e,Oo(s)):(e.next=i.next,i.next=e),s.interleaved=e,Po(t,n)}function qo(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,4194240&n)){var s=e.lanes;n|=s&=t.pendingLanes,e.lanes=n,yn(t,n)}}function Lo(t,e){var n=t.updateQueue,s=t.alternate;if(null!==s&&n===(s=s.updateQueue)){var i=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?i=r=o:r=r.next=o,n=n.next}while(null!==n);null===r?i=r=e:r=r.next=e}else i=r=e;return n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zo(t,e,n,s){var i=t.updateQueue;Fo=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?r=u:o.next=u,o=l;var c=t.alternate;null!==c&&(a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l)}if(null!==r){var h=i.baseState;for(o=0,c=u=l=null,a=r;;){var d=a.lane,p=a.eventTime;if((s&d)===d){null!==c&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var f=t,m=a;switch(d=e,p=n,m.tag){case 1:if("function"==typeof(f=m.payload)){h=f.call(p,h,d);break t}h=f;break t;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(d="function"==typeof(f=m.payload)?f.call(p,h,d):f))break t;h=Nt({},h,d);break t;case 2:Fo=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=p,l=h):c=c.next=p,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(e=i.shared.interleaved)){i=e;do{o|=i.lane,i=i.next}while(i!==e)}else null===r&&(i.shared.lanes=0);Pu|=o,t.lanes=o,t.memoizedState=h}}function Bo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var s=t[e],i=s.callback;if(null!==i){if(s.callback=null,s=n,"function"!=typeof i)throw Error(st(191,i));i.call(s)}}}var Wo={},Uo=wr(Wo),$o=wr(Wo),Go=wr(Wo);function Ho(t){if(t===Wo)throw Error(st(174));return t}function Qo(t,e){switch(Sr(Go,e),Sr($o,t),Sr(Uo,Wo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:oe(null,"");break;default:e=oe(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}kr(Uo),Sr(Uo,e)}function Yo(){kr(Uo),kr($o),kr(Go)}function Xo(t){Ho(Go.current);var e=Ho(Uo.current),n=oe(e,t.type);e!==n&&(Sr($o,t),Sr(Uo,n))}function Zo(t){$o.current===t&&(kr(Uo),kr($o))}var Ko=wr(0);function Jo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(128&e.flags)return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ta=[];function ea(){for(var t=0;t<ta.length;t++)ta[t]._workInProgressVersionPrimary=null;ta.length=0}var na=vt.ReactCurrentDispatcher,sa=vt.ReactCurrentBatchConfig,ia=0,ra=null,oa=null,aa=null,la=!1,ua=!1,ca=0,ha=0;function da(){throw Error(st(321))}function pa(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ri(t[n],e[n]))return!1;return!0}function fa(t,e,n,s,i,r){if(ia=r,ra=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,na.current=null===t||null===t.memoizedState?Za:Ka,t=n(s,i),ua){r=0;do{if(ua=!1,ca=0,25<=r)throw Error(st(301));r+=1,aa=oa=null,e.updateQueue=null,na.current=Ja,t=n(s,i)}while(ua)}if(na.current=Xa,e=null!==oa&&null!==oa.next,ia=0,aa=oa=ra=null,la=!1,e)throw Error(st(300));return t}function ma(){var t=0!==ca;return ca=0,t}function ga(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===aa?ra.memoizedState=aa=t:aa=aa.next=t,aa}function ya(){if(null===oa){var t=ra.alternate;t=null!==t?t.memoizedState:null}else t=oa.next;var e=null===aa?ra.memoizedState:aa.next;if(null!==e)aa=e,oa=t;else{if(null===t)throw Error(st(310));t={memoizedState:(oa=t).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===aa?ra.memoizedState=aa=t:aa=aa.next=t}return aa}function va(t,e){return"function"==typeof e?e(t):e}function _a(t){var e=ya(),n=e.queue;if(null===n)throw Error(st(311));n.lastRenderedReducer=t;var s=oa,i=s.baseQueue,r=n.pending;if(null!==r){if(null!==i){var o=i.next;i.next=r.next,r.next=o}s.baseQueue=i=r,n.pending=null}if(null!==i){r=i.next,s=s.baseState;var a=o=null,l=null,u=r;do{var c=u.lane;if((ia&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(a=l=h,o=s):l=l.next=h,ra.lanes|=c,Pu|=c}u=u.next}while(null!==u&&u!==r);null===l?o=s:l.next=a,ri(s,e.memoizedState)||(gl=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,n.lastRenderedState=s}if(null!==(t=n.interleaved)){i=t;do{r=i.lane,ra.lanes|=r,Pu|=r,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xa(t){var e=ya(),n=e.queue;if(null===n)throw Error(st(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,r=e.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{r=t(r,o.action),o=o.next}while(o!==i);ri(r,e.memoizedState)||(gl=!0),e.memoizedState=r,null===e.baseQueue&&(e.baseState=r),n.lastRenderedState=r}return[r,s]}function ba(){}function wa(t,e){var n=ra,s=ya(),i=e(),r=!ri(s.memoizedState,i);if(r&&(s.memoizedState=i,gl=!0),s=s.queue,Fa(Ta.bind(null,n,s,t),[t]),s.getSnapshot!==e||r||null!==aa&&1&aa.memoizedState.tag){if(n.flags|=2048,Da(9,Sa.bind(null,n,s,i,e),void 0,null),null===Cu)throw Error(st(349));30&ia||ka(n,e,i)}return i}function ka(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=ra.updateQueue)?(e={lastEffect:null,stores:null},ra.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Sa(t,e,n,s){e.value=n,e.getSnapshot=s,Ca(e)&&Aa(t)}function Ta(t,e,n){return n(function(){Ca(e)&&Aa(t)})}function Ca(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ri(t,n)}catch(s){return!0}}function Aa(t){var e=Po(t,1);null!==e&&Ju(e,t,1,-1)}function Ea(t){var e=ga();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:t},e.queue=t,t=t.dispatch=Ga.bind(null,ra,t),[e.memoizedState,t]}function Da(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},null===(e=ra.updateQueue)?(e={lastEffect:null,stores:null},ra.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function Ma(){return ya().memoizedState}function Oa(t,e,n,s){var i=ga();ra.flags|=t,i.memoizedState=Da(1|e,n,void 0,void 0===s?null:s)}function Ra(t,e,n,s){var i=ya();s=void 0===s?null:s;var r=void 0;if(null!==oa){var o=oa.memoizedState;if(r=o.destroy,null!==s&&pa(s,o.deps))return void(i.memoizedState=Da(e,n,r,s))}ra.flags|=t,i.memoizedState=Da(1|e,n,r,s)}function Pa(t,e){return Oa(8390656,8,t,e)}function Fa(t,e){return Ra(2048,8,t,e)}function Na(t,e){return Ra(4,2,t,e)}function Va(t,e){return Ra(4,4,t,e)}function Ia(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function ja(t,e,n){return n=null!=n?n.concat([t]):null,Ra(4,4,Ia.bind(null,e,t),n)}function qa(){}function La(t,e){var n=ya();e=void 0===e?null:e;var s=n.memoizedState;return null!==s&&null!==e&&pa(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function za(t,e){var n=ya();e=void 0===e?null:e;var s=n.memoizedState;return null!==s&&null!==e&&pa(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function Ba(t,e,n){return 21&ia?(ri(n,e)||(n=fn(),ra.lanes|=n,Pu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gl=!0),t.memoizedState=n)}function Wa(t,e){var n=vn;vn=0!==n&&4>n?n:4,t(!0);var s=sa.transition;sa.transition={};try{t(!1),e()}finally{vn=n,sa.transition=s}}function Ua(){return ya().memoizedState}function $a(t,e,n){var s=Ku(t);n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Ha(t)?Qa(e,n):null!==(n=Ro(t,e,n,s))&&(Ju(n,t,s,Zu()),Ya(n,e,s))}function Ga(t,e,n){var s=Ku(t),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ha(t))Qa(e,i);else{var r=t.alternate;if(0===t.lanes&&(null===r||0===r.lanes)&&null!==(r=e.lastRenderedReducer))try{var o=e.lastRenderedState,a=r(o,n);if(i.hasEagerState=!0,i.eagerState=a,ri(a,o)){var l=e.interleaved;return null===l?(i.next=i,Oo(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(W){}null!==(n=Ro(t,e,i,s))&&(Ju(n,t,s,i=Zu()),Ya(n,e,s))}}function Ha(t){var e=t.alternate;return t===ra||null!==e&&e===ra}function Qa(t,e){ua=la=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ya(t,e,n){if(4194240&n){var s=e.lanes;n|=s&=t.pendingLanes,e.lanes=n,yn(t,n)}}var Xa={readContext:Do,useCallback:da,useContext:da,useEffect:da,useImperativeHandle:da,useInsertionEffect:da,useLayoutEffect:da,useMemo:da,useReducer:da,useRef:da,useState:da,useDebugValue:da,useDeferredValue:da,useTransition:da,useMutableSource:da,useSyncExternalStore:da,useId:da,unstable_isNewReconciler:!1},Za={readContext:Do,useCallback:function(t,e){return ga().memoizedState=[t,void 0===e?null:e],t},useContext:Do,useEffect:Pa,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,Oa(4194308,4,Ia.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Oa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Oa(4,2,t,e)},useMemo:function(t,e){var n=ga();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=ga();return e=void 0!==n?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=$a.bind(null,ra,t),[s.memoizedState,t]},useRef:function(t){return t={current:t},ga().memoizedState=t},useState:Ea,useDebugValue:qa,useDeferredValue:function(t){return ga().memoizedState=t},useTransition:function(){var t=Ea(!1),e=t[0];return t=Wa.bind(null,t[1]),ga().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=ra,i=ga();if(no){if(void 0===n)throw Error(st(407));n=n()}else{if(n=e(),null===Cu)throw Error(st(349));30&ia||ka(s,e,n)}i.memoizedState=n;var r={value:n,getSnapshot:e};return i.queue=r,Pa(Ta.bind(null,s,r,t),[t]),s.flags|=2048,Da(9,Sa.bind(null,s,r,n,e),void 0,null),n},useId:function(){var t=ga(),e=Cu.identifierPrefix;if(no){var n=Yr;e=":"+e+"R"+(n=(Qr&~(1<<32-rn(Qr)-1)).toString(32)+n),0<(n=ca++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=ha++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ka={readContext:Do,useCallback:La,useContext:Do,useEffect:Fa,useImperativeHandle:ja,useInsertionEffect:Na,useLayoutEffect:Va,useMemo:za,useReducer:_a,useRef:Ma,useState:function(){return _a(va)},useDebugValue:qa,useDeferredValue:function(t){return Ba(ya(),oa.memoizedState,t)},useTransition:function(){return[_a(va)[0],ya().memoizedState]},useMutableSource:ba,useSyncExternalStore:wa,useId:Ua,unstable_isNewReconciler:!1},Ja={readContext:Do,useCallback:La,useContext:Do,useEffect:Fa,useImperativeHandle:ja,useInsertionEffect:Na,useLayoutEffect:Va,useMemo:za,useReducer:xa,useRef:Ma,useState:function(){return xa(va)},useDebugValue:qa,useDeferredValue:function(t){var e=ya();return null===oa?e.memoizedState=t:Ba(e,oa.memoizedState,t)},useTransition:function(){return[xa(va)[0],ya().memoizedState]},useMutableSource:ba,useSyncExternalStore:wa,useId:Ua,unstable_isNewReconciler:!1};function tl(t,e){if(t&&t.defaultProps){for(var n in e=Nt({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}function el(t,e,n,s){n=null==(n=n(s,e=t.memoizedState))?e:Nt({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var nl={isMounted:function(t){return!!(t=t._reactInternals)&&Le(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Zu(),i=Ku(t),r=Io(s,i);r.payload=e,null!=n&&(r.callback=n),null!==(e=jo(t,r,i))&&(Ju(e,t,i,s),qo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Zu(),i=Ku(t),r=Io(s,i);r.tag=1,r.payload=e,null!=n&&(r.callback=n),null!==(e=jo(t,r,i))&&(Ju(e,t,i,s),qo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zu(),s=Ku(t),i=Io(n,s);i.tag=2,null!=e&&(i.callback=e),null!==(e=jo(t,i,s))&&(Ju(e,t,s,n),qo(e,t,s))}};function sl(t,e,n,s,i,r,o){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(s,r,o):!(e.prototype&&e.prototype.isPureReactComponent&&oi(n,s)&&oi(i,r))}function il(t,e,n){var s=!1,i=Tr,r=e.contextType;return"object"==typeof r&&null!==r?r=Do(r):(i=Mr(e)?Er:Cr.current,r=(s=null!=(s=e.contextTypes))?Dr(t,i):Tr),e=new e(n,r),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=nl,t.stateNode=e,e._reactInternals=t,s&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=r),e}function rl(t,e,n,s){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,s),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&nl.enqueueReplaceState(e,e.state,null)}function ol(t,e,n,s){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},No(t);var r=e.contextType;"object"==typeof r&&null!==r?i.context=Do(r):(r=Mr(e)?Er:Cr.current,i.context=Dr(t,r)),i.state=t.memoizedState,"function"==typeof(r=e.getDerivedStateFromProps)&&(el(t,e,r,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&nl.enqueueReplaceState(i,i.state,null),zo(t,n,i,s),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4194308)}function al(t,e){try{var n="",s=e;do{n+=qt(s),s=s.return}while(s);var i=n}catch(z){i="\nError generating stack: "+z.message+"\n"+z.stack}return{value:t,source:e,stack:i,digest:null}}function ll(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}var ul="function"==typeof WeakMap?WeakMap:Map;function cl(t,e,n){(n=Io(-1,n)).tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){zu||(zu=!0,Bu=s)},n}function hl(t,e,n){(n=Io(-1,n)).tag=3;var s=t.type.getDerivedStateFromError;if("function"==typeof s){var i=e.value;n.payload=function(){return s(i)},n.callback=function(){}}var r=t.stateNode;return null!==r&&"function"==typeof r.componentDidCatch&&(n.callback=function(){"function"!=typeof s&&(null===Wu?Wu=new Set([this]):Wu.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function dl(t,e,n){var s=t.pingCache;if(null===s){s=t.pingCache=new ul;var i=new Set;s.set(e,i)}else void 0===(i=s.get(e))&&(i=new Set,s.set(e,i));i.has(n)||(i.add(n),t=wc.bind(null,t,e,n),e.then(t,t))}function pl(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function fl(t,e,n,s,i){return 1&t.mode?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Io(-1,1)).tag=2,jo(n,e,1))),n.lanes|=1),t)}var ml=vt.ReactCurrentOwner,gl=!1;function yl(t,e,n,s){e.child=null===t?xo(e,null,n,s):_o(e,t.child,n,s)}function vl(t,e,n,s,i){n=n.render;var r=e.ref;return Eo(e,i),s=fa(t,e,n,s,r,i),n=ma(),null===t||gl?(no&&n&&Kr(e),e.flags|=1,yl(t,e,s,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zl(t,e,i))}function _l(t,e,n,s,i){if(null===t){var r=n.type;return"function"!=typeof r||Dc(r)||void 0!==r.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Oc(n.type,null,s,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=r,xl(t,e,r,s,i))}if(r=t.child,0===(t.lanes&i)){var o=r.memoizedProps;if((n=null!==(n=n.compare)?n:oi)(o,s)&&t.ref===e.ref)return zl(t,e,i)}return e.flags|=1,(t=Mc(r,s)).ref=e.ref,t.return=e,e.child=t}function xl(t,e,n,s,i){if(null!==t){var r=t.memoizedProps;if(oi(r,s)&&t.ref===e.ref){if(gl=!1,e.pendingProps=s=r,0===(t.lanes&i))return e.lanes=t.lanes,zl(t,e,i);131072&t.flags&&(gl=!0)}}return kl(t,e,n,s,i)}function bl(t,e,n){var s=e.pendingProps,i=s.children,r=null!==t?t.memoizedState:null;if("hidden"===s.mode)if(1&e.mode){if(!(1073741824&n))return t=null!==r?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Sr(Mu,Du),Du|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==r?r.baseLanes:n,Sr(Mu,Du),Du|=s}else e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sr(Mu,Du),Du|=n;else null!==r?(s=r.baseLanes|n,e.memoizedState=null):s=n,Sr(Mu,Du),Du|=s;return yl(t,e,i,n),e.child}function wl(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function kl(t,e,n,s,i){var r=Mr(n)?Er:Cr.current;return r=Dr(e,r),Eo(e,i),n=fa(t,e,n,s,r,i),s=ma(),null===t||gl?(no&&s&&Kr(e),e.flags|=1,yl(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zl(t,e,i))}function Sl(t,e,n,s,i){if(Mr(n)){var r=!0;Fr(e)}else r=!1;if(Eo(e,i),null===e.stateNode)Ll(t,e),il(e,n,s),ol(e,n,s,i),s=!0;else if(null===t){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;u="object"==typeof u&&null!==u?Do(u):Dr(e,u=Mr(n)?Er:Cr.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==s||l!==u)&&rl(e,o,s,u),Fo=!1;var d=e.memoizedState;o.state=d,zo(e,s,o,i),l=e.memoizedState,a!==s||d!==l||Ar.current||Fo?("function"==typeof c&&(el(e,n,c,s),l=e.memoizedState),(a=Fo||sl(e,n,a,s,d,l,u))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(e.flags|=4194308)):("function"==typeof o.componentDidMount&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=u,s=a):("function"==typeof o.componentDidMount&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,Vo(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:tl(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l="object"==typeof(l=n.contextType)&&null!==l?Do(l):Dr(e,l=Mr(n)?Er:Cr.current);var p=n.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==h||d!==l)&&rl(e,o,s,l),Fo=!1,d=e.memoizedState,o.state=d,zo(e,s,o,i);var f=e.memoizedState;a!==h||d!==f||Ar.current||Fo?("function"==typeof p&&(el(e,n,p,s),f=e.memoizedState),(u=Fo||sl(e,n,u,s,d,f,l)||!1)?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(s,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(s,f,l)),"function"==typeof o.componentDidUpdate&&(e.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=f),o.props=s,o.state=f,o.context=l,s=u):("function"!=typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),s=!1)}return Tl(t,e,n,s,r,i)}function Tl(t,e,n,s,i,r){wl(t,e);var o=!!(128&e.flags);if(!s&&!o)return i&&Nr(e,n,!1),zl(t,e,r);s=e.stateNode,ml.current=e;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:s.render();return e.flags|=1,null!==t&&o?(e.child=_o(e,t.child,null,r),e.child=_o(e,null,a,r)):yl(t,e,a,r),e.memoizedState=s.state,i&&Nr(e,n,!0),e.child}function Cl(t){var e=t.stateNode;e.pendingContext?Rr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Rr(0,e.context,!1),Qo(t,e.containerInfo)}function Al(t,e,n,s,i){return ho(),po(i),e.flags|=256,yl(t,e,n,s),e.child}var El,Dl,Ml,Ol,Rl={dehydrated:null,treeContext:null,retryLane:0};function Pl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Fl(t,e,n){var s,i=e.pendingProps,r=Ko.current,o=!1,a=!!(128&e.flags);if((s=a)||(s=(null===t||null!==t.memoizedState)&&!!(2&r)),s?(o=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(r|=1),Sr(Ko,1&r),null===t)return ao(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(1&e.mode?"$!"===t.data?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},1&i||null===o?o=Pc(a,i,0,null):(o.childLanes=0,o.pendingProps=a),t=Rc(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Pl(n),e.memoizedState=Rl,t):Nl(e,a));if(null!==(r=t.memoizedState)&&null!==(s=r.dehydrated))return function(t,e,n,s,i,r,o){if(n)return 256&e.flags?(e.flags&=-257,Vl(t,e,o,s=ll(Error(st(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(r=s.fallback,i=e.mode,s=Pc({mode:"visible",children:s.children},i,0,null),(r=Rc(r,i,o,null)).flags|=2,s.return=e,r.return=e,s.sibling=r,e.child=s,1&e.mode&&_o(e,t.child,null,o),e.child.memoizedState=Pl(o),e.memoizedState=Rl,r);if(!(1&e.mode))return Vl(t,e,o,null);if("$!"===i.data){if(s=i.nextSibling&&i.nextSibling.dataset)var a=s.dgst;return s=a,Vl(t,e,o,s=ll(r=Error(st(419)),s,void 0))}if(a=0!==(o&t.childLanes),gl||a){if(null!==(s=Cu)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(s.suspendedLanes|o))?0:i)&&i!==r.retryLane&&(r.retryLane=i,Po(t,i),Ju(s,t,i,-1))}return dc(),Vl(t,e,o,s=ll(Error(st(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Sc.bind(null,t),i._reactRetry=e,null):(t=r.treeContext,eo=ar(i.nextSibling),to=e,no=!0,so=null,null!==t&&($r[Gr++]=Qr,$r[Gr++]=Yr,$r[Gr++]=Hr,Qr=t.id,Yr=t.overflow,Hr=e),(e=Nl(e,s.children)).flags|=4096,e)}(t,e,a,i,s,r,n);if(o){o=i.fallback,a=e.mode,s=(r=t.child).sibling;var l={mode:"hidden",children:i.children};return 1&a||e.child===r?(i=Mc(r,l)).subtreeFlags=14680064&r.subtreeFlags:((i=e.child).childLanes=0,i.pendingProps=l,e.deletions=null),null!==s?o=Mc(s,o):(o=Rc(o,a,n,null)).flags|=2,o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=null===(a=t.child.memoizedState)?Pl(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Rl,i}return t=(o=t.child).sibling,i=Mc(o,{mode:"visible",children:i.children}),!(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Nl(t,e){return(e=Pc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Vl(t,e,n,s){return null!==s&&po(s),_o(e,t.child,null,n),(t=Nl(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Il(t,e,n){t.lanes|=e;var s=t.alternate;null!==s&&(s.lanes|=e),Ao(t.return,e,n)}function jl(t,e,n,s,i){var r=t.memoizedState;null===r?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=n,r.tailMode=i)}function ql(t,e,n){var s=e.pendingProps,i=s.revealOrder,r=s.tail;if(yl(t,e,s.children,n),2&(s=Ko.current))s=1&s|2,e.flags|=128;else{if(null!==t&&128&t.flags)t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Il(t,n,e);else if(19===t.tag)Il(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Sr(Ko,s),1&e.mode)switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Jo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),jl(e,!1,i,n,r);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Jo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}jl(e,!0,n,null,r);break;case"together":jl(e,!1,null,null,void 0);break;default:e.memoizedState=null}else e.memoizedState=null;return e.child}function Ll(t,e){!(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zl(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Pu|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(st(153));if(null!==e.child){for(n=Mc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Mc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Bl(t,e){if(!no)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;null!==n;)null!==n.alternate&&(s=n),n=n.sibling;null===s?e||null===t.tail?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Wl(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,s|=14680064&i.subtreeFlags,s|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function Ul(t,e,n){var s=e.pendingProps;switch(Jr(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wl(e),null;case 1:case 17:return Mr(e.type)&&Or(),Wl(e),null;case 3:return s=e.stateNode,Yo(),kr(Ar),kr(Cr),ea(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==t&&null!==t.child||(uo(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&!(256&e.flags)||(e.flags|=1024,null!==so&&(sc(so),so=null))),Dl(t,e),Wl(e),null;case 5:Zo(e);var i=Ho(Go.current);if(n=e.type,null!==t&&null!=e.stateNode)Ml(t,e,n,s,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(null===e.stateNode)throw Error(st(166));return Wl(e),null}if(t=Ho(Uo.current),uo(e)){s=e.stateNode,n=e.type;var r=e.memoizedProps;switch(s[cr]=e,s[hr]=r,t=!!(1&e.mode),n){case"dialog":Ii("cancel",s),Ii("close",s);break;case"iframe":case"object":case"embed":Ii("load",s);break;case"video":case"audio":for(i=0;i<Pi.length;i++)Ii(Pi[i],s);break;case"source":Ii("error",s);break;case"img":case"image":case"link":Ii("error",s),Ii("load",s);break;case"details":Ii("toggle",s);break;case"input":Qt(s,r),Ii("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},Ii("invalid",s);break;case"textarea":ne(s,r),Ii("invalid",s)}for(var o in ge(n,r),i=null,r)if(r.hasOwnProperty(o)){var a=r[o];"children"===o?"string"==typeof a?s.textContent!==a&&(!0!==r.suppressHydrationWarning&&Xi(s.textContent,a,t),i=["children",a]):"number"==typeof a&&s.textContent!==""+a&&(!0!==r.suppressHydrationWarning&&Xi(s.textContent,a,t),i=["children",""+a]):rt.hasOwnProperty(o)&&null!=a&&"onScroll"===o&&Ii("scroll",s)}switch(n){case"input":Ut(s),Zt(s,r,!0);break;case"textarea":Ut(s),ie(s);break;case"select":case"option":break;default:"function"==typeof r.onClick&&(s.onclick=Zi)}s=i,e.updateQueue=s,null!==s&&(e.flags|=4)}else{o=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=re(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=o.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof s.is?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),"select"===n&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[cr]=e,t[hr]=s,El(t,e,!1,!1),e.stateNode=t;t:{switch(o=ye(n,s),n){case"dialog":Ii("cancel",t),Ii("close",t),i=s;break;case"iframe":case"object":case"embed":Ii("load",t),i=s;break;case"video":case"audio":for(i=0;i<Pi.length;i++)Ii(Pi[i],t);i=s;break;case"source":Ii("error",t),i=s;break;case"img":case"image":case"link":Ii("error",t),Ii("load",t),i=s;break;case"details":Ii("toggle",t),i=s;break;case"input":Qt(t,s),i=Ht(t,s),Ii("invalid",t);break;case"option":default:i=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},i=Nt({},s,{value:void 0}),Ii("invalid",t);break;case"textarea":ne(t,s),i=ee(t,s),Ii("invalid",t)}for(r in ge(n,i),a=i)if(a.hasOwnProperty(r)){var l=a[r];"style"===r?fe(t,l):"dangerouslySetInnerHTML"===r?null!=(l=l?l.__html:void 0)&&ue(t,l):"children"===r?"string"==typeof l?("textarea"!==n||""!==l)&&ce(t,l):"number"==typeof l&&ce(t,""+l):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(rt.hasOwnProperty(r)?null!=l&&"onScroll"===r&&Ii("scroll",t):null!=l&&yt(t,r,l,o))}switch(n){case"input":Ut(t),Zt(t,s,!1);break;case"textarea":Ut(t),ie(t);break;case"option":null!=s.value&&t.setAttribute("value",""+Bt(s.value));break;case"select":t.multiple=!!s.multiple,null!=(r=s.value)?te(t,!!s.multiple,r,!1):null!=s.defaultValue&&te(t,!!s.multiple,s.defaultValue,!0);break;default:"function"==typeof i.onClick&&(t.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break t;case"img":s=!0;break t;default:s=!1}}s&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Wl(e),null;case 6:if(t&&null!=e.stateNode)Ol(t,e,t.memoizedProps,s);else{if("string"!=typeof s&&null===e.stateNode)throw Error(st(166));if(n=Ho(Go.current),Ho(Uo.current),uo(e)){if(s=e.stateNode,n=e.memoizedProps,s[cr]=e,(r=s.nodeValue!==n)&&null!==(t=to))switch(t.tag){case 3:Xi(s.nodeValue,n,!!(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Xi(s.nodeValue,n,!!(1&t.mode))}r&&(e.flags|=4)}else(s=(9===n.nodeType?n:n.ownerDocument).createTextNode(s))[cr]=e,e.stateNode=s}return Wl(e),null;case 13:if(kr(Ko),s=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(no&&null!==eo&&1&e.mode&&!(128&e.flags))co(),ho(),e.flags|=98560,r=!1;else if(r=uo(e),null!==s&&null!==s.dehydrated){if(null===t){if(!r)throw Error(st(318));if(!(r=null!==(r=e.memoizedState)?r.dehydrated:null))throw Error(st(317));r[cr]=e}else ho(),!(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Wl(e),r=!1}else null!==so&&(sc(so),so=null),r=!0;if(!r)return 65536&e.flags?e:null}return 128&e.flags?(e.lanes=n,e):((s=null!==s)!=(null!==t&&null!==t.memoizedState)&&s&&(e.child.flags|=8192,1&e.mode&&(null===t||1&Ko.current?0===Ou&&(Ou=3):dc())),null!==e.updateQueue&&(e.flags|=4),Wl(e),null);case 4:return Yo(),Dl(t,e),null===t&&Li(e.stateNode.containerInfo),Wl(e),null;case 10:return Co(e.type._context),Wl(e),null;case 19:if(kr(Ko),null===(r=e.memoizedState))return Wl(e),null;if(s=!!(128&e.flags),null===(o=r.rendering))if(s)Bl(r,!1);else{if(0!==Ou||null!==t&&128&t.flags)for(t=e.child;null!==t;){if(null!==(o=Jo(t))){for(e.flags|=128,Bl(r,!1),null!==(s=o.updateQueue)&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;null!==n;)t=s,(r=n).flags&=14680066,null===(o=r.alternate)?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,t=o.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Sr(Ko,1&Ko.current|2),e.child}t=t.sibling}null!==r.tail&&Ye()>qu&&(e.flags|=128,s=!0,Bl(r,!1),e.lanes=4194304)}else{if(!s)if(null!==(t=Jo(o))){if(e.flags|=128,s=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Bl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!o.alternate&&!no)return Wl(e),null}else 2*Ye()-r.renderingStartTime>qu&&1073741824!==n&&(e.flags|=128,s=!0,Bl(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(null!==(n=r.last)?n.sibling=o:e.child=o,r.last=o)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Ye(),e.sibling=null,n=Ko.current,Sr(Ko,s?1&n|2:1&n),e):(Wl(e),null);case 22:case 23:return lc(),s=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==s&&(e.flags|=8192),s&&1&e.mode?!!(1073741824&Du)&&(Wl(e),6&e.subtreeFlags&&(e.flags|=8192)):Wl(e),null;case 24:case 25:return null}throw Error(st(156,e.tag))}function $l(t,e){switch(Jr(e),e.tag){case 1:return Mr(e.type)&&Or(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Yo(),kr(Ar),kr(Cr),ea(),65536&(t=e.flags)&&!(128&t)?(e.flags=-65537&t|128,e):null;case 5:return Zo(e),null;case 13:if(kr(Ko),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(st(340));ho()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return kr(Ko),null;case 4:return Yo(),null;case 10:return Co(e.type._context),null;case 22:case 23:return lc(),null;default:return null}}El=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Dl=function(){},Ml=function(t,e,n,s){var i=t.memoizedProps;if(i!==s){t=e.stateNode,Ho(Uo.current);var r,o=null;switch(n){case"input":i=Ht(t,i),s=Ht(t,s),o=[];break;case"select":i=Nt({},i,{value:void 0}),s=Nt({},s,{value:void 0}),o=[];break;case"textarea":i=ee(t,i),s=ee(t,s),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof s.onClick&&(t.onclick=Zi)}for(u in ge(n,s),n=null,i)if(!s.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var a=i[u];for(r in a)a.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(rt.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in s){var l=s[u];if(a=null!=i?i[u]:void 0,s.hasOwnProperty(u)&&l!==a&&(null!=l||null!=a))if("style"===u)if(a){for(r in a)!a.hasOwnProperty(r)||l&&l.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in l)l.hasOwnProperty(r)&&a[r]!==l[r]&&(n||(n={}),n[r]=l[r])}else n||(o||(o=[]),o.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,a=a?a.__html:void 0,null!=l&&a!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(rt.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Ii("scroll",t),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}},Ol=function(t,e,n,s){n!==s&&(e.flags|=4)};var Gl=!1,Hl=!1,Ql="function"==typeof WeakSet?WeakSet:Set,Yl=null;function Xl(t,e){var n=t.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(s){bc(t,e,s)}else n.current=null}function Zl(t,e,n){try{n()}catch(s){bc(t,e,s)}}var Kl=!1;function Jl(t,e,n){var s=e.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var i=s=s.next;do{if((i.tag&t)===t){var r=i.destroy;i.destroy=void 0,void 0!==r&&Zl(e,n,r)}i=i.next}while(i!==s)}}function tu(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function eu(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"==typeof e?e(t):e.current=t}}function nu(t){var e=t.alternate;null!==e&&(t.alternate=null,nu(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(e=t.stateNode)&&(delete e[cr],delete e[hr],delete e[pr],delete e[fr],delete e[mr]),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function su(t){return 5===t.tag||3===t.tag||4===t.tag}function iu(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||su(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ru(t,e,n){var s=t.tag;if(5===s||6===s)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!=(n=n._reactRootContainer)||null!==e.onclick||(e.onclick=Zi));else if(4!==s&&null!==(t=t.child))for(ru(t,e,n),t=t.sibling;null!==t;)ru(t,e,n),t=t.sibling}function ou(t,e,n){var s=t.tag;if(5===s||6===s)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==s&&null!==(t=t.child))for(ou(t,e,n),t=t.sibling;null!==t;)ou(t,e,n),t=t.sibling}var au=null,lu=!1;function uu(t,e,n){for(n=n.child;null!==n;)cu(t,e,n),n=n.sibling}function cu(t,e,n){if(sn&&"function"==typeof sn.onCommitFiberUnmount)try{sn.onCommitFiberUnmount(nn,n)}catch(a){}switch(n.tag){case 5:Hl||Xl(n,e);case 6:var s=au,i=lu;au=null,uu(t,e,n),lu=i,null!==(au=s)&&(lu?(t=au,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):au.removeChild(n.stateNode));break;case 18:null!==au&&(lu?(t=au,n=n.stateNode,8===t.nodeType?or(t.parentNode,n):1===t.nodeType&&or(t,n),zn(t)):or(au,n.stateNode));break;case 4:s=au,i=lu,au=n.stateNode.containerInfo,lu=!0,uu(t,e,n),au=s,lu=i;break;case 0:case 11:case 14:case 15:if(!Hl&&null!==(s=n.updateQueue)&&null!==(s=s.lastEffect)){i=s=s.next;do{var r=i,o=r.destroy;r=r.tag,void 0!==o&&(2&r||4&r)&&Zl(n,e,o),i=i.next}while(i!==s)}uu(t,e,n);break;case 1:if(!Hl&&(Xl(n,e),"function"==typeof(s=n.stateNode).componentWillUnmount))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){bc(n,e,a)}uu(t,e,n);break;case 21:uu(t,e,n);break;case 22:1&n.mode?(Hl=(s=Hl)||null!==n.memoizedState,uu(t,e,n),Hl=s):uu(t,e,n);break;default:uu(t,e,n)}}function hu(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Ql),e.forEach(function(e){var s=Tc.bind(null,t,e);n.has(e)||(n.add(e),e.then(s,s))})}}function du(t,e){var n=e.deletions;if(null!==n)for(var s=0;s<n.length;s++){var i=n[s];try{var r=t,o=e,a=o;t:for(;null!==a;){switch(a.tag){case 5:au=a.stateNode,lu=!1;break t;case 3:case 4:au=a.stateNode.containerInfo,lu=!0;break t}a=a.return}if(null===au)throw Error(st(160));cu(r,o,i),au=null,lu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(W){bc(i,e,W)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)pu(e,t),e=e.sibling}function pu(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(du(e,t),fu(t),4&s){try{Jl(3,t,t.return),tu(3,t)}catch(c){bc(t,t.return,c)}try{Jl(5,t,t.return)}catch(c){bc(t,t.return,c)}}break;case 1:du(e,t),fu(t),512&s&&null!==n&&Xl(n,n.return);break;case 5:if(du(e,t),fu(t),512&s&&null!==n&&Xl(n,n.return),32&t.flags){var i=t.stateNode;try{ce(i,"")}catch(c){bc(t,t.return,c)}}if(4&s&&null!=(i=t.stateNode)){var r=t.memoizedProps,o=null!==n?n.memoizedProps:r,a=t.type,l=t.updateQueue;if(t.updateQueue=null,null!==l)try{"input"===a&&"radio"===r.type&&null!=r.name&&Yt(i,r),ye(a,o);var u=ye(a,r);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];"style"===h?fe(i,d):"dangerouslySetInnerHTML"===h?ue(i,d):"children"===h?ce(i,d):yt(i,h,d,u)}switch(a){case"input":Xt(i,r);break;case"textarea":se(i,r);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var f=r.value;null!=f?te(i,!!r.multiple,f,!1):p!==!!r.multiple&&(null!=r.defaultValue?te(i,!!r.multiple,r.defaultValue,!0):te(i,!!r.multiple,r.multiple?[]:"",!1))}i[hr]=r}catch(c){bc(t,t.return,c)}}break;case 6:if(du(e,t),fu(t),4&s){if(null===t.stateNode)throw Error(st(162));i=t.stateNode,r=t.memoizedProps;try{i.nodeValue=r}catch(c){bc(t,t.return,c)}}break;case 3:if(du(e,t),fu(t),4&s&&null!==n&&n.memoizedState.isDehydrated)try{zn(e.containerInfo)}catch(c){bc(t,t.return,c)}break;case 4:default:du(e,t),fu(t);break;case 13:du(e,t),fu(t),8192&(i=t.child).flags&&(r=null!==i.memoizedState,i.stateNode.isHidden=r,!r||null!==i.alternate&&null!==i.alternate.memoizedState||(ju=Ye())),4&s&&hu(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Hl=(u=Hl)||h,du(e,t),Hl=u):du(e,t),fu(t),8192&s){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&1&t.mode)for(Yl=t,h=t.child;null!==h;){for(d=Yl=h;null!==Yl;){switch(f=(p=Yl).child,p.tag){case 0:case 11:case 14:case 15:Jl(4,p,p.return);break;case 1:Xl(p,p.return);var m=p.stateNode;if("function"==typeof m.componentWillUnmount){s=p,n=p.return;try{e=s,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(c){bc(s,n,c)}}break;case 5:Xl(p,p.return);break;case 22:if(null!==p.memoizedState){vu(d);continue}}null!==f?(f.return=p,Yl=f):vu(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"==typeof(r=i.style).setProperty?r.setProperty("display","none","important"):r.display="none":(a=d.stateNode,o=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,a.style.display=pe("display",o))}catch(c){bc(t,t.return,c)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(c){bc(t,t.return,c)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:du(e,t),fu(t),4&s&&hu(t);case 21:}}function fu(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(su(n)){var s=n;break t}n=n.return}throw Error(st(160))}switch(s.tag){case 5:var i=s.stateNode;32&s.flags&&(ce(i,""),s.flags&=-33),ou(t,iu(t),i);break;case 3:case 4:var r=s.stateNode.containerInfo;ru(t,iu(t),r);break;default:throw Error(st(161))}}catch(B){bc(t,t.return,B)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function mu(t,e,n){Yl=t,gu(t)}function gu(t,e,n){for(var s=!!(1&t.mode);null!==Yl;){var i=Yl,r=i.child;if(22===i.tag&&s){var o=null!==i.memoizedState||Gl;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Hl;a=Gl;var u=Hl;if(Gl=o,(Hl=l)&&!u)for(Yl=i;null!==Yl;)l=(o=Yl).child,22===o.tag&&null!==o.memoizedState?_u(i):null!==l?(l.return=o,Yl=l):_u(i);for(;null!==r;)Yl=r,gu(r),r=r.sibling;Yl=i,Gl=a,Hl=u}yu(t)}else 8772&i.subtreeFlags&&null!==r?(r.return=i,Yl=r):yu(t)}}function yu(t){for(;null!==Yl;){var e=Yl;if(8772&e.flags){var n=e.alternate;try{if(8772&e.flags)switch(e.tag){case 0:case 11:case 15:Hl||tu(5,e);break;case 1:var s=e.stateNode;if(4&e.flags&&!Hl)if(null===n)s.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:tl(e.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;null!==r&&Bo(e,r,s);break;case 3:var o=e.updateQueue;if(null!==o){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Bo(e,o,n)}break;case 5:var a=e.stateNode;if(null===n&&4&e.flags){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zn(d)}}}break;default:throw Error(st(163))}Hl||512&e.flags&&eu(e)}catch(u){bc(e,e.return,u)}}if(e===t){Yl=null;break}if(null!==(n=e.sibling)){n.return=e.return,Yl=n;break}Yl=e.return}}function vu(t){for(;null!==Yl;){var e=Yl;if(e===t){Yl=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Yl=n;break}Yl=e.return}}function _u(t){for(;null!==Yl;){var e=Yl;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{tu(4,e)}catch(B){bc(e,n,B)}break;case 1:var s=e.stateNode;if("function"==typeof s.componentDidMount){var i=e.return;try{s.componentDidMount()}catch(B){bc(e,i,B)}}var r=e.return;try{eu(e)}catch(B){bc(e,r,B)}break;case 5:var o=e.return;try{eu(e)}catch(B){bc(e,o,B)}}}catch(B){bc(e,e.return,B)}if(e===t){Yl=null;break}var a=e.sibling;if(null!==a){a.return=e.return,Yl=a;break}Yl=e.return}}var xu,bu=Math.ceil,wu=vt.ReactCurrentDispatcher,ku=vt.ReactCurrentOwner,Su=vt.ReactCurrentBatchConfig,Tu=0,Cu=null,Au=null,Eu=0,Du=0,Mu=wr(0),Ou=0,Ru=null,Pu=0,Fu=0,Nu=0,Vu=null,Iu=null,ju=0,qu=1/0,Lu=null,zu=!1,Bu=null,Wu=null,Uu=!1,$u=null,Gu=0,Hu=0,Qu=null,Yu=-1,Xu=0;function Zu(){return 6&Tu?Ye():-1!==Yu?Yu:Yu=Ye()}function Ku(t){return 1&t.mode?2&Tu&&0!==Eu?Eu&-Eu:null!==fo.transition?(0===Xu&&(Xu=fn()),Xu):0!==(t=vn)?t:t=void 0===(t=window.event)?16:Yn(t.type):1}function Ju(t,e,n,s){if(50<Hu)throw Hu=0,Qu=null,Error(st(185));gn(t,n,s),2&Tu&&t===Cu||(t===Cu&&(!(2&Tu)&&(Fu|=n),4===Ou&&ic(t,Eu)),tc(t,s),1===n&&0===Tu&&!(1&e.mode)&&(qu=Ye()+500,Ir&&Lr()))}function tc(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-rn(r),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&s)||(i[o]=dn(a,e)):l<=e&&(t.expiredLanes|=a),r&=~a}}(t,e);var s=hn(t,t===Cu?Eu:0);if(0===s)null!==n&&Ge(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(null!=n&&Ge(n),1===e)0===t.tag?function(t){Ir=!0,qr(t)}(rc.bind(null,t)):qr(rc.bind(null,t)),ir(function(){!(6&Tu)&&Lr()}),n=null;else{switch(_n(s)){case 1:n=Ze;break;case 4:n=Ke;break;case 16:default:n=Je;break;case 536870912:n=en}n=Cc(n,ec.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ec(t,e){if(Yu=-1,Xu=0,6&Tu)throw Error(st(327));var n=t.callbackNode;if(_c()&&t.callbackNode!==n)return null;var s=hn(t,t===Cu?Eu:0);if(0===s)return null;if(30&s||0!==(s&t.expiredLanes)||e)e=pc(t,s);else{e=s;var i=Tu;Tu|=2;var r=hc();for(Cu===t&&Eu===e||(Lu=null,qu=Ye()+500,uc(t,e));;)try{mc();break}catch(a){cc(t,a)}To(),wu.current=r,Tu=i,null!==Au?e=0:(Cu=null,Eu=0,e=Ou)}if(0!==e){if(2===e&&0!==(i=pn(t))&&(s=i,e=nc(t,i)),1===e)throw n=Ru,uc(t,0),ic(t,s),tc(t,Ye()),n;if(6===e)ic(t,s);else{if(i=t.current.alternate,!(30&s||function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var s=0;s<n.length;s++){var i=n[s],r=i.getSnapshot;i=i.value;try{if(!ri(r(),i))return!1}catch(o){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)||(e=pc(t,s),2===e&&(r=pn(t),0!==r&&(s=r,e=nc(t,r))),1!==e)))throw n=Ru,uc(t,0),ic(t,s),tc(t,Ye()),n;switch(t.finishedWork=i,t.finishedLanes=s,e){case 0:case 1:throw Error(st(345));case 2:case 5:vc(t,Iu,Lu);break;case 3:if(ic(t,s),(130023424&s)===s&&10<(e=ju+500-Ye())){if(0!==hn(t,0))break;if(((i=t.suspendedLanes)&s)!==s){Zu(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=er(vc.bind(null,t,Iu,Lu),e);break}vc(t,Iu,Lu);break;case 4:if(ic(t,s),(4194240&s)===s)break;for(e=t.eventTimes,i=-1;0<s;){var o=31-rn(s);r=1<<o,(o=e[o])>i&&(i=o),s&=~r}if(s=i,10<(s=(120>(s=Ye()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*bu(s/1960))-s)){t.timeoutHandle=er(vc.bind(null,t,Iu,Lu),s);break}vc(t,Iu,Lu);break;default:throw Error(st(329))}}}return tc(t,Ye()),t.callbackNode===n?ec.bind(null,t):null}function nc(t,e){var n=Vu;return t.current.memoizedState.isDehydrated&&(uc(t,e).flags|=256),2!==(t=pc(t,e))&&(e=Iu,Iu=n,null!==e&&sc(e)),t}function sc(t){null===Iu?Iu=t:Iu.push.apply(Iu,t)}function ic(t,e){for(e&=~Nu,e&=~Fu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),s=1<<n;t[n]=-1,e&=~s}}function rc(t){if(6&Tu)throw Error(st(327));_c();var e=hn(t,0);if(!(1&e))return tc(t,Ye()),null;var n=pc(t,e);if(0!==t.tag&&2===n){var s=pn(t);0!==s&&(e=s,n=nc(t,s))}if(1===n)throw n=Ru,uc(t,0),ic(t,e),tc(t,Ye()),n;if(6===n)throw Error(st(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vc(t,Iu,Lu),tc(t,Ye()),null}function oc(t,e){var n=Tu;Tu|=1;try{return t(e)}finally{0===(Tu=n)&&(qu=Ye()+500,Ir&&Lr())}}function ac(t){null!==$u&&0===$u.tag&&!(6&Tu)&&_c();var e=Tu;Tu|=1;var n=Su.transition,s=vn;try{if(Su.transition=null,vn=1,t)return t()}finally{vn=s,Su.transition=n,!(6&(Tu=e))&&Lr()}}function lc(){Du=Mu.current,kr(Mu)}function uc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,nr(n)),null!==Au)for(n=Au.return;null!==n;){var s=n;switch(Jr(s),s.tag){case 1:null!=(s=s.type.childContextTypes)&&Or();break;case 3:Yo(),kr(Ar),kr(Cr),ea();break;case 5:Zo(s);break;case 4:Yo();break;case 13:case 19:kr(Ko);break;case 10:Co(s.type._context);break;case 22:case 23:lc()}n=n.return}if(Cu=t,Au=t=Mc(t.current,null),Eu=Du=e,Ou=0,Ru=null,Nu=Fu=Pu=0,Iu=Vu=null,null!==Mo){for(e=0;e<Mo.length;e++)if(null!==(s=(n=Mo[e]).interleaved)){n.interleaved=null;var i=s.next,r=n.pending;if(null!==r){var o=r.next;r.next=i,s.next=o}n.pending=s}Mo=null}return t}function cc(t,e){for(;;){var n=Au;try{if(To(),na.current=Xa,la){for(var s=ra.memoizedState;null!==s;){var i=s.queue;null!==i&&(i.pending=null),s=s.next}la=!1}if(ia=0,aa=oa=ra=null,ua=!1,ca=0,ku.current=null,null===n||null===n.return){Ou=1,Ru=e,Au=null;break}t:{var r=t,o=n.return,a=n,l=e;if(e=Eu,a.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l,c=a,h=c.tag;if(!(1&c.mode||0!==h&&11!==h&&15!==h)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=pl(o);if(null!==p){p.flags&=-257,fl(p,o,a,0,e),1&p.mode&&dl(r,u,e),l=u;var f=(e=p).updateQueue;if(null===f){var m=new Set;m.add(l),e.updateQueue=m}else f.add(l);break t}if(!(1&e)){dl(r,u,e),dc();break t}l=Error(st(426))}else if(no&&1&a.mode){var g=pl(o);if(null!==g){!(65536&g.flags)&&(g.flags|=256),fl(g,o,a,0,e),po(al(l,a));break t}}r=l=al(l,a),4!==Ou&&(Ou=2),null===Vu?Vu=[r]:Vu.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e,Lo(r,cl(0,l,e));break t;case 1:a=l;var y=r.type,v=r.stateNode;if(!(128&r.flags||"function"!=typeof y.getDerivedStateFromError&&(null===v||"function"!=typeof v.componentDidCatch||null!==Wu&&Wu.has(v)))){r.flags|=65536,e&=-e,r.lanes|=e,Lo(r,hl(r,a,e));break t}}r=r.return}while(null!==r)}yc(n)}catch(_){e=_,Au===n&&null!==n&&(Au=n=n.return);continue}break}}function hc(){var t=wu.current;return wu.current=Xa,null===t?Xa:t}function dc(){0!==Ou&&3!==Ou&&2!==Ou||(Ou=4),null===Cu||!(268435455&Pu)&&!(268435455&Fu)||ic(Cu,Eu)}function pc(t,e){var n=Tu;Tu|=2;var s=hc();for(Cu===t&&Eu===e||(Lu=null,uc(t,e));;)try{fc();break}catch(i){cc(t,i)}if(To(),Tu=n,wu.current=s,null!==Au)throw Error(st(261));return Cu=null,Eu=0,Ou}function fc(){for(;null!==Au;)gc(Au)}function mc(){for(;null!==Au&&!He();)gc(Au)}function gc(t){var e=xu(t.alternate,t,Du);t.memoizedProps=t.pendingProps,null===e?yc(t):Au=e,ku.current=null}function yc(t){var e=t;do{var n=e.alternate;if(t=e.return,32768&e.flags){if(null!==(n=$l(n,e)))return n.flags&=32767,void(Au=n);if(null===t)return Ou=6,void(Au=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}else if(null!==(n=Ul(n,e,Du)))return void(Au=n);if(null!==(e=e.sibling))return void(Au=e);Au=e=t}while(null!==e);0===Ou&&(Ou=5)}function vc(t,e,n){var s=vn,i=Su.transition;try{Su.transition=null,vn=1,function(t,e,n,s){do{_c()}while(null!==$u);if(6&Tu)throw Error(st(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(st(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-rn(n),r=1<<i;e[i]=0,s[i]=-1,t[i]=-1,n&=~r}}(t,r),t===Cu&&(Au=Cu=null,Eu=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Uu||(Uu=!0,Cc(Je,function(){return _c(),null})),r=!!(15990&n.flags),15990&n.subtreeFlags||r){r=Su.transition,Su.transition=null;var o=vn;vn=1;var a=Tu;Tu|=4,ku.current=null,function(t,e){if(Ki=Wn,hi(t=ci())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var s=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(s&&0!==s.rangeCount){n=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{n.nodeType,r.nodeType}catch(b){n=null;break t}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;e:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(a=o+i),h!==r||0!==s&&3!==h.nodeType||(l=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===t)break e;if(d===n&&++u===i&&(a=o),d===r&&++c===s&&(l=o),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===a||-1===l?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ji={focusedElem:t,selectionRange:n},Wn=!1,Yl=e;null!==Yl;)if(t=(e=Yl).child,1028&e.subtreeFlags&&null!==t)t.return=e,Yl=t;else for(;null!==Yl;){e=Yl;try{var f=e.alternate;if(1024&e.flags)switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,g=f.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:tl(e.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(st(163))}}catch(b){bc(e,e.return,b)}if(null!==(t=e.sibling)){t.return=e.return,Yl=t;break}Yl=e.return}f=Kl,Kl=!1}(t,n),pu(n,t),di(Ji),Wn=!!Ki,Ji=Ki=null,t.current=n,mu(n),Qe(),Tu=a,vn=o,Su.transition=r}else t.current=n;if(Uu&&(Uu=!1,$u=t,Gu=i),0===(r=t.pendingLanes)&&(Wu=null),function(t){if(sn&&"function"==typeof sn.onCommitFiberRoot)try{sn.onCommitFiberRoot(nn,t,void 0,!(128&~t.current.flags))}catch(e){}}(n.stateNode),tc(t,Ye()),null!==e)for(s=t.onRecoverableError,n=0;n<e.length;n++)s((i=e[n]).value,{componentStack:i.stack,digest:i.digest});if(zu)throw zu=!1,t=Bu,Bu=null,t;!!(1&Gu)&&0!==t.tag&&_c(),1&(r=t.pendingLanes)?t===Qu?Hu++:(Hu=0,Qu=t):Hu=0,Lr()}(t,e,n,s)}finally{Su.transition=i,vn=s}return null}function _c(){if(null!==$u){var t=_n(Gu),e=Su.transition,n=vn;try{if(Su.transition=null,vn=16>t?16:t,null===$u)var s=!1;else{if(t=$u,$u=null,Gu=0,6&Tu)throw Error(st(331));var i=Tu;for(Tu|=4,Yl=t.current;null!==Yl;){var r=Yl,o=r.child;if(16&Yl.flags){var a=r.deletions;if(null!==a){for(var l=0;l<a.length;l++){var u=a[l];for(Yl=u;null!==Yl;){var c=Yl;switch(c.tag){case 0:case 11:case 15:Jl(8,c,r)}var h=c.child;if(null!==h)h.return=c,Yl=h;else for(;null!==Yl;){var d=(c=Yl).sibling,p=c.return;if(nu(c),c===u){Yl=null;break}if(null!==d){d.return=p,Yl=d;break}Yl=p}}}var f=r.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Yl=r}}if(2064&r.subtreeFlags&&null!==o)o.return=r,Yl=o;else t:for(;null!==Yl;){if(2048&(r=Yl).flags)switch(r.tag){case 0:case 11:case 15:Jl(9,r,r.return)}var y=r.sibling;if(null!==y){y.return=r.return,Yl=y;break t}Yl=r.return}}var v=t.current;for(Yl=v;null!==Yl;){var _=(o=Yl).child;if(2064&o.subtreeFlags&&null!==_)_.return=o,Yl=_;else t:for(o=v;null!==Yl;){if(2048&(a=Yl).flags)try{switch(a.tag){case 0:case 11:case 15:tu(9,a)}}catch(b){bc(a,a.return,b)}if(a===o){Yl=null;break t}var x=a.sibling;if(null!==x){x.return=a.return,Yl=x;break t}Yl=a.return}}if(Tu=i,Lr(),sn&&"function"==typeof sn.onPostCommitFiberRoot)try{sn.onPostCommitFiberRoot(nn,t)}catch(b){}s=!0}return s}finally{vn=n,Su.transition=e}}return!1}function xc(t,e,n){t=jo(t,e=cl(0,e=al(n,e),1),1),e=Zu(),null!==t&&(gn(t,1,e),tc(t,e))}function bc(t,e,n){if(3===t.tag)xc(t,t,n);else for(;null!==e;){if(3===e.tag){xc(e,t,n);break}if(1===e.tag){var s=e.stateNode;if("function"==typeof e.type.getDerivedStateFromError||"function"==typeof s.componentDidCatch&&(null===Wu||!Wu.has(s))){e=jo(e,t=hl(e,t=al(n,t),1),1),t=Zu(),null!==e&&(gn(e,1,t),tc(e,t));break}}e=e.return}}function wc(t,e,n){var s=t.pingCache;null!==s&&s.delete(e),e=Zu(),t.pingedLanes|=t.suspendedLanes&n,Cu===t&&(Eu&n)===n&&(4===Ou||3===Ou&&(130023424&Eu)===Eu&&500>Ye()-ju?uc(t,0):Nu|=n),tc(t,e)}function kc(t,e){0===e&&(1&t.mode?(e=un,!(130023424&(un<<=1))&&(un=4194304)):e=1);var n=Zu();null!==(t=Po(t,e))&&(gn(t,e,n),tc(t,n))}function Sc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),kc(t,n)}function Tc(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(st(314))}null!==s&&s.delete(e),kc(t,n)}function Cc(t,e){return $e(t,e)}function Ac(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ec(t,e,n,s){return new Ac(t,e,n,s)}function Dc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Mc(t,e){var n=t.alternate;return null===n?((n=Ec(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Oc(t,e,n,s,i,r){var o=2;if(s=t,"function"==typeof t)Dc(t)&&(o=1);else if("string"==typeof t)o=5;else t:switch(t){case bt:return Rc(n.children,i,r,e);case wt:o=8,i|=8;break;case kt:return(t=Ec(12,n,e,2|i)).elementType=kt,t.lanes=r,t;case At:return(t=Ec(13,n,e,i)).elementType=At,t.lanes=r,t;case Et:return(t=Ec(19,n,e,i)).elementType=Et,t.lanes=r,t;case Ot:return Pc(n,i,r,e);default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case St:o=10;break t;case Tt:o=9;break t;case Ct:o=11;break t;case Dt:o=14;break t;case Mt:o=16,s=null;break t}throw Error(st(130,null==t?t:typeof t,""))}return(e=Ec(o,n,e,i)).elementType=t,e.type=s,e.lanes=r,e}function Rc(t,e,n,s){return(t=Ec(7,t,s,e)).lanes=n,t}function Pc(t,e,n,s){return(t=Ec(22,t,s,e)).elementType=Ot,t.lanes=n,t.stateNode={isHidden:!1},t}function Fc(t,e,n){return(t=Ec(6,t,null,e)).lanes=n,t}function Nc(t,e,n){return(e=Ec(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Vc(t,e,n,s,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mn(0),this.expirationTimes=mn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mn(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ic(t,e,n,s,i,r,o,a,l){return t=new Vc(t,e,n,a,l),1===e?(e=1,!0===r&&(e|=8)):e=0,r=Ec(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},No(r),t}function jc(t){if(!t)return Tr;t:{if(Le(t=t._reactInternals)!==t||1!==t.tag)throw Error(st(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Mr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(st(171))}if(1===t.tag){var n=t.type;if(Mr(n))return Pr(t,n,e)}return e}function qc(t,e,n,s,i,r,o,a,l){return(t=Ic(n,s,!0,t,0,r,0,a,l)).context=jc(null),n=t.current,(r=Io(s=Zu(),i=Ku(n))).callback=null!=e?e:null,jo(n,r,i),t.current.lanes=i,gn(t,i,s),tc(t,s),t}function Lc(t,e,n,s){var i=e.current,r=Zu(),o=Ku(i);return n=jc(n),null===e.context?e.context=n:e.pendingContext=n,(e=Io(r,o)).payload={element:t},null!==(s=void 0===s?null:s)&&(e.callback=s),null!==(t=jo(i,e,o))&&(Ju(t,i,o,r),qo(t,i,o)),o}function zc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Bc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Wc(t,e){Bc(t,e),(t=t.alternate)&&Bc(t,e)}xu=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ar.current)gl=!0;else{if(0===(t.lanes&n)&&!(128&e.flags))return gl=!1,function(t,e,n){switch(e.tag){case 3:Cl(e),ho();break;case 5:Xo(e);break;case 1:Mr(e.type)&&Fr(e);break;case 4:Qo(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;Sr(bo,s._currentValue),s._currentValue=i;break;case 13:if(null!==(s=e.memoizedState))return null!==s.dehydrated?(Sr(Ko,1&Ko.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Fl(t,e,n):(Sr(Ko,1&Ko.current),null!==(t=zl(t,e,n))?t.sibling:null);Sr(Ko,1&Ko.current);break;case 19:if(s=0!==(n&e.childLanes),128&t.flags){if(s)return ql(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Sr(Ko,Ko.current),s)break;return null;case 22:case 23:return e.lanes=0,bl(t,e,n)}return zl(t,e,n)}(t,e,n);gl=!!(131072&t.flags)}else gl=!1,no&&1048576&e.flags&&Zr(e,Ur,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Ll(t,e),t=e.pendingProps;var i=Dr(e,Cr.current);Eo(e,n),i=fa(null,e,s,t,i,n);var r=ma();return e.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mr(s)?(r=!0,Fr(e)):r=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,No(e),i.updater=nl,e.stateNode=i,i._reactInternals=e,ol(e,s,t,n),e=Tl(null,e,s,!0,r,n)):(e.tag=0,no&&r&&Kr(e),yl(null,e,i,n),e=e.child),e;case 16:s=e.elementType;t:{switch(Ll(t,e),t=e.pendingProps,s=(i=s._init)(s._payload),e.type=s,i=e.tag=function(t){if("function"==typeof t)return Dc(t)?1:0;if(null!=t){if((t=t.$$typeof)===Ct)return 11;if(t===Dt)return 14}return 2}(s),t=tl(s,t),i){case 0:e=kl(null,e,s,t,n);break t;case 1:e=Sl(null,e,s,t,n);break t;case 11:e=vl(null,e,s,t,n);break t;case 14:e=_l(null,e,s,tl(s.type,t),n);break t}throw Error(st(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,kl(t,e,s,i=e.elementType===s?i:tl(s,i),n);case 1:return s=e.type,i=e.pendingProps,Sl(t,e,s,i=e.elementType===s?i:tl(s,i),n);case 3:t:{if(Cl(e),null===t)throw Error(st(387));s=e.pendingProps,i=(r=e.memoizedState).element,Vo(t,e),zo(e,s,null,n);var o=e.memoizedState;if(s=o.element,r.isDehydrated){if(r={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,256&e.flags){e=Al(t,e,s,n,i=al(Error(st(423)),e));break t}if(s!==i){e=Al(t,e,s,n,i=al(Error(st(424)),e));break t}for(eo=ar(e.stateNode.containerInfo.firstChild),to=e,no=!0,so=null,n=xo(e,null,s,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ho(),s===i){e=zl(t,e,n);break t}yl(t,e,s,n)}e=e.child}return e;case 5:return Xo(e),null===t&&ao(e),s=e.type,i=e.pendingProps,r=null!==t?t.memoizedProps:null,o=i.children,tr(s,i)?o=null:null!==r&&tr(s,r)&&(e.flags|=32),wl(t,e),yl(t,e,o,n),e.child;case 6:return null===t&&ao(e),null;case 13:return Fl(t,e,n);case 4:return Qo(e,e.stateNode.containerInfo),s=e.pendingProps,null===t?e.child=_o(e,null,s,n):yl(t,e,s,n),e.child;case 11:return s=e.type,i=e.pendingProps,vl(t,e,s,i=e.elementType===s?i:tl(s,i),n);case 7:return yl(t,e,e.pendingProps,n),e.child;case 8:case 12:return yl(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(s=e.type._context,i=e.pendingProps,r=e.memoizedProps,o=i.value,Sr(bo,s._currentValue),s._currentValue=o,null!==r)if(ri(r.value,o)){if(r.children===i.children&&!Ar.current){e=zl(t,e,n);break t}}else for(null!==(r=e.child)&&(r.return=e);null!==r;){var a=r.dependencies;if(null!==a){o=r.child;for(var l=a.firstContext;null!==l;){if(l.context===s){if(1===r.tag){(l=Io(-1,n&-n)).tag=2;var u=r.updateQueue;if(null!==u){var c=(u=u.shared).pending;null===c?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}r.lanes|=n,null!==(l=r.alternate)&&(l.lanes|=n),Ao(r.return,n,e),a.lanes|=n;break}l=l.next}}else if(10===r.tag)o=r.type===e.type?null:r.child;else if(18===r.tag){if(null===(o=r.return))throw Error(st(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),Ao(o,n,e),o=r.sibling}else o=r.child;if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===e){o=null;break}if(null!==(r=o.sibling)){r.return=o.return,o=r;break}o=o.return}r=o}yl(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,Eo(e,n),s=s(i=Do(i)),e.flags|=1,yl(t,e,s,n),e.child;case 14:return i=tl(s=e.type,e.pendingProps),_l(t,e,s,i=tl(s.type,i),n);case 15:return xl(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:tl(s,i),Ll(t,e),e.tag=1,Mr(s)?(t=!0,Fr(e)):t=!1,Eo(e,n),il(e,s,i),ol(e,s,i,n),Tl(null,e,s,!0,t,n);case 19:return ql(t,e,n);case 22:return bl(t,e,n)}throw Error(st(156,e.tag))};var Uc="function"==typeof reportError?reportError:function(t){};function $c(t){this._internalRoot=t}function Gc(t){this._internalRoot=t}function Hc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Qc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Yc(){}function Xc(t,e,n,s,i){var r=n._reactRootContainer;if(r){var o=r;if("function"==typeof i){var a=i;i=function(){var t=zc(o);a.call(t)}}Lc(e,o,t,i)}else o=function(t,e,n,s,i){if(i){if("function"==typeof s){var r=s;s=function(){var t=zc(o);r.call(t)}}var o=qc(e,s,t,0,null,!1,0,"",Yc);return t._reactRootContainer=o,t[dr]=o.current,Li(8===t.nodeType?t.parentNode:t),ac(),o}for(;i=t.lastChild;)t.removeChild(i);if("function"==typeof s){var a=s;s=function(){var t=zc(l);a.call(t)}}var l=Ic(t,0,!1,null,0,!1,0,"",Yc);return t._reactRootContainer=l,t[dr]=l.current,Li(8===t.nodeType?t.parentNode:t),ac(function(){Lc(e,l,n,s)}),l}(n,e,t,i,s);return zc(o)}Gc.prototype.render=$c.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(st(409));Lc(t,e,null,null)},Gc.prototype.unmount=$c.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;ac(function(){Lc(null,t,null,null)}),e[dr]=null}},Gc.prototype.unstable_scheduleHydration=function(t){if(t){var e=kn();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rn.length&&0!==e&&e<Rn[n].priority;n++);Rn.splice(n,0,t),0===n&&Vn(t)}},xn=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=cn(e.pendingLanes);0!==n&&(yn(e,1|n),tc(e,Ye()),!(6&Tu)&&(qu=Ye()+500,Lr()))}break;case 13:ac(function(){var e=Po(t,1);if(null!==e){var n=Zu();Ju(e,t,1,n)}}),Wc(t,1)}},bn=function(t){if(13===t.tag){var e=Po(t,134217728);null!==e&&Ju(e,t,134217728,Zu()),Wc(t,134217728)}},wn=function(t){if(13===t.tag){var e=Ku(t),n=Po(t,e);null!==n&&Ju(n,t,e,Zu()),Wc(t,e)}},kn=function(){return vn},Sn=function(t,e){var n=vn;try{return vn=t,e()}finally{vn=n}},xe=function(t,e,n){switch(e){case"input":if(Xt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=_r(s);if(!i)throw Error(st(90));$t(s),Xt(s,i)}}}break;case"textarea":se(t,n);break;case"select":null!=(e=n.value)&&te(t,!!n.multiple,e,!1)}},Ce=oc,Ae=ac;var Zc={usingClientEntryPoint:!1,Events:[yr,vr,_r,Se,Te,oc]},Kc={findFiberByHostInstance:gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jc={bundleType:Kc.bundleType,version:Kc.version,rendererPackageName:Kc.rendererPackageName,rendererConfig:Kc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=We(t))?null:t.stateNode},findFiberByHostInstance:Kc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{nn=th.inject(Jc),sn=th}catch(le){}}Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zc,Z.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Hc(e))throw Error(st(200));return function(t,e,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:xt,key:null==s?null:""+s,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},Z.createRoot=function(t,e){if(!Hc(t))throw Error(st(299));var n=!1,s="",i=Uc;return null!=e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(s=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Ic(t,1,!1,null,0,n,0,s,i),t[dr]=e.current,Li(8===t.nodeType?t.parentNode:t),new $c(e)},Z.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"==typeof t.render)throw Error(st(188));throw t=Object.keys(t).join(","),Error(st(268,t))}return null===(t=We(e))?null:t.stateNode},Z.flushSync=function(t){return ac(t)},Z.hydrate=function(t,e,n){if(!Qc(e))throw Error(st(200));return Xc(null,t,e,!0,n)},Z.hydrateRoot=function(t,e,n){if(!Hc(t))throw Error(st(405));var s=null!=n&&n.hydratedSources||null,i=!1,r="",o=Uc;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),e=qc(e,null,t,1,null!=n?n:null,i,0,r,o),t[dr]=e.current,Li(t),s)for(t=0;t<s.length;t++)i=(i=(n=s[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Gc(e)},Z.render=function(t,e,n){if(!Qc(e))throw Error(st(200));return Xc(null,t,e,!1,n)},Z.unmountComponentAtNode=function(t){if(!Qc(t))throw Error(st(40));return!!t._reactRootContainer&&(ac(function(){Xc(null,null,t,!1,function(){t._reactRootContainer=null,t[dr]=null})}),!0)},Z.unstable_batchedUpdates=oc,Z.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Qc(n))throw Error(st(200));if(null==t||void 0===t._reactInternals)throw Error(st(38));return Xc(t,e,n,!1,s)},Z.version="18.3.1-next-f1338f8080-20240426",function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){}}(),X.exports=Z;var eh=X.exports;Y.createRoot=eh.createRoot,Y.hydrateRoot=eh.hydrateRoot;const nh=q.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),sh=q.createContext({}),ih=q.createContext(null),rh="undefined"!=typeof document,oh=rh?q.useLayoutEffect:q.useEffect,ah=q.createContext({strict:!1}),lh=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),uh="data-"+lh("framerAppearId");function ch(t){return t&&"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}function hh(t){return"string"==typeof t||Array.isArray(t)}function dh(t){return null!==t&&"object"==typeof t&&"function"==typeof t.start}const ph=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],fh=["initial",...ph];function mh(t){return dh(t.animate)||fh.some(e=>hh(t[e]))}function gh(t){return Boolean(mh(t)||t.variants)}function yh(t){return Array.isArray(t)?t.join(" "):t}const vh={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_h={};for(const KA in vh)_h[KA]={isEnabled:t=>vh[KA].some(e=>!!t[e])};const xh=q.createContext({}),bh=q.createContext({}),wh=Symbol.for("motionComponentSymbol");function kh({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:s,Component:i}){t&&function(t){for(const e in t)_h[e]={..._h[e],...t[e]}}(t);const r=q.forwardRef(function(r,o){let a;const l={...q.useContext(nh),...r,layoutId:Sh(r)},{isStatic:u}=l,c=function(t){const{initial:e,animate:n}=function(t,e){if(mh(t)){const{initial:e,animate:n}=t;return{initial:!1===e||hh(e)?e:void 0,animate:hh(n)?n:void 0}}return!1!==t.inherit?e:{}}(t,q.useContext(sh));return q.useMemo(()=>({initial:e,animate:n}),[yh(e),yh(n)])}(r),h=s(r,u);if(!u&&rh){c.visualElement=function(t,e,n,s){const{visualElement:i}=q.useContext(sh),r=q.useContext(ah),o=q.useContext(ih),a=q.useContext(nh).reducedMotion,l=q.useRef();s=s||r.renderer,!l.current&&s&&(l.current=s(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:a}));const u=l.current;q.useInsertionEffect(()=>{u&&u.update(n,o)});const c=q.useRef(Boolean(n[uh]&&!window.HandoffComplete));return oh(()=>{u&&(u.render(),c.current&&u.animationState&&u.animationState.animateChanges())}),q.useEffect(()=>{u&&(u.updateFeatures(),!c.current&&u.animationState&&u.animationState.animateChanges(),c.current&&(c.current=!1,window.HandoffComplete=!0))}),u}(i,h,l,e);const n=q.useContext(bh),s=q.useContext(ah).strict;c.visualElement&&(a=c.visualElement.loadFeatures(l,s,t,n))}return q.createElement(sh.Provider,{value:c},a&&c.visualElement?q.createElement(a,{visualElement:c.visualElement,...l}):null,n(i,r,function(t,e,n){return q.useCallback(s=>{s&&t.mount&&t.mount(s),e&&(s?e.mount(s):e.unmount()),n&&("function"==typeof n?n(s):ch(n)&&(n.current=s))},[e])}(h,c.visualElement,o),h,u,c.visualElement))});return r[wh]=i,r}function Sh({layoutId:t}){const e=q.useContext(xh).id;return e&&void 0!==t?e+"-"+t:t}function Th(t){function e(e,n={}){return kh(t(e,n))}if("undefined"==typeof Proxy)return e;const n=new Map;return new Proxy(e,{get:(t,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const Ch=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ah(t){return"string"==typeof t&&!t.includes("-")&&!!(Ch.indexOf(t)>-1||/[A-Z]/.test(t))}const Eh={},Dh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Mh=new Set(Dh);function Oh(t,{layout:e,layoutId:n}){return Mh.has(t)||t.startsWith("origin")||(e||void 0!==n)&&(!!Eh[t]||"opacity"===t)}const Rh=t=>Boolean(t&&t.getVelocity),Ph={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Fh=Dh.length,Nh=t=>e=>"string"==typeof e&&e.startsWith(t),Vh=Nh("--"),Ih=Nh("var(--"),jh=(t,e)=>e&&"number"==typeof t?e.transform(t):t,qh=(t,e,n)=>Math.min(Math.max(n,t),e),Lh={test:t=>"number"==typeof t,parse:parseFloat,transform:t=>t},zh={...Lh,transform:t=>qh(0,1,t)},Bh={...Lh,default:1},Wh=t=>Math.round(1e5*t)/1e5,Uh=/(-)?([\d]*\.?[\d])+/g,$h=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Gh=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Hh(t){return"string"==typeof t}const Qh=t=>({test:e=>Hh(e)&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>`${e}${t}`}),Yh=Qh("deg"),Xh=Qh("%"),Zh=Qh("px"),Kh=Qh("vh"),Jh=Qh("vw"),td={...Xh,parse:t=>Xh.parse(t)/100,transform:t=>Xh.transform(100*t)},ed={...Lh,transform:Math.round},nd={borderWidth:Zh,borderTopWidth:Zh,borderRightWidth:Zh,borderBottomWidth:Zh,borderLeftWidth:Zh,borderRadius:Zh,radius:Zh,borderTopLeftRadius:Zh,borderTopRightRadius:Zh,borderBottomRightRadius:Zh,borderBottomLeftRadius:Zh,width:Zh,maxWidth:Zh,height:Zh,maxHeight:Zh,size:Zh,top:Zh,right:Zh,bottom:Zh,left:Zh,padding:Zh,paddingTop:Zh,paddingRight:Zh,paddingBottom:Zh,paddingLeft:Zh,margin:Zh,marginTop:Zh,marginRight:Zh,marginBottom:Zh,marginLeft:Zh,rotate:Yh,rotateX:Yh,rotateY:Yh,rotateZ:Yh,scale:Bh,scaleX:Bh,scaleY:Bh,scaleZ:Bh,skew:Yh,skewX:Yh,skewY:Yh,distance:Zh,translateX:Zh,translateY:Zh,translateZ:Zh,x:Zh,y:Zh,z:Zh,perspective:Zh,transformPerspective:Zh,opacity:zh,originX:td,originY:td,originZ:Zh,zIndex:ed,fillOpacity:zh,strokeOpacity:zh,numOctaves:ed};function sd(t,e,n,s){const{style:i,vars:r,transform:o,transformOrigin:a}=t;let l=!1,u=!1,c=!0;for(const h in e){const t=e[h];if(Vh(h)){r[h]=t;continue}const n=nd[h],s=jh(t,n);if(Mh.has(h)){if(l=!0,o[h]=s,!c)continue;t!==(n.default||0)&&(c=!1)}else h.startsWith("origin")?(u=!0,a[h]=s):i[h]=s}if(e.transform||(l||s?i.transform=function(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},s,i){let r="";for(let o=0;o<Fh;o++){const e=Dh[o];void 0!==t[e]&&(r+=`${Ph[e]||e}(${t[e]}) `)}return e&&!t.z&&(r+="translateZ(0)"),r=r.trim(),i?r=i(t,s?"":r):n&&s&&(r="none"),r}(t.transform,n,c,s):i.transform&&(i.transform="none")),u){const{originX:t="50%",originY:e="50%",originZ:n=0}=a;i.transformOrigin=`${t} ${e} ${n}`}}function id(t,e,n){for(const s in e)Rh(e[s])||Oh(s,n)||(t[s]=e[s])}function rd(t,e,n){const s={},i=function(t,e,n){const s={};return id(s,t.style||{},t),Object.assign(s,function({transformTemplate:t},e,n){return q.useMemo(()=>{const s={style:{},transform:{},transformOrigin:{},vars:{}};return sd(s,e,{enableHardwareAcceleration:!n},t),Object.assign({},s.vars,s.style)},[e])}(t,e,n)),t.transformValues?t.transformValues(s):s}(t,e,n);return t.drag&&!1!==t.dragListener&&(s.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=i,s}const od=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ad(t){return t.startsWith("while")||t.startsWith("drag")&&"draggable"!==t||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||od.has(t)}let ld=t=>!ad(t);function ud(t){t&&(ld=e=>e.startsWith("on")?!ad(e):t(e))}try{ud(require("@emotion/is-prop-valid").default)}catch(ZA){}function cd(t,e,n){return"string"==typeof t?t:Zh.transform(e+n*t)}const hd={offset:"stroke-dashoffset",array:"stroke-dasharray"},dd={offset:"strokeDashoffset",array:"strokeDasharray"};function pd(t,{attrX:e,attrY:n,attrScale:s,originX:i,originY:r,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,h,d){if(sd(t,u,c,d),h)return void(t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox));t.attrs=t.style,t.style={};const{attrs:p,style:f,dimensions:m}=t;p.transform&&(m&&(f.transform=p.transform),delete p.transform),m&&(void 0!==i||void 0!==r||f.transform)&&(f.transformOrigin=function(t,e,n){return`${cd(e,t.x,t.width)} ${cd(n,t.y,t.height)}`}(m,void 0!==i?i:.5,void 0!==r?r:.5)),void 0!==e&&(p.x=e),void 0!==n&&(p.y=n),void 0!==s&&(p.scale=s),void 0!==o&&function(t,e,n=1,s=0,i=!0){t.pathLength=1;const r=i?hd:dd;t[r.offset]=Zh.transform(-s);const o=Zh.transform(e),a=Zh.transform(n);t[r.array]=`${o} ${a}`}(p,o,a,l,!1)}const fd=t=>"string"==typeof t&&"svg"===t.toLowerCase();function md(t,e,n,s){const i=q.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return pd(n,e,{enableHardwareAcceleration:!1},fd(s),t.transformTemplate),{...n.attrs,style:{...n.style}}},[e]);if(t.style){const e={};id(e,t.style,t),i.style={...e,...i.style}}return i}function gd(t=!1){return(e,n,s,{latestValues:i},r)=>{const o=(Ah(e)?md:rd)(n,i,r,e),a=function(t,e,n){const s={};for(const i in t)"values"===i&&"object"==typeof t.values||(ld(i)||!0===n&&ad(i)||!e&&!ad(i)||t.draggable&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}(n,"string"==typeof e,t),l={...a,...o,ref:s},{children:u}=n,c=q.useMemo(()=>Rh(u)?u.get():u,[u]);return q.createElement(e,{...l,children:c})}}function yd(t,{style:e,vars:n},s,i){Object.assign(t.style,e,i&&i.getProjectionStyles(s));for(const r in n)t.style.setProperty(r,n[r])}const vd=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _d(t,e,n,s){yd(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(vd.has(i)?i:lh(i),e.attrs[i])}function xd(t,e){const{style:n}=t,s={};for(const i in n)(Rh(n[i])||e.style&&Rh(e.style[i])||Oh(i,t))&&(s[i]=n[i]);return s}function bd(t,e){const n=xd(t,e);for(const s in t)(Rh(t[s])||Rh(e[s]))&&(n[-1!==Dh.indexOf(s)?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s]=t[s]);return n}function wd(t,e,n,s={},i={}){return"function"==typeof e&&(e=e(void 0!==n?n:t.custom,s,i)),"string"==typeof e&&(e=t.variants&&t.variants[e]),"function"==typeof e&&(e=e(void 0!==n?n:t.custom,s,i)),e}function kd(t){const e=q.useRef(null);return null===e.current&&(e.current=t()),e.current}const Sd=t=>Array.isArray(t),Td=t=>Sd(t)?t[t.length-1]||0:t;function Cd(t){const e=Rh(t)?t.get():t;return(t=>Boolean(t&&"object"==typeof t&&t.mix&&t.toValue))(e)?e.toValue():e}const Ad=t=>(e,n)=>{const s=q.useContext(sh),i=q.useContext(ih),r=()=>function({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},s,i,r){const o={latestValues:Ed(s,i,r,t),renderState:e()};return n&&(o.mount=t=>n(s,t,o)),o}(t,e,s,i);return n?r():kd(r)};function Ed(t,e,n,s){const i={},r=s(t,{});for(const d in r)i[d]=Cd(r[d]);let{initial:o,animate:a}=t;const l=mh(t),u=gh(t);e&&u&&!l&&!1!==t.inherit&&(void 0===o&&(o=e.initial),void 0===a&&(a=e.animate));let c=!!n&&!1===n.initial;c=c||!1===o;const h=c?a:o;return h&&"boolean"!=typeof h&&!dh(h)&&(Array.isArray(h)?h:[h]).forEach(e=>{const n=wd(t,e);if(!n)return;const{transitionEnd:s,transition:r,...o}=n;for(const t in o){let e=o[t];Array.isArray(e)&&(e=e[c?e.length-1:0]),null!==e&&(i[t]=e)}for(const t in s)i[t]=s[t]}),i}const Dd=t=>t;class Md{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const e=this.order.indexOf(t);-1!==e&&(this.order.splice(e,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}const Od=["prepare","read","update","preRender","render","postRender"],{schedule:Rd,cancel:Pd,state:Fd,steps:Nd}=function(t){let e=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Od.reduce((t,n)=>(t[n]=function(t){let e=new Md,n=new Md,s=0,i=!1,r=!1;const o=new WeakSet,a={schedule:(t,r=!1,a=!1)=>{const l=a&&i,u=l?e:n;return r&&o.add(t),u.add(t)&&l&&i&&(s=e.order.length),t},cancel:t=>{n.remove(t),o.delete(t)},process:l=>{if(i)r=!0;else{if(i=!0,[e,n]=[n,e],n.clear(),s=e.order.length,s)for(let n=0;n<s;n++){const s=e.order[n];s(l),o.has(s)&&(a.schedule(s),t())}i=!1,r&&(r=!1,a.process(l))}}};return a}(()=>e=!0),t),{}),r=t=>i[t].process(s),o=()=>{const i=performance.now();e=!1,s.delta=n?1e3/60:Math.max(Math.min(i-s.timestamp,40),1),s.timestamp=i,s.isProcessing=!0,Od.forEach(r),s.isProcessing=!1,e&&(n=!1,t(o))};return{schedule:Od.reduce((r,a)=>{const l=i[a];return r[a]=(i,r=!1,a=!1)=>(e||(e=!0,n=!0,s.isProcessing||t(o)),l.schedule(i,r,a)),r},{}),cancel:t=>Od.forEach(e=>i[e].cancel(t)),state:s,steps:i}}("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:Dd),Vd={useVisualState:Ad({scrapeMotionValuesFromProps:bd,createRenderState:()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),onMount:(t,e,{renderState:n,latestValues:s})=>{Rd.read(()=>{try{n.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(t){n.dimensions={x:0,y:0,width:0,height:0}}}),Rd.render(()=>{pd(n,s,{enableHardwareAcceleration:!1},fd(e.tagName),t.transformTemplate),_d(e,n)})}})},Id={useVisualState:Ad({scrapeMotionValuesFromProps:xd,createRenderState:()=>({style:{},transform:{},transformOrigin:{},vars:{}})})};function jd(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}const qd=t=>"mouse"===t.pointerType?"number"!=typeof t.button||t.button<=0:!1!==t.isPrimary;function Ld(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}function zd(t,e,n,s){return jd(t,e,(t=>e=>qd(e)&&t(e,Ld(e)))(n),s)}const Bd=(t,e)=>n=>e(t(n)),Wd=(...t)=>t.reduce(Bd);function Ud(t){let e=null;return()=>null===e&&(e=t,()=>{e=null})}const $d=Ud("dragHorizontal"),Gd=Ud("dragVertical");function Hd(t){let e=!1;if("y"===t)e=Gd();else if("x"===t)e=$d();else{const t=$d(),n=Gd();t&&n?e=()=>{t(),n()}:(t&&t(),n&&n())}return e}function Qd(){const t=Hd(!0);return!t||(t(),!1)}class Yd{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Xd(t,e){const n="pointer"+(e?"enter":"leave"),s="onHover"+(e?"Start":"End");return zd(t.current,n,(n,i)=>{if("touch"===n.pointerType||Qd())return;const r=t.getProps();t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",e),r[s]&&Rd.update(()=>r[s](n,i))},{passive:!t.getProps()[s]})}const Zd=(t,e)=>!!e&&(t===e||Zd(t,e.parentElement));function Kd(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Ld(n))}const Jd=new WeakMap,tp=new WeakMap,ep=t=>{const e=Jd.get(t.target);e&&e(t)},np=t=>{t.forEach(ep)};const sp={some:0,all:1},ip={inView:{Feature:class extends Yd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:s="some",once:i}=t,r={root:e?e.current:void 0,rootMargin:n,threshold:"number"==typeof s?s:sp[s]};return function(t,e,n){const s=function({root:t,...e}){const n=t||document;tp.has(n)||tp.set(n,{});const s=tp.get(n),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(np,{root:t,...e})),s[i]}(e);return Jd.set(t,n),s.observe(t),()=>{Jd.delete(t),s.unobserve(t)}}(this.node.current,r,t=>{const{isIntersecting:e}=t;if(this.isInView===e)return;if(this.isInView=e,i&&!e&&this.hasEnteredView)return;e&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",e);const{onViewportEnter:n,onViewportLeave:s}=this.node.getProps(),r=e?n:s;r&&r(t)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(function({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}(t,e))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Yd{constructor(){super(...arguments),this.removeStartListeners=Dd,this.removeEndListeners=Dd,this.removeAccessibleListeners=Dd,this.startPointerPress=(t,e)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),s=zd(window,"pointerup",(t,e)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:s,globalTapTarget:i}=this.node.getProps();Rd.update(()=>{i||Zd(this.node.current,t.target)?n&&n(t,e):s&&s(t,e)})},{passive:!(n.onTap||n.onPointerUp)}),i=zd(window,"pointercancel",(t,e)=>this.cancelPress(t,e),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Wd(s,i),this.startPress(t,e)},this.startAccessiblePress=()=>{const t=jd(this.node.current,"keydown",t=>{"Enter"!==t.key||this.isPressing||(this.removeEndListeners(),this.removeEndListeners=jd(this.node.current,"keyup",t=>{"Enter"===t.key&&this.checkPressEnd()&&Kd("up",(t,e)=>{const{onTap:n}=this.node.getProps();n&&Rd.update(()=>n(t,e))})}),Kd("down",(t,e)=>{this.startPress(t,e)}))}),e=jd(this.node.current,"blur",()=>{this.isPressing&&Kd("cancel",(t,e)=>this.cancelPress(t,e))});this.removeAccessibleListeners=Wd(t,e)}}startPress(t,e){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Rd.update(()=>n(t,e))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Qd()}cancelPress(t,e){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Rd.update(()=>n(t,e))}mount(){const t=this.node.getProps(),e=zd(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=jd(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Wd(e,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends Yd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(e){t=!0}t&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wd(jd(this.node.current,"focus",()=>this.onFocus()),jd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Yd{mount(){this.unmount=Wd(Xd(this.node,!0),Xd(this.node,!1))}unmount(){}}}};function rp(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}function op(t,e,n){const s=t.getProps();return wd(s,e,void 0!==n?n:s.custom,function(t){const e={};return t.values.forEach((t,n)=>e[n]=t.get()),e}(t),function(t){const e={};return t.values.forEach((t,n)=>e[n]=t.getVelocity()),e}(t))}let ap=Dd;const lp=t=>1e3*t,up=t=>t/1e3,cp=t=>Array.isArray(t)&&"number"==typeof t[0];function hp(t){return Boolean(!t||"string"==typeof t&&pp[t]||cp(t)||Array.isArray(t)&&t.every(hp))}const dp=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,pp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:dp([0,.65,.55,1]),circOut:dp([.55,0,1,.45]),backIn:dp([.31,.01,.66,-.59]),backOut:dp([.33,1.53,.69,.99])};function fp(t){if(t)return cp(t)?dp(t):Array.isArray(t)?t.map(fp):pp[t]}const mp=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t;function gp(t,e,n,s){if(t===e&&n===s)return Dd;return i=>0===i||1===i?i:mp(function(t,e,n,s,i){let r,o,a=0;do{o=e+(n-e)/2,r=mp(o,s,i)-t,r>0?n=o:e=o}while(Math.abs(r)>1e-7&&++a<12);return o}(i,0,1,t,n),e,s)}const yp=gp(.42,0,1,1),vp=gp(0,0,.58,1),_p=gp(.42,0,.58,1),xp=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,bp=t=>e=>1-t(1-e),wp=t=>1-Math.sin(Math.acos(t)),kp=bp(wp),Sp=xp(wp),Tp=gp(.33,1.53,.69,.99),Cp=bp(Tp),Ap=xp(Cp),Ep={linear:Dd,easeIn:yp,easeInOut:_p,easeOut:vp,circIn:wp,circInOut:Sp,circOut:kp,backIn:Cp,backInOut:Ap,backOut:Tp,anticipate:t=>(t*=2)<1?.5*Cp(t):.5*(2-Math.pow(2,-10*(t-1)))},Dp=t=>{if(Array.isArray(t)){ap(4===t.length);const[e,n,s,i]=t;return gp(e,n,s,i)}return"string"==typeof t?Ep[t]:t},Mp=(t,e)=>n=>Boolean(Hh(n)&&Gh.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),Op=(t,e,n)=>s=>{if(!Hh(s))return s;const[i,r,o,a]=s.match(Uh);return{[t]:parseFloat(i),[e]:parseFloat(r),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},Rp={...Lh,transform:t=>Math.round((t=>qh(0,255,t))(t))},Pp={test:Mp("rgb","red"),parse:Op("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+Rp.transform(t)+", "+Rp.transform(e)+", "+Rp.transform(n)+", "+Wh(zh.transform(s))+")"},Fp={test:Mp("#"),parse:function(t){let e="",n="",s="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}},transform:Pp.transform},Np={test:Mp("hsl","hue"),parse:Op("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Xh.transform(Wh(e))+", "+Xh.transform(Wh(n))+", "+Wh(zh.transform(s))+")"},Vp={test:t=>Pp.test(t)||Fp.test(t)||Np.test(t),parse:t=>Pp.test(t)?Pp.parse(t):Np.test(t)?Np.parse(t):Fp.parse(t),transform:t=>Hh(t)?t:t.hasOwnProperty("red")?Pp.transform(t):Np.transform(t)},Ip=(t,e,n)=>-n*t+n*e+t;function jp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}const qp=(t,e,n)=>{const s=t*t;return Math.sqrt(Math.max(0,n*(e*e-s)+s))},Lp=[Fp,Pp,Np];function zp(t){const e=(t=>Lp.find(e=>e.test(t)))(t);let n=e.parse(t);return e===Np&&(n=function({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,n/=100;let i=0,r=0,o=0;if(e/=100){const s=n<.5?n*(1+e):n+e-n*e,a=2*n-s;i=jp(a,s,t+1/3),r=jp(a,s,t),o=jp(a,s,t-1/3)}else i=r=o=n;return{red:Math.round(255*i),green:Math.round(255*r),blue:Math.round(255*o),alpha:s}}(n)),n}const Bp=(t,e)=>{const n=zp(t),s=zp(e),i={...n};return t=>(i.red=qp(n.red,s.red,t),i.green=qp(n.green,s.green,t),i.blue=qp(n.blue,s.blue,t),i.alpha=Ip(n.alpha,s.alpha,t),Pp.transform(i))},Wp={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:Dd},Up={regex:$h,countKey:"Colors",token:"${c}",parse:Vp.parse},$p={regex:Uh,countKey:"Numbers",token:"${n}",parse:Lh.parse};function Gp(t,{regex:e,countKey:n,token:s,parse:i}){const r=t.tokenised.match(e);r&&(t["num"+n]=r.length,t.tokenised=t.tokenised.replace(e,s),t.values.push(...r.map(i)))}function Hp(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Gp(n,Wp),Gp(n,Up),Gp(n,$p),n}function Qp(t){return Hp(t).values}function Yp(t){const{values:e,numColors:n,numVars:s,tokenised:i}=Hp(t),r=e.length;return t=>{let e=i;for(let i=0;i<r;i++)e=i<s?e.replace(Wp.token,t[i]):i<s+n?e.replace(Up.token,Vp.transform(t[i])):e.replace($p.token,Wh(t[i]));return e}}const Xp=t=>"number"==typeof t?0:t,Zp={test:function(t){var e,n;return isNaN(t)&&Hh(t)&&((null===(e=t.match(Uh))||void 0===e?void 0:e.length)||0)+((null===(n=t.match($h))||void 0===n?void 0:n.length)||0)>0},parse:Qp,createTransformer:Yp,getAnimatableNone:function(t){const e=Qp(t);return Yp(t)(e.map(Xp))}},Kp=(t,e)=>n=>`${n>0?e:t}`;function Jp(t,e){return"number"==typeof t?n=>Ip(t,e,n):Vp.test(t)?Bp(t,e):t.startsWith("var(")?Kp(t,e):nf(t,e)}const tf=(t,e)=>{const n=[...t],s=n.length,i=t.map((t,n)=>Jp(t,e[n]));return t=>{for(let e=0;e<s;e++)n[e]=i[e](t);return n}},ef=(t,e)=>{const n={...t,...e},s={};for(const i in n)void 0!==t[i]&&void 0!==e[i]&&(s[i]=Jp(t[i],e[i]));return t=>{for(const e in s)n[e]=s[e](t);return n}},nf=(t,e)=>{const n=Zp.createTransformer(e),s=Hp(t),i=Hp(e);return s.numVars===i.numVars&&s.numColors===i.numColors&&s.numNumbers>=i.numNumbers?Wd(tf(s.values,i.values),n):Kp(t,e)},sf=(t,e,n)=>{const s=e-t;return 0===s?1:(n-t)/s},rf=(t,e)=>n=>Ip(t,e,n);function of(t,e,{clamp:n=!0,ease:s,mixer:i}={}){const r=t.length;if(ap(r===e.length),1===r)return()=>e[0];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=function(t,e,n){const s=[],i=n||function(t){return"number"==typeof t?rf:"string"==typeof t?Vp.test(t)?Bp:nf:Array.isArray(t)?tf:"object"==typeof t?ef:rf}(t[0]),r=t.length-1;for(let o=0;o<r;o++){let n=i(t[o],t[o+1]);if(e){const t=Array.isArray(e)?e[o]||Dd:e;n=Wd(t,n)}s.push(n)}return s}(e,s,i),a=o.length,l=e=>{let n=0;if(a>1)for(;n<t.length-2&&!(e<t[n+1]);n++);const s=sf(t[n],t[n+1],e);return o[n](s)};return n?e=>l(qh(t[0],t[r-1],e)):l}function af({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const i=(t=>Array.isArray(t)&&"number"!=typeof t[0])(s)?s.map(Dp):Dp(s),r={done:!1,value:e[0]},o=function(t,e){return t.map(t=>t*e)}(n&&n.length===e.length?n:function(t){const e=[0];return function(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const i=sf(0,e,s);t.push(Ip(n,1,i))}}(e,t.length-1),e}(e),t),a=of(o,e,{ease:Array.isArray(i)?i:(l=e,u=i,l.map(()=>u||_p).splice(0,l.length-1))});var l,u;return{calculatedDuration:t,next:e=>(r.value=a(e),r.done=e>=t,r)}}function lf(t,e){return e?t*(1e3/e):0}function uf(t,e,n){const s=Math.max(e-5,0);return lf(n-t(s),e-s)}const cf=12;function hf(t,e){return t*Math.sqrt(1-e*e)}const df=["duration","bounce"],pf=["stiffness","damping","mass"];function ff(t,e){return e.some(e=>void 0!==t[e])}function mf({keyframes:t,restDelta:e,restSpeed:n,...s}){const i=t[0],r=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:c,velocity:h,isResolvedFromDuration:d}=function(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!ff(t,pf)&&ff(t,df)){const n=function({duration:t=800,bounce:e=.25,velocity:n=0,mass:s=1}){let i,r,o=1-e;o=qh(.05,1,o),t=qh(.01,10,up(t)),o<1?(i=e=>{const s=e*o,i=s*t;return.001-(s-n)/hf(e,o)*Math.exp(-i)},r=e=>{const s=e*o*t,r=s*n+n,a=Math.pow(o,2)*Math.pow(e,2)*t,l=Math.exp(-s),u=hf(Math.pow(e,2),o);return(.001-i(e)>0?-1:1)*((r-a)*l)/u}):(i=e=>Math.exp(-e*t)*((e-n)*t+1)-.001,r=e=>Math.exp(-e*t)*(t*t*(n-e)));const a=function(t,e,n){let s=n;for(let i=1;i<cf;i++)s-=t(s)/e(s);return s}(i,r,5/t);if(t=lp(t),isNaN(a))return{stiffness:100,damping:10,duration:t};{const e=Math.pow(a,2)*s;return{stiffness:e,damping:2*o*Math.sqrt(s*e),duration:t}}}(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}({...s,velocity:-up(s.velocity||0)}),p=h||0,f=l/(2*Math.sqrt(a*u)),m=r-i,g=up(Math.sqrt(a/u)),y=Math.abs(m)<5;let v;if(n||(n=y?.01:2),e||(e=y?.005:.5),f<1){const t=hf(g,f);v=e=>{const n=Math.exp(-f*g*e);return r-n*((p+f*g*m)/t*Math.sin(t*e)+m*Math.cos(t*e))}}else if(1===f)v=t=>r-Math.exp(-g*t)*(m+(p+g*m)*t);else{const t=g*Math.sqrt(f*f-1);v=e=>{const n=Math.exp(-f*g*e),s=Math.min(t*e,300);return r-n*((p+f*g*m)*Math.sinh(s)+t*m*Math.cosh(s))/t}}return{calculatedDuration:d&&c||null,next:t=>{const s=v(t);if(d)o.done=t>=c;else{let i=p;0!==t&&(i=f<1?uf(v,t,s):0);const a=Math.abs(i)<=n,l=Math.abs(r-s)<=e;o.done=a&&l}return o.value=o.done?r:s,o}}}function gf({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const h=t[0],d={done:!1,value:h},p=t=>void 0===a?l:void 0===l||Math.abs(a-t)<Math.abs(l-t)?a:l;let f=n*e;const m=h+f,g=void 0===o?m:o(m);g!==m&&(f=g-h);const y=t=>-f*Math.exp(-t/s),v=t=>g+y(t),_=t=>{const e=y(t),n=v(t);d.done=Math.abs(e)<=u,d.value=d.done?g:n};let x,b;const w=t=>{(t=>void 0!==a&&t<a||void 0!==l&&t>l)(d.value)&&(x=t,b=mf({keyframes:[d.value,p(d.value)],velocity:uf(v,t,d.value),damping:i,stiffness:r,restDelta:u,restSpeed:c}))};return w(0),{calculatedDuration:null,next:t=>{let e=!1;return b||void 0!==x||(e=!0,_(t),w(t)),void 0!==x&&t>x?b.next(t-x):(!e&&_(t),d)}}}const yf=t=>{const e=({timestamp:e})=>t(e);return{start:()=>Rd.update(e,!0),stop:()=>Pd(e),now:()=>Fd.isProcessing?Fd.timestamp:performance.now()}};function vf(t){let e=0,n=t.next(e);for(;!n.done&&e<2e4;)e+=50,n=t.next(e);return e>=2e4?1/0:e}const _f={decay:gf,inertia:gf,tween:af,keyframes:af,spring:mf};function xf({autoplay:t=!0,delay:e=0,driver:n=yf,keyframes:s,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:c,onUpdate:h,...d}){let p,f,m=1,g=!1;const y=()=>{f=new Promise(t=>{p=t})};let v;y();const _=_f[i]||af;let x;_!==af&&"number"!=typeof s[0]&&(x=of([0,100],s,{clamp:!1}),s=[0,100]);const b=_({...d,keyframes:s});let w;"mirror"===a&&(w=_({...d,keyframes:[...s].reverse(),velocity:-(d.velocity||0)}));let k="idle",S=null,T=null,C=null;null===b.calculatedDuration&&r&&(b.calculatedDuration=vf(b));const{calculatedDuration:A}=b;let E=1/0,D=1/0;null!==A&&(E=A+o,D=E*(r+1)-o);let M=0;const O=t=>{if(null===T)return;m>0&&(T=Math.min(T,t)),m<0&&(T=Math.min(t-D/m,T)),M=null!==S?S:Math.round(t-T)*m;const n=M-e*(m>=0?1:-1),i=m>=0?n<0:n>D;M=Math.max(n,0),"finished"===k&&null===S&&(M=D);let l=M,u=b;if(r){const t=Math.min(M,D)/E;let e=Math.floor(t),n=t%1;!n&&t>=1&&(n=1),1===n&&e--,e=Math.min(e,r+1),Boolean(e%2)&&("reverse"===a?(n=1-n,o&&(n-=o/E)):"mirror"===a&&(u=w)),l=qh(0,1,n)*E}const c=i?{done:!1,value:s[0]}:u.next(l);x&&(c.value=x(c.value));let{done:d}=c;i||null===A||(d=m>=0?M>=D:M<=0);const p=null===S&&("finished"===k||"running"===k&&d);return h&&h(c.value),p&&F(),c},R=()=>{v&&v.stop(),v=void 0},P=()=>{k="idle",R(),p(),y(),T=C=null},F=()=>{k="finished",c&&c(),R(),p()},N=()=>{if(g)return;v||(v=n(O));const t=v.now();l&&l(),null!==S?T=t-S:T&&"finished"!==k||(T=t),"finished"===k&&y(),C=T,S=null,k="running",v.start()};t&&N();const V={then:(t,e)=>f.then(t,e),get time(){return up(M)},set time(t){t=lp(t),M=t,null===S&&v&&0!==m?T=v.now()-t/m:S=t},get duration(){const t=null===b.calculatedDuration?vf(b):b.calculatedDuration;return up(t)},get speed(){return m},set speed(t){t!==m&&v&&(m=t,V.time=up(M))},get state(){return k},play:N,pause:()=>{k="paused",S=M},stop:()=>{g=!0,"idle"!==k&&(k="idle",u&&u(),P())},cancel:()=>{null!==C&&O(C),P()},complete:()=>{k="finished"},sample:t=>(T=0,O(t))};return V}const bf=function(){let t;return()=>(void 0===t&&(t=Object.hasOwnProperty.call(Element.prototype,"animate")),t)}(),wf=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);const kf={type:"spring",stiffness:500,damping:25,restSpeed:10},Sf={type:"keyframes",duration:.8},Tf={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Cf=(t,{keyframes:e})=>e.length>2?Sf:Mh.has(t)?t.startsWith("scale")?{type:"spring",stiffness:550,damping:0===e[1]?2*Math.sqrt(550):30,restSpeed:10}:kf:Tf,Af=(t,e)=>!("zIndex"===t||"number"!=typeof e&&!Array.isArray(e)&&("string"!=typeof e||!Zp.test(e)&&"0"!==e||e.startsWith("url("))),Ef=new Set(["brightness","contrast","saturate","opacity"]);function Df(t){const[e,n]=t.slice(0,-1).split("(");if("drop-shadow"===e)return t;const[s]=n.match(Uh)||[];if(!s)return t;const i=n.replace(s,"");let r=Ef.has(e)?1:0;return s!==n&&(r*=100),e+"("+r+i+")"}const Mf=/([a-z-]*)\(.*?\)/g,Of={...Zp,getAnimatableNone:t=>{const e=t.match(Mf);return e?e.map(Df).join(" "):t}},Rf={...nd,color:Vp,backgroundColor:Vp,outlineColor:Vp,fill:Vp,stroke:Vp,borderColor:Vp,borderTopColor:Vp,borderRightColor:Vp,borderBottomColor:Vp,borderLeftColor:Vp,filter:Of,WebkitFilter:Of},Pf=t=>Rf[t];function Ff(t,e){let n=Pf(t);return n!==Of&&(n=Zp),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Nf=t=>/^0[^.\s]+$/.test(t);function Vf(t){return"number"==typeof t?0===t:null!==t?"none"===t||"0"===t||Nf(t):void 0}function If(t,e){return t[e]||t.default||t}const jf=(t,e,n,s={})=>i=>{const r=If(s,t)||{},o=r.delay||s.delay||0;let{elapsed:a=0}=s;a-=lp(o);const l=function(t,e,n,s){const i=Af(e,n);let r;r=Array.isArray(n)?[...n]:[null,n];const o=void 0!==s.from?s.from:t.get();let a;const l=[];for(let u=0;u<r.length;u++)null===r[u]&&(r[u]=0===u?o:r[u-1]),Vf(r[u])&&l.push(u),"string"==typeof r[u]&&"none"!==r[u]&&"0"!==r[u]&&(a=r[u]);if(i&&l.length&&a)for(let u=0;u<l.length;u++)r[l[u]]=Ff(e,a);return r}(e,t,n,r),u=l[0],c=l[l.length-1],h=Af(t,u),d=Af(t,c);let p={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...r,delay:-a,onUpdate:t=>{e.set(t),r.onUpdate&&r.onUpdate(t)},onComplete:()=>{i(),r.onComplete&&r.onComplete()}};if(function({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}(r)||(p={...p,...Cf(t,p)}),p.duration&&(p.duration=lp(p.duration)),p.repeatDelay&&(p.repeatDelay=lp(p.repeatDelay)),!h||!d||!1===r.type)return function({keyframes:t,delay:e,onUpdate:n,onComplete:s}){const i=()=>(n&&n(t[t.length-1]),s&&s(),{time:0,speed:1,duration:0,play:Dd,pause:Dd,stop:Dd,then:t=>(t(),Promise.resolve()),cancel:Dd,complete:Dd});return e?xf({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}(p);if(!s.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const n=function(t,e,{onUpdate:n,onComplete:s,...i}){if(!bf()||!wf.has(e)||i.repeatDelay||"mirror"===i.repeatType||0===i.damping||"inertia"===i.type)return!1;let r,o,a=!1,l=!1;const u=()=>{o=new Promise(t=>{r=t})};u();let{keyframes:c,duration:h=300,ease:d,times:p}=i;if(((t,e)=>"spring"===e.type||"backgroundColor"===t||!hp(e.ease))(e,i)){const t=xf({...i,repeat:0,delay:0});let e={done:!1,value:c[0]};const n=[];let s=0;for(;!e.done&&s<2e4;)e=t.sample(s),n.push(e.value),s+=10;p=void 0,c=n,h=s-10,d="linear"}const f=function(t,e,n,{delay:s=0,duration:i,repeat:r=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:n};l&&(u.offset=l);const c=fp(a);return Array.isArray(c)&&(u.easing=c),t.animate(u,{delay:s,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:r+1,direction:"reverse"===o?"alternate":"normal"})}(t.owner.current,e,c,{...i,duration:h,ease:d,times:p}),m=()=>{l=!1,f.cancel()},g=()=>{l=!0,Rd.update(m),r(),u()};return f.onfinish=()=>{l||(t.set(function(t,{repeat:e,repeatType:n="loop"}){return t[e&&"loop"!==n&&e%2==1?0:t.length-1]}(c,i)),s&&s(),g())},{then:(t,e)=>o.then(t,e),attachTimeline:t=>(f.timeline=t,f.onfinish=null,Dd),get time(){return up(f.currentTime||0)},set time(t){f.currentTime=lp(t)},get speed(){return f.playbackRate},set speed(t){f.playbackRate=t},get duration(){return up(h)},play:()=>{a||(f.play(),Pd(m))},pause:()=>f.pause(),stop:()=>{if(a=!0,"idle"===f.playState)return;const{currentTime:e}=f;if(e){const n=xf({...i,autoplay:!1});t.setWithVelocity(n.sample(e-10).value,n.sample(e).value,10)}g()},complete:()=>{l||f.finish()},cancel:g}}(e,t,p);if(n)return n}return xf(p)};function qf(t){return Boolean(Rh(t)&&t.add)}const Lf=t=>/^\-?\d*\.?\d+$/.test(t);function zf(t,e){-1===t.indexOf(e)&&t.push(e)}function Bf(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Wf{constructor(){this.subscriptions=[]}add(t){return zf(this.subscriptions,t),()=>Bf(this.subscriptions,t)}notify(t,e,n){const s=this.subscriptions.length;if(s)if(1===s)this.subscriptions[0](t,e,n);else for(let i=0;i<s;i++){const s=this.subscriptions[i];s&&s(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Uf={current:void 0};class $f{constructor(t,e={}){var n;this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(t,e=!0)=>{this.prev=this.current,this.current=t;const{delta:n,timestamp:s}=Fd;this.lastUpdated!==s&&(this.timeDelta=n,this.lastUpdated=s,Rd.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),e&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Rd.postRender(this.velocityCheck),this.velocityCheck=({timestamp:t})=>{t!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=(n=this.current,!isNaN(parseFloat(n))),this.owner=e.owner}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new Wf);const n=this.events[t].add(e);return"change"===t?()=>{n(),Rd.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)}setWithVelocity(t,e,n){this.set(e),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Uf.current&&Uf.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?lf(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Gf(t,e){return new $f(t,e)}const Hf=t=>e=>e.test(t),Qf=[Lh,Zh,Xh,Yh,Jh,Kh,{test:t=>"auto"===t,parse:t=>t}],Yf=t=>Qf.find(Hf(t)),Xf=[...Qf,Vp,Zp],Zf=t=>Xf.find(Hf(t));function Kf(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Gf(n))}function Jf(t,e){if(e)return(e[t]||e.default||e).from}function tm({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&!0!==e[n];return e[n]=!1,s}function em(t,e){const n=t.get();if(!Array.isArray(e))return n!==e;for(let s=0;s<e.length;s++)if(e[s]!==n)return!0}function nm(t,e,{delay:n=0,transitionOverride:s,type:i}={}){let{transition:r=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");s&&(r=s);const u=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const e=t.getValue(h),s=a[h];if(!e||void 0===s||c&&tm(c,h))continue;const i={delay:n,elapsed:0,...If(r||{},h)};if(window.HandoffAppearAnimations){const n=t.getProps()[uh];if(n){const t=window.HandoffAppearAnimations(n,h,e,Rd);null!==t&&(i.elapsed=t,i.isHandoff=!0)}}let o=!i.isHandoff&&!em(e,s);if("spring"===i.type&&(e.getVelocity()||i.velocity)&&(o=!1),e.animation&&(o=!1),o)continue;e.start(jf(h,e,s,t.shouldReduceMotion&&Mh.has(h)?{type:!1}:i));const d=e.animation;qf(l)&&(l.add(h),d.then(()=>l.remove(h))),u.push(d)}return o&&Promise.all(u).then(()=>{o&&function(t,e){const n=op(t,e);let{transitionEnd:s={},transition:i={},...r}=n?t.makeTargetAnimatable(n,!1):{};r={...r,...s};for(const o in r)Kf(t,o,Td(r[o]))}(t,o)}),u}function sm(t,e,n={}){const s=op(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const r=s?()=>Promise.all(nm(t,s,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(s=0)=>{const{delayChildren:r=0,staggerChildren:o,staggerDirection:a}=i;return function(t,e,n=0,s=0,i=1,r){const o=[],a=(t.variantChildren.size-1)*s,l=1===i?(t=0)=>t*s:(t=0)=>a-t*s;return Array.from(t.variantChildren).sort(im).forEach((t,s)=>{t.notify("AnimationStart",e),o.push(sm(t,e,{...r,delay:n+l(s)}).then(()=>t.notify("AnimationComplete",e)))}),Promise.all(o)}(t,e,r+s,o,a,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[t,e]="beforeChildren"===a?[r,o]:[o,r];return t().then(()=>e())}return Promise.all([r(),o(n.delay)])}function im(t,e){return t.sortNodePosition(e)}const rm=[...ph].reverse(),om=ph.length;function am(t){let e=function(t){return e=>Promise.all(e.map(({animation:e,options:n})=>function(t,e,n={}){let s;if(t.notify("AnimationStart",e),Array.isArray(e)){const i=e.map(e=>sm(t,e,n));s=Promise.all(i)}else if("string"==typeof e)s=sm(t,e,n);else{const i="function"==typeof e?op(t,e,n.custom):e;s=Promise.all(nm(t,i,n))}return s.then(()=>t.notify("AnimationComplete",e))}(t,e,n)))}(t);const n={animate:um(!0),whileInView:um(),whileHover:um(),whileTap:um(),whileDrag:um(),whileFocus:um(),exit:um()};let s=!0;const i=(e,n)=>{const s=op(t,n);if(s){const{transition:t,transitionEnd:n,...i}=s;e={...e,...i,...n}}return e};function r(r,o){const a=t.getProps(),l=t.getVariantContext(!0)||{},u=[],c=new Set;let h={},d=1/0;for(let e=0;e<om;e++){const p=rm[e],f=n[p],m=void 0!==a[p]?a[p]:l[p],g=hh(m),y=p===o?f.isActive:null;!1===y&&(d=e);let v=m===l[p]&&m!==a[p]&&g;if(v&&s&&t.manuallyAnimateOnMount&&(v=!1),f.protectedKeys={...h},!f.isActive&&null===y||!m&&!f.prevProp||dh(m)||"boolean"==typeof m)continue;let _=lm(f.prevProp,m)||p===o&&f.isActive&&!v&&g||e>d&&g,x=!1;const b=Array.isArray(m)?m:[m];let w=b.reduce(i,{});!1===y&&(w={});const{prevResolvedValues:k={}}=f,S={...k,...w},T=t=>{_=!0,c.has(t)&&(x=!0,c.delete(t)),f.needsAnimating[t]=!0};for(const t in S){const e=w[t],n=k[t];if(h.hasOwnProperty(t))continue;let s=!1;s=Sd(e)&&Sd(n)?!rp(e,n):e!==n,s?void 0!==e?T(t):c.add(t):void 0!==e&&c.has(t)?T(t):f.protectedKeys[t]=!0}f.prevProp=m,f.prevResolvedValues=w,f.isActive&&(h={...h,...w}),s&&t.blockInitialAnimation&&(_=!1),!_||v&&!x||u.push(...b.map(t=>({animation:t,options:{type:p,...r}})))}if(c.size){const e={};c.forEach(n=>{const s=t.getBaseTarget(n);void 0!==s&&(e[n]=s)}),u.push({animation:e})}let p=Boolean(u.length);return!s||!1!==a.initial&&a.initial!==a.animate||t.manuallyAnimateOnMount||(p=!1),s=!1,p?e(u):Promise.resolve()}return{animateChanges:r,setActive:function(e,s,i){var o;if(n[e].isActive===s)return Promise.resolve();null===(o=t.variantChildren)||void 0===o||o.forEach(t=>{var n;return null===(n=t.animationState)||void 0===n?void 0:n.setActive(e,s)}),n[e].isActive=s;const a=r(i,e);for(const t in n)n[t].protectedKeys={};return a},setAnimateFunction:function(n){e=n(t)},getState:()=>n}}function lm(t,e){return"string"==typeof e?e!==t:!!Array.isArray(e)&&!rp(e,t)}function um(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let cm=0;const hm={animation:{Feature:class extends Yd{constructor(t){super(t),t.animationState||(t.animationState=am(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),dh(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends Yd{constructor(){super(...arguments),this.id=cm++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e,custom:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:null!=n?n:this.node.getProps().custom});e&&!t&&i.then(()=>e(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}}},dm=(t,e)=>Math.abs(t-e);class pm{constructor(t,e,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const t=gm(this.lastMoveEventInfo,this.history),e=null!==this.startEvent,n=function(t,e){const n=dm(t.x,e.x),s=dm(t.y,e.y);return Math.sqrt(n**2+s**2)}(t.offset,{x:0,y:0})>=3;if(!e&&!n)return;const{point:s}=t,{timestamp:i}=Fd;this.history.push({...s,timestamp:i});const{onStart:r,onMove:o}=this.handlers;e||(r&&r(this.lastMoveEvent,t),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,t)},this.handlePointerMove=(t,e)=>{this.lastMoveEvent=t,this.lastMoveEventInfo=fm(e,this.transformPagePoint),Rd.update(this.updatePoint,!0)},this.handlePointerUp=(t,e)=>{this.end();const{onEnd:n,onSessionEnd:s,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const r=gm("pointercancel"===t.type?this.lastMoveEventInfo:fm(e,this.transformPagePoint),this.history);this.startEvent&&n&&n(t,r),s&&s(t,r)},!qd(t))return;this.dragSnapToOrigin=i,this.handlers=e,this.transformPagePoint=n,this.contextWindow=s||window;const r=fm(Ld(t),this.transformPagePoint),{point:o}=r,{timestamp:a}=Fd;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=e;l&&l(t,gm(r,this.history)),this.removeListeners=Wd(zd(this.contextWindow,"pointermove",this.handlePointerMove),zd(this.contextWindow,"pointerup",this.handlePointerUp),zd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Pd(this.updatePoint)}}function fm(t,e){return e?{point:e(t.point)}:t}function mm(t,e){return{x:t.x-e.x,y:t.y-e.y}}function gm({point:t},e){return{point:t,delta:mm(t,vm(e)),offset:mm(t,ym(e)),velocity:_m(e,.1)}}function ym(t){return t[0]}function vm(t){return t[t.length-1]}function _m(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const i=vm(t);for(;n>=0&&(s=t[n],!(i.timestamp-s.timestamp>lp(e)));)n--;if(!s)return{x:0,y:0};const r=up(i.timestamp-s.timestamp);if(0===r)return{x:0,y:0};const o={x:(i.x-s.x)/r,y:(i.y-s.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function xm(t){return t.max-t.min}function bm(t,e=0,n=.01){return Math.abs(t-e)<=n}function wm(t,e,n,s=.5){t.origin=s,t.originPoint=Ip(e.min,e.max,t.origin),t.scale=xm(n)/xm(e),(bm(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Ip(n.min,n.max,t.origin)-t.originPoint,(bm(t.translate)||isNaN(t.translate))&&(t.translate=0)}function km(t,e,n,s){wm(t.x,e.x,n.x,s?s.originX:void 0),wm(t.y,e.y,n.y,s?s.originY:void 0)}function Sm(t,e,n){t.min=n.min+e.min,t.max=t.min+xm(e)}function Tm(t,e,n){t.min=e.min-n.min,t.max=t.min+xm(e)}function Cm(t,e,n){Tm(t.x,e.x,n.x),Tm(t.y,e.y,n.y)}function Am(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function Em(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}const Dm=.35;function Mm(t,e,n){return{min:Om(t,e),max:Om(t,n)}}function Om(t,e){return"number"==typeof t?t:t[e]||0}const Rm=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Pm(t){return[t("x"),t("y")]}function Fm({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function Nm(t){return void 0===t||1===t}function Vm({scale:t,scaleX:e,scaleY:n}){return!Nm(t)||!Nm(e)||!Nm(n)}function Im(t){return Vm(t)||jm(t)||t.z||t.rotate||t.rotateX||t.rotateY}function jm(t){return qm(t.x)||qm(t.y)}function qm(t){return t&&"0%"!==t}function Lm(t,e,n){return n+e*(t-n)}function zm(t,e,n,s,i){return void 0!==i&&(t=Lm(t,i,s)),Lm(t,n,s)+e}function Bm(t,e=0,n=1,s,i){t.min=zm(t.min,e,n,s,i),t.max=zm(t.max,e,n,s,i)}function Wm(t,{x:e,y:n}){Bm(t.x,e.translate,e.scale,e.originPoint),Bm(t.y,n.translate,n.scale,n.originPoint)}function Um(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function $m(t,e){t.min=t.min+e,t.max=t.max+e}function Gm(t,e,[n,s,i]){const r=void 0!==e[i]?e[i]:.5,o=Ip(t.min,t.max,r);Bm(t,e[n],e[s],o,e.scale)}const Hm=["x","scaleX","originX"],Qm=["y","scaleY","originY"];function Ym(t,e){Gm(t.x,e,Hm),Gm(t.y,e,Qm)}function Xm(t,e){return Fm(function(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}(t.getBoundingClientRect(),e))}const Zm=({current:t})=>t?t.ownerDocument.defaultView:null,Km=new WeakMap;class Jm{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:s}=this.getProps();this.panSession=new pm(t,{onSessionStart:t=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Ld(t,"page").point)},onStart:(t,e)=>{const{drag:n,dragPropagation:s,onDragStart:i}=this.getProps();if(n&&!s&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Hd(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pm(t=>{let e=this.getAxisMotionValue(t).get()||0;if(Xh.test(e)){const{projection:n}=this.visualElement;if(n&&n.layout){const s=n.layout.layoutBox[t];s&&(e=xm(s)*(parseFloat(e)/100))}}this.originPoint[t]=e}),i&&Rd.update(()=>i(t,e),!1,!0);const{animationState:r}=this.visualElement;r&&r.setActive("whileDrag",!0)},onMove:(t,e)=>{const{dragPropagation:n,dragDirectionLock:s,onDirectionLock:i,onDrag:r}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:o}=e;if(s&&null===this.currentDirection)return this.currentDirection=function(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}(o),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",e.point,o),this.updateAxis("y",e.point,o),this.visualElement.render(),r&&r(t,e)},onSessionEnd:(t,e)=>this.stop(t,e),resumeAnimation:()=>Pm(t=>{var e;return"paused"===this.getAnimationState(t)&&(null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:s,contextWindow:Zm(this.visualElement)})}stop(t,e){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=e;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Rd.update(()=>i(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:s}=this.getProps();if(!n||!tg(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let r=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(r=function(t,{min:e,max:n},s){return void 0!==e&&t<e?t=s?Ip(e,t,s.min):Math.max(t,e):void 0!==n&&t>n&&(t=s?Ip(n,t,s.max):Math.min(t,n)),t}(r,this.constraints[t],this.elastic[t])),i.set(r)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(t=this.visualElement.projection)||void 0===t?void 0:t.layout,i=this.constraints;e&&ch(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!s)&&function(t,{top:e,left:n,bottom:s,right:i}){return{x:Am(t.x,n,i),y:Am(t.y,e,s)}}(s.layoutBox,e),this.elastic=function(t=Dm){return!1===t?t=0:!0===t&&(t=Dm),{x:Mm(t,"left","right"),y:Mm(t,"top","bottom")}}(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Pm(t=>{this.getAxisMotionValue(t)&&(this.constraints[t]=function(t,e){const n={};return void 0!==e.min&&(n.min=e.min-t.min),void 0!==e.max&&(n.max=e.max-t.min),n}(s.layoutBox[t],this.constraints[t]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!ch(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=function(t,e,n){const s=Xm(t,n),{scroll:i}=e;return i&&($m(s.x,i.offset.x),$m(s.y,i.offset.y)),s}(n,s.root,this.visualElement.getTransformPagePoint());let r=function(t,e){return{x:Em(t.x,e.x),y:Em(t.y,e.y)}}(s.layout.layoutBox,i);if(e){const t=e(function({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}(r));this.hasMutatedConstraints=!!t,t&&(r=Fm(t))}return r}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:r,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{},l=Pm(o=>{if(!tg(o,e,this.currentDirection))return;let l=a&&a[o]||{};r&&(l={min:0,max:0});const u=s?200:1e6,c=s?40:1e7,h={type:"inertia",velocity:n?t[o]:0,bounceStiffness:u,bounceDamping:c,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(o,h)});return Promise.all(l).then(o)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return n.start(jf(t,n,0,e))}stopAnimation(){Pm(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Pm(t=>{var e;return null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.pause()})}getAnimationState(t){var e;return null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.state}getAxisMotionValue(t){const e="_drag"+t.toUpperCase(),n=this.visualElement.getProps();return n[e]||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Pm(e=>{const{drag:n}=this.getProps();if(!tg(e,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(e);if(s&&s.layout){const{min:n,max:r}=s.layout.layoutBox[e];i.set(t[e]-Ip(n,r,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!ch(e)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Pm(t=>{const e=this.getAxisMotionValue(t);if(e){const n=e.get();s[t]=function(t,e){let n=.5;const s=xm(t),i=xm(e);return i>s?n=sf(e.min,e.max-s,t.min):s>i&&(n=sf(t.min,t.max-i,e.min)),qh(0,1,n)}({min:n,max:n},this.constraints[t])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Pm(e=>{if(!tg(e,t,null))return;const n=this.getAxisMotionValue(e),{min:i,max:r}=this.constraints[e];n.set(Ip(i,r,s[e]))})}addListeners(){if(!this.visualElement.current)return;Km.set(this.visualElement,this);const t=zd(this.visualElement.current,"pointerdown",t=>{const{drag:e,dragListener:n=!0}=this.getProps();e&&n&&this.start(t)}),e=()=>{const{dragConstraints:t}=this.getProps();ch(t)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,s=n.addEventListener("measure",e);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),e();const i=jd(window,"resize",()=>this.scalePositionWithinConstraints()),r=n.addEventListener("didUpdate",({delta:t,hasLayoutChanged:e})=>{this.isDragging&&e&&(Pm(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{i(),t(),s(),r&&r()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:r=Dm,dragMomentum:o=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:r,dragMomentum:o}}}function tg(t,e,n){return!(!0!==e&&e!==t||null!==n&&n!==t)}const eg=t=>(e,n)=>{t&&Rd.update(()=>t(e,n))},ng={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sg(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ig={correct:(t,e)=>{if(!e.target)return t;if("string"==typeof t){if(!Zh.test(t))return t;t=parseFloat(t)}return`${sg(t,e.target.x)}% ${sg(t,e.target.y)}%`}},rg={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,i=Zp.parse(t);if(i.length>5)return s;const r=Zp.createTransformer(t),o="number"!=typeof i[0]?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=Ip(a,l,.5);return"number"==typeof i[2+o]&&(i[2+o]/=u),"number"==typeof i[3+o]&&(i[3+o]/=u),r(i)}};class og extends L.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;var r;r=lg,Object.assign(Eh,r),i&&(e.group&&e.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ng.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:s,isPresent:i}=this.props,r=n.projection;return r?(r.isPresent=i,s||t.layoutDependency!==e||void 0===e?r.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?r.promote():r.relegate()||Rd.postRender(()=>{const t=r.getStack();t&&t.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ag(t){const[e,n]=function(){const t=q.useContext(ih);if(null===t)return[!0,null];const{isPresent:e,onExitComplete:n,register:s}=t,i=q.useId();return q.useEffect(()=>s(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}(),s=q.useContext(xh);return L.createElement(og,{...t,layoutGroup:s,switchLayoutGroup:q.useContext(bh),isPresent:e,safeToRemove:n})}const lg={borderRadius:{...ig,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ig,borderTopRightRadius:ig,borderBottomLeftRadius:ig,borderBottomRightRadius:ig,boxShadow:rg},ug=["TopLeft","TopRight","BottomLeft","BottomRight"],cg=ug.length,hg=t=>"string"==typeof t?parseFloat(t):t,dg=t=>"number"==typeof t||Zh.test(t);function pg(t,e){return void 0!==t[e]?t[e]:t.borderRadius}const fg=gg(0,.5,kp),mg=gg(.5,.95,Dd);function gg(t,e,n){return s=>s<t?0:s>e?1:n(sf(t,e,s))}function yg(t,e){t.min=e.min,t.max=e.max}function vg(t,e){yg(t.x,e.x),yg(t.y,e.y)}function _g(t,e,n,s,i){return t=Lm(t-=e,1/n,s),void 0!==i&&(t=Lm(t,1/i,s)),t}function xg(t,e,[n,s,i],r,o){!function(t,e=0,n=1,s=.5,i,r=t,o=t){if(Xh.test(e)&&(e=parseFloat(e),e=Ip(o.min,o.max,e/100)-o.min),"number"!=typeof e)return;let a=Ip(r.min,r.max,s);t===r&&(a-=e),t.min=_g(t.min,e,n,a,i),t.max=_g(t.max,e,n,a,i)}(t,e[n],e[s],e[i],e.scale,r,o)}const bg=["x","scaleX","originX"],wg=["y","scaleY","originY"];function kg(t,e,n,s){xg(t.x,e,bg,n?n.x:void 0,s?s.x:void 0),xg(t.y,e,wg,n?n.y:void 0,s?s.y:void 0)}function Sg(t){return 0===t.translate&&1===t.scale}function Tg(t){return Sg(t.x)&&Sg(t.y)}function Cg(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Ag(t){return xm(t.x)/xm(t.y)}class Eg{constructor(){this.members=[]}add(t){zf(this.members,t),t.scheduleRender()}remove(t){if(Bf(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(t){const e=this.members.findIndex(e=>t===e);if(0===e)return!1;let n;for(let s=e;s>=0;s--){const t=this.members[s];if(!1!==t.isPresent){n=t;break}}return!!n&&(this.promote(n),!0)}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;!1===s&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Dg(t,e,n){let s="";const i=t.x.translate/e.x,r=t.y.translate/e.y;if((i||r)&&(s=`translate3d(${i}px, ${r}px, 0) `),1===e.x&&1===e.y||(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:t,rotateX:e,rotateY:i}=n;t&&(s+=`rotate(${t}deg) `),e&&(s+=`rotateX(${e}deg) `),i&&(s+=`rotateY(${i}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return 1===o&&1===a||(s+=`scale(${o}, ${a})`),s||"none"}const Mg=(t,e)=>t.depth-e.depth;class Og{constructor(){this.children=[],this.isDirty=!1}add(t){zf(this.children,t),this.isDirty=!0}remove(t){Bf(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Mg),this.isDirty=!1,this.children.forEach(t)}}const Rg=["","X","Y","Z"],Pg={visibility:"hidden"};let Fg=0;const Ng={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Vg({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(t={},n=(null==e?void 0:e())){this.id=Fg++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{var t;this.projectionUpdateScheduled=!1,Ng.totalNodes=Ng.resolvedTargetDeltas=Ng.recalculatedProjection=0,this.nodes.forEach(qg),this.nodes.forEach(Gg),this.nodes.forEach(Hg),this.nodes.forEach(Lg),t=Ng,window.MotionDebug&&window.MotionDebug.record(t)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=t,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new Og)}addEventListener(t,e){return this.eventHandlers.has(t)||this.eventHandlers.set(t,new Wf),this.eventHandlers.get(t).add(e)}notifyListeners(t,...e){const n=this.eventHandlers.get(t);n&&n.notify(...e)}hasListeners(t){return this.eventHandlers.has(t)}mount(e,n=this.root.hasTreeAnimated){if(this.instance)return;var s;this.isSVG=(s=e)instanceof SVGElement&&"svg"!==s.tagName,this.instance=e;const{layoutId:i,layout:r,visualElement:o}=this.options;if(o&&!o.current&&o.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(r||i)&&(this.isLayoutDirty=!0),t){let n;const s=()=>this.root.updateBlockedByResize=!1;t(e,()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(t){const e=performance.now(),n=({timestamp:s})=>{const i=s-e;i>=250&&(Pd(n),t(i-250))};return Rd.read(n,!0),()=>Pd(n)}(s),ng.hasAnimatedSinceResize&&(ng.hasAnimatedSinceResize=!1,this.nodes.forEach($g))})}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&o&&(i||r)&&this.addEventListener("didUpdate",({delta:t,hasLayoutChanged:e,hasRelativeTargetChanged:n,layout:s})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||o.getDefaultTransition()||Jg,{onLayoutAnimationStart:r,onLayoutAnimationComplete:a}=o.getProps(),l=!this.targetLayout||!Cg(this.targetLayout,s)||n,u=!e&&n;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||e&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,u);const e={...If(i,"layout"),onPlay:r,onComplete:a};(o.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else e||$g(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=s})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const t=this.getStack();t&&t.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Pd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Qg),this.animationId++)}getTransformTemplate(){const{visualElement:t}=this.options;return t&&t.getProps().transformTemplate}willUpdate(t=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const t=this.path[i];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}const{layoutId:e,layout:n}=this.options;if(void 0===e&&!n)return;const s=this.getTransformTemplate();this.prevTransformTemplateValue=s?s(this.latestValues,""):void 0,this.updateSnapshot(),t&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Bg);this.isUpdating||this.nodes.forEach(Wg),this.isUpdating=!1,this.nodes.forEach(Ug),this.nodes.forEach(Ig),this.nodes.forEach(jg),this.clearAllSnapshots();const t=performance.now();Fd.delta=qh(0,1e3/60,t-Fd.timestamp),Fd.timestamp=t,Fd.isProcessing=!0,Nd.update.process(Fd),Nd.preRender.process(Fd),Nd.render.process(Fd),Fd.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(zg),this.sharedNodes.forEach(Yg)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Rd.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Rd.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++)this.path[n].updateScroll();const t=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:e}=this.options;e&&e.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}updateScroll(t="measure"){let e=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===t&&(e=!1),e&&(this.scroll={animationId:this.root.animationId,phase:t,isRoot:s(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const t=this.isLayoutDirty||this.shouldResetTransform,e=this.projectionDelta&&!Tg(this.projectionDelta),n=this.getTransformTemplate(),s=n?n(this.latestValues,""):void 0,r=s!==this.prevTransformTemplateValue;t&&(e||Im(this.latestValues)||r)&&(i(this.instance,s),this.shouldResetTransform=!1,this.scheduleRender())}measure(t=!0){const e=this.measurePageBox();let n=this.removeElementScroll(e);var s;return t&&(n=this.removeTransform(n)),ny((s=n).x),ny(s.y),{animationId:this.root.animationId,measuredBox:e,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const e=t.measureViewportBox(),{scroll:n}=this.root;return n&&($m(e.x,n.offset.x),$m(e.y,n.offset.y)),e}removeElementScroll(t){const e={x:{min:0,max:0},y:{min:0,max:0}};vg(e,t);for(let n=0;n<this.path.length;n++){const s=this.path[n],{scroll:i,options:r}=s;if(s!==this.root&&i&&r.layoutScroll){if(i.isRoot){vg(e,t);const{scroll:n}=this.root;n&&($m(e.x,-n.offset.x),$m(e.y,-n.offset.y))}$m(e.x,i.offset.x),$m(e.y,i.offset.y)}}return e}applyTransform(t,e=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};vg(n,t);for(let s=0;s<this.path.length;s++){const t=this.path[s];!e&&t.options.layoutScroll&&t.scroll&&t!==t.root&&Ym(n,{x:-t.scroll.offset.x,y:-t.scroll.offset.y}),Im(t.latestValues)&&Ym(n,t.latestValues)}return Im(this.latestValues)&&Ym(n,this.latestValues),n}removeTransform(t){const e={x:{min:0,max:0},y:{min:0,max:0}};vg(e,t);for(let n=0;n<this.path.length;n++){const t=this.path[n];if(!t.instance)continue;if(!Im(t.latestValues))continue;Vm(t.latestValues)&&t.updateSnapshot();const s=Rm();vg(s,t.measurePageBox()),kg(e,t.latestValues,t.snapshot?t.snapshot.layoutBox:void 0,s)}return Im(this.latestValues)&&kg(e,this.latestValues),e}setTargetDelta(t){this.targetDelta=t,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(t){this.options={...this.options,...t,crossfade:void 0===t.crossfade||t.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Fd.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(t=!1){var e;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const s=Boolean(this.resumingFrom)||this!==n;if(!(t||s&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:i,layoutId:r}=this.options;if(this.layout&&(i||r)){if(this.resolvedRelativeTargetAt=Fd.timestamp,!this.targetDelta&&!this.relativeTarget){const t=this.getClosestProjectingParent();t&&t.layout&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Cm(this.relativeTargetOrigin,this.layout.layoutBox,t.layout.layoutBox),vg(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var o,a,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,a=this.relativeTarget,l=this.relativeParent.target,Sm(o.x,a.x,l.x),Sm(o.y,a.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):vg(this.target,this.layout.layoutBox),Wm(this.target,this.targetDelta)):vg(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const t=this.getClosestProjectingParent();t&&Boolean(t.resumingFrom)===Boolean(this.resumingFrom)&&!t.options.layoutScroll&&t.target&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Cm(this.relativeTargetOrigin,this.target,t.target),vg(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ng.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Vm(this.parent.latestValues)&&!jm(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var t;const e=this.getLead(),n=Boolean(this.resumingFrom)||this!==e;let s=!0;if((this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty))&&(s=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(s=!1),this.resolvedRelativeTargetAt===Fd.timestamp&&(s=!1),s)return;const{layout:i,layoutId:r}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!r)return;vg(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,a=this.treeScale.y;!function(t,e,n,s=!1){const i=n.length;if(!i)return;let r,o;e.x=e.y=1;for(let a=0;a<i;a++){r=n[a],o=r.projectionDelta;const i=r.instance;i&&i.style&&"contents"===i.style.display||(s&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Ym(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Wm(t,o)),s&&Im(r.latestValues)&&Ym(t,r.latestValues))}e.x=Um(e.x),e.y=Um(e.y)}(this.layoutCorrected,this.treeScale,this.path,n),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox);const{target:l}=e;if(!l)return void(this.projectionTransform&&(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const u=this.projectionTransform;km(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=Dg(this.projectionDelta,this.treeScale),this.projectionTransform===u&&this.treeScale.x===o&&this.treeScale.y===a||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Ng.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(t=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),t){const t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(t,e=!1){const n=this.snapshot,s=n?n.latestValues:{},i={...this.latestValues},r={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!e;const o={x:{min:0,max:0},y:{min:0,max:0}},a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),u=!l||l.members.length<=1,c=Boolean(a&&!u&&!0===this.options.crossfade&&!this.path.some(Kg));let h;this.animationProgress=0,this.mixTargetDelta=e=>{const n=e/1e3;Xg(r.x,t.x,n),Xg(r.y,t.y,n),this.setTargetDelta(r),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Cm(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(t,e,n,s){Zg(t.x,e.x,n.x,s),Zg(t.y,e.y,n.y,s)}(this.relativeTarget,this.relativeTargetOrigin,o,n),h&&function(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}(this.relativeTarget,h)&&(this.isProjectionDirty=!1),h||(h={x:{min:0,max:0},y:{min:0,max:0}}),vg(h,this.relativeTarget)),a&&(this.animationValues=i,function(t,e,n,s,i,r){i?(t.opacity=Ip(0,void 0!==n.opacity?n.opacity:1,fg(s)),t.opacityExit=Ip(void 0!==e.opacity?e.opacity:1,0,mg(s))):r&&(t.opacity=Ip(void 0!==e.opacity?e.opacity:1,void 0!==n.opacity?n.opacity:1,s));for(let o=0;o<cg;o++){const i=`border${ug[o]}Radius`;let r=pg(e,i),a=pg(n,i);void 0===r&&void 0===a||(r||(r=0),a||(a=0),0===r||0===a||dg(r)===dg(a)?(t[i]=Math.max(Ip(hg(r),hg(a),s),0),(Xh.test(a)||Xh.test(r))&&(t[i]+="%")):t[i]=a)}(e.rotate||n.rotate)&&(t.rotate=Ip(e.rotate||0,n.rotate||0,s))}(i,s,this.latestValues,n,c,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(t){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Pd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Rd.update(()=>{ng.hasAnimatedSinceResize=!0,this.currentAnimation=function(t,e,n){const s=Rh(0)?0:Gf(0);return s.start(jf("",s,1e3,n)),s.animation}(0,0,{...t,onUpdate:e=>{this.mixTargetDelta(e),t.onUpdate&&t.onUpdate(e)},onComplete:()=>{t.onComplete&&t.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const t=this.getStack();t&&t.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const t=this.getLead();let{targetWithTransforms:e,target:n,layout:s,latestValues:i}=t;if(e&&n&&s){if(this!==t&&this.layout&&s&&sy(this.options.animationType,this.layout.layoutBox,s.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const e=xm(this.layout.layoutBox.x);n.x.min=t.target.x.min,n.x.max=n.x.min+e;const s=xm(this.layout.layoutBox.y);n.y.min=t.target.y.min,n.y.max=n.y.min+s}vg(e,n),Ym(e,i),km(this.projectionDeltaWithTransform,this.layoutCorrected,e,i)}}registerSharedNode(t,e){this.sharedNodes.has(t)||this.sharedNodes.set(t,new Eg),this.sharedNodes.get(t).add(e);const n=e.options.initialPromotionConfig;e.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(e):void 0})}isLead(){const t=this.getStack();return!t||t.lead===this}getLead(){var t;const{layoutId:e}=this.options;return e&&(null===(t=this.getStack())||void 0===t?void 0:t.lead)||this}getPrevLead(){var t;const{layoutId:e}=this.options;return e?null===(t=this.getStack())||void 0===t?void 0:t.prevLead:void 0}getStack(){const{layoutId:t}=this.options;if(t)return this.root.sharedNodes.get(t)}promote({needsReset:t,transition:e,preserveFollowOpacity:n}={}){const s=this.getStack();s&&s.promote(this,n),t&&(this.projectionDelta=void 0,this.needsReset=!0),e&&this.setOptions({transition:e})}relegate(){const t=this.getStack();return!!t&&t.relegate(this)}resetRotation(){const{visualElement:t}=this.options;if(!t)return;let e=!1;const{latestValues:n}=t;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(e=!0),!e)return;const s={};for(let i=0;i<Rg.length;i++){const e="rotate"+Rg[i];n[e]&&(s[e]=n[e],t.setStaticValue(e,0))}t.render();for(const i in s)t.setStaticValue(i,s[i]);t.scheduleRender()}getProjectionStyles(t){var e,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Pg;const s={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,s.opacity="",s.pointerEvents=Cd(null==t?void 0:t.pointerEvents)||"",s.transform=i?i(this.latestValues,""):"none",s;const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target){const e={};return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=Cd(null==t?void 0:t.pointerEvents)||""),this.hasProjected&&!Im(this.latestValues)&&(e.transform=i?i({},""):"none",this.hasProjected=!1),e}const o=r.animationValues||r.latestValues;this.applyTransformsToTarget(),s.transform=Dg(this.projectionDeltaWithTransform,this.treeScale,o),i&&(s.transform=i(o,s.transform));const{x:a,y:l}=this.projectionDelta;s.transformOrigin=`${100*a.origin}% ${100*l.origin}% 0`,r.animationValues?s.opacity=r===this?null!==(n=null!==(e=o.opacity)&&void 0!==e?e:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:s.opacity=r===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0;for(const u in Eh){if(void 0===o[u])continue;const{correct:t,applyTo:e}=Eh[u],n="none"===s.transform?o[u]:t(o[u],r);if(e){const t=e.length;for(let i=0;i<t;i++)s[e[i]]=n}else s[u]=n}return this.options.layoutId&&(s.pointerEvents=r===this?Cd(null==t?void 0:t.pointerEvents)||"":"none"),s}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(t=>{var e;return null===(e=t.currentAnimation)||void 0===e?void 0:e.stop()}),this.root.nodes.forEach(Bg),this.root.sharedNodes.clear()}}}function Ig(t){t.updateLayout()}function jg(t){var e;const n=(null===(e=t.resumeFrom)||void 0===e?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:s}=t.layout,{animationType:i}=t.options,r=n.source!==t.layout.source;"size"===i?Pm(t=>{const s=r?n.measuredBox[t]:n.layoutBox[t],i=xm(s);s.min=e[t].min,s.max=s.min+i}):sy(i,n.layoutBox,e)&&Pm(s=>{const i=r?n.measuredBox[s]:n.layoutBox[s],o=xm(e[s]);i.max=i.min+o,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[s].max=t.relativeTarget[s].min+o)});const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};km(o,e,n.layoutBox);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};r?km(a,t.applyTransform(s,!0),n.measuredBox):km(a,e,n.layoutBox);const l=!Tg(o);let u=!1;if(!t.resumeFrom){const s=t.getClosestProjectingParent();if(s&&!s.resumeFrom){const{snapshot:i,layout:r}=s;if(i&&r){const o={x:{min:0,max:0},y:{min:0,max:0}};Cm(o,n.layoutBox,i.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};Cm(a,e,r.layoutBox),Cg(o,a)||(u=!0),s.options.layoutRoot&&(t.relativeTarget=a,t.relativeTargetOrigin=o,t.relativeParent=s)}}}t.notifyListeners("didUpdate",{layout:e,snapshot:n,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:e}=t.options;e&&e()}t.options.transition=void 0}function qg(t){Ng.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=Boolean(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Lg(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function zg(t){t.clearSnapshot()}function Bg(t){t.clearMeasurements()}function Wg(t){t.isLayoutDirty=!1}function Ug(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function $g(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Gg(t){t.resolveTargetDelta()}function Hg(t){t.calcProjection()}function Qg(t){t.resetRotation()}function Yg(t){t.removeLeadSnapshot()}function Xg(t,e,n){t.translate=Ip(e.translate,0,n),t.scale=Ip(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Zg(t,e,n,s){t.min=Ip(e.min,n.min,s),t.max=Ip(e.max,n.max,s)}function Kg(t){return t.animationValues&&void 0!==t.animationValues.opacityExit}const Jg={duration:.45,ease:[.4,0,.1,1]},ty=t=>"undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().includes(t),ey=ty("applewebkit/")&&!ty("chrome/")?Math.round:Dd;function ny(t){t.min=ey(t.min),t.max=ey(t.max)}function sy(t,e,n){return"position"===t||"preserve-aspect"===t&&!bm(Ag(e),Ag(n),.2)}const iy=Vg({attachResizeListener:(t,e)=>jd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ry={current:void 0},oy=Vg({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ry.current){const t=new iy({});t.mount(window),t.setOptions({layoutScroll:!0}),ry.current=t}return ry.current},resetTransform:(t,e)=>{t.style.transform=void 0!==e?e:"none"},checkIsScrollRoot:t=>Boolean("fixed"===window.getComputedStyle(t).position)}),ay={pan:{Feature:class extends Yd{constructor(){super(...arguments),this.removePointerDownListener=Dd}onPointerDown(t){this.session=new pm(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Zm(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:eg(t),onStart:eg(e),onMove:n,onEnd:(t,e)=>{delete this.session,s&&Rd.update(()=>s(t,e))}}}mount(){this.removePointerDownListener=zd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Yd{constructor(t){super(t),this.removeGroupControls=Dd,this.removeListeners=Dd,this.controls=new Jm(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Dd}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:oy,MeasureLayout:ag}},ly=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function uy(t,e,n=1){const[s,i]=function(t){const e=ly.exec(t);if(!e)return[,];const[,n,s]=e;return[n,s]}(t);if(!s)return;const r=window.getComputedStyle(e).getPropertyValue(s);if(r){const t=r.trim();return Lf(t)?parseFloat(t):t}return Ih(i)?uy(i,e,n+1):i}const cy=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),hy=t=>cy.has(t),dy=t=>t===Lh||t===Zh,py=(t,e)=>parseFloat(t.split(", ")[e]),fy=(t,e)=>(n,{transform:s})=>{if("none"===s||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/);if(i)return py(i[1],e);{const e=s.match(/^matrix\((.+)\)$/);return e?py(e[1],t):0}},my=new Set(["x","y","z"]),gy=Dh.filter(t=>!my.has(t)),yy={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:fy(4,13),y:fy(5,14)};yy.translateX=yy.x,yy.translateY=yy.y;function vy(t,e,n,s){return(t=>Object.keys(t).some(hy))(e)?((t,e,n={},s={})=>{e={...e},s={...s};const i=Object.keys(e).filter(hy);let r=[],o=!1;const a=[];if(i.forEach(i=>{const l=t.getValue(i);if(!t.hasValue(i))return;let u=n[i],c=Yf(u);const h=e[i];let d;if(Sd(h)){const t=h.length,e=null===h[0]?1:0;u=h[e],c=Yf(u);for(let n=e;n<t&&null!==h[n];n++)d?ap(Yf(h[n])===d):d=Yf(h[n])}else d=Yf(h);if(c!==d)if(dy(c)&&dy(d)){const t=l.get();"string"==typeof t&&l.set(parseFloat(t)),"string"==typeof h?e[i]=parseFloat(h):Array.isArray(h)&&d===Zh&&(e[i]=h.map(parseFloat))}else(null==c?void 0:c.transform)&&(null==d?void 0:d.transform)&&(0===u||0===h)?0===u?l.set(d.transform(u)):e[i]=c.transform(h):(o||(r=function(t){const e=[];return gy.forEach(n=>{const s=t.getValue(n);void 0!==s&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}(t),o=!0),a.push(i),s[i]=void 0!==s[i]?s[i]:e[i],l.jump(h))}),a.length){const n=a.indexOf("height")>=0?window.pageYOffset:null,i=((t,e,n)=>{const s=e.measureViewportBox(),i=e.current,r=getComputedStyle(i),{display:o}=r,a={};"none"===o&&e.setStaticValue("display",t.display||"block"),n.forEach(t=>{a[t]=yy[t](s,r)}),e.render();const l=e.measureViewportBox();return n.forEach(n=>{const s=e.getValue(n);s&&s.jump(a[n]),t[n]=yy[n](l,r)}),t})(e,t,a);return r.length&&r.forEach(([e,n])=>{t.getValue(e).set(n)}),t.render(),rh&&null!==n&&window.scrollTo({top:n}),{target:i,transitionEnd:s}}return{target:e,transitionEnd:s}})(t,e,n,s):{target:e,transitionEnd:s}}const _y={current:null},xy={current:!1},by=new WeakMap,wy=Object.keys(_h),ky=wy.length,Sy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Ty=fh.length;class Cy{constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:s,visualState:i},r={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Rd.render(this.render,!1,!0);const{latestValues:o,renderState:a}=i;this.latestValues=o,this.baseTarget={...o},this.initialValues=e.initial?{...o}:{},this.renderState=a,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=r,this.isControllingVariants=mh(e),this.isVariantNode=gh(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:l,...u}=this.scrapeMotionValuesFromProps(e,{});for(const c in u){const t=u[c];void 0!==o[c]&&Rh(t)&&(t.set(o[c],!1),qf(l)&&l.add(c))}}scrapeMotionValuesFromProps(t,e){return{}}mount(t){this.current=t,by.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,e)=>this.bindToMotionValue(e,t)),xy.current||function(){if(xy.current=!0,rh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>_y.current=t.matches;t.addListener(e),e()}else _y.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||_y.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){by.delete(this.current),this.projection&&this.projection.unmount(),Pd(this.notifyUpdate),Pd(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,e){const n=Mh.has(t),s=e.on("change",e=>{this.latestValues[t]=e,this.props.onUpdate&&Rd.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=e.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return this.current&&this.sortInstanceNodePosition&&this.type===t.type?this.sortInstanceNodePosition(this.current,t.current):0}loadFeatures({children:t,...e},n,s,i){let r,o;for(let a=0;a<ky;a++){const t=wy[a],{isEnabled:n,Feature:s,ProjectionNode:i,MeasureLayout:l}=_h[t];i&&(r=i),n(e)&&(!this.features[t]&&s&&(this.features[t]=new s(this)),l&&(o=l))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&r){this.projection=new r(this.latestValues,this.parent&&this.parent.projection);const{layoutId:t,layout:n,drag:s,dragConstraints:o,layoutScroll:a,layoutRoot:l}=e;this.projection.setOptions({layoutId:t,layout:n,alwaysMeasureLayout:Boolean(s)||o&&ch(o),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"==typeof n?n:"both",initialPromotionConfig:i,layoutScroll:a,layoutRoot:l})}return o}updateFeatures(){for(const t in this.features){const e=this.features[t];e.isMounted?e.update():(e.mount(),e.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}makeTargetAnimatable(t,e=!0){return this.makeTargetAnimatableFromInstance(t,this.props,e)}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<Sy.length;n++){const e=Sy[n];this.propEventSubscriptions[e]&&(this.propEventSubscriptions[e](),delete this.propEventSubscriptions[e]);const s=t["on"+e];s&&(this.propEventSubscriptions[e]=this.on(e,s))}this.prevMotionValues=function(t,e,n){const{willChange:s}=e;for(const i in e){const r=e[i],o=n[i];if(Rh(r))t.addValue(i,r),qf(s)&&s.add(i);else if(Rh(o))t.addValue(i,Gf(r,{owner:t})),qf(s)&&s.remove(i);else if(o!==r)if(t.hasValue(i)){const e=t.getValue(i);!e.hasAnimated&&e.set(r)}else{const e=t.getStaticValue(i);t.addValue(i,Gf(void 0!==e?e:r,{owner:t}))}}for(const i in n)void 0===e[i]&&t.removeValue(i);return e}(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const t=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(t.initial=this.props.initial),t}const e={};for(let n=0;n<Ty;n++){const t=fh[n],s=this.props[t];(hh(s)||!1===s)&&(e[t]=s)}return e}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){e!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,e)),this.values.set(t,e),this.latestValues[t]=e.get()}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return void 0===n&&void 0!==e&&(n=Gf(e,{owner:this}),this.addValue(t,n)),n}readValue(t){var e;return void 0===this.latestValues[t]&&this.current?null!==(e=this.getBaseTargetFromProps(this.props,t))&&void 0!==e?e:this.readValueFromInstance(this.current,t,this.options):this.latestValues[t]}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:n}=this.props,s="string"==typeof n||"object"==typeof n?null===(e=wd(this.props,n))||void 0===e?void 0:e[t]:void 0;if(n&&void 0!==s)return s;const i=this.getBaseTargetFromProps(this.props,t);return void 0===i||Rh(i)?void 0!==this.initialValues[t]&&void 0===s?void 0:this.baseTarget[t]:i}on(t,e){return this.events[t]||(this.events[t]=new Wf),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class Ay extends Cy{sortInstanceNodePosition(t,e){return 2&t.compareDocumentPosition(e)?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:e,...n},{transformValues:s},i){let r=function(t,e,n){const s={};for(const i in t){const t=Jf(i,e);if(void 0!==t)s[i]=t;else{const t=n.getValue(i);t&&(s[i]=t.get())}}return s}(n,t||{},this);if(s&&(e&&(e=s(e)),n&&(n=s(n)),r&&(r=s(r))),i){!function(t,e,n){var s,i;const r=Object.keys(e).filter(e=>!t.hasValue(e)),o=r.length;if(o)for(let a=0;a<o;a++){const o=r[a],l=e[o];let u=null;Array.isArray(l)&&(u=l[0]),null===u&&(u=null!==(i=null!==(s=n[o])&&void 0!==s?s:t.readValue(o))&&void 0!==i?i:e[o]),null!=u&&("string"==typeof u&&(Lf(u)||Nf(u))?u=parseFloat(u):!Zf(u)&&Zp.test(l)&&(u=Ff(o,l)),t.addValue(o,Gf(u,{owner:t})),void 0===n[o]&&(n[o]=u),null!==u&&t.setBaseTarget(o,u))}}(this,n,r);const t=((t,e,n,s)=>{const i=function(t,{...e},n){const s=t.current;if(!(s instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(t=>{const e=t.get();if(!Ih(e))return;const n=uy(e,s);n&&t.set(n)});for(const i in e){const t=e[i];if(!Ih(t))continue;const r=uy(t,s);r&&(e[i]=r,n||(n={}),void 0===n[i]&&(n[i]=t))}return{target:e,transitionEnd:n}}(t,e,s);return vy(t,e=i.target,n,s=i.transitionEnd)})(this,n,r,e);e=t.transitionEnd,n=t.target}return{transition:t,transitionEnd:e,...n}}}class Ey extends Ay{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,e){if(Mh.has(e)){const t=Pf(e);return t&&t.default||0}{const s=(n=t,window.getComputedStyle(n)),i=(Vh(e)?s.getPropertyValue(e):s[e])||0;return"string"==typeof i?i.trim():i}var n}measureInstanceViewportBox(t,{transformPagePoint:e}){return Xm(t,e)}build(t,e,n,s){sd(t,e,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,e){return xd(t,e)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Rh(t)&&(this.childSubscription=t.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(t,e,n,s){yd(t,e,n,s)}}class Dy extends Ay{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Mh.has(e)){const t=Pf(e);return t&&t.default||0}return e=vd.has(e)?e:lh(e),t.getAttribute(e)}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}scrapeMotionValuesFromProps(t,e){return bd(t,e)}build(t,e,n,s){pd(t,e,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,e,n,s){_d(t,e,0,s)}mount(t){this.isSVGTag=fd(t.tagName),super.mount(t)}}const My=(t,e)=>Ah(t)?new Dy(e,{enableHardwareAcceleration:!1}):new Ey(e,{enableHardwareAcceleration:!0}),Oy={...hm,...ip,...ay,layout:{ProjectionNode:oy,MeasureLayout:ag}},Ry=Th((t,e)=>function(t,{forwardMotionProps:e=!1},n,s){return{...Ah(t)?Vd:Id,preloadedFeatures:n,useRender:gd(e),createVisualElement:s,Component:t}}(t,e,Oy,My));function Py(){const t=q.useRef(!1);return oh(()=>(t.current=!0,()=>{t.current=!1}),[]),t}class Fy extends q.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const t=this.props.sizeRef.current;t.height=e.offsetHeight||0,t.width=e.offsetWidth||0,t.top=e.offsetTop,t.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Ny({children:t,isPresent:e}){const n=q.useId(),s=q.useRef(null),i=q.useRef({width:0,height:0,top:0,left:0});return q.useInsertionEffect(()=>{const{width:t,height:r,top:o,left:a}=i.current;if(e||!s.current||!t||!r)return;s.current.dataset.motionPopId=n;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${t}px !important;\n            height: ${r}px !important;\n            top: ${o}px !important;\n            left: ${a}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}},[e]),q.createElement(Fy,{isPresent:e,childRef:s,sizeRef:i},q.cloneElement(t,{ref:s}))}const Vy=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:r,mode:o})=>{const a=kd(Iy),l=q.useId(),u=q.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:t=>{a.set(t,!0);for(const e of a.values())if(!e)return;s&&s()},register:t=>(a.set(t,!1),()=>a.delete(t))}),r?void 0:[n]);return q.useMemo(()=>{a.forEach((t,e)=>a.set(e,!1))},[n]),q.useEffect(()=>{!n&&!a.size&&s&&s()},[n]),"popLayout"===o&&(t=q.createElement(Ny,{isPresent:n},t)),q.createElement(ih.Provider,{value:u},t)};function Iy(){return new Map}const jy=t=>t.key||"",qy=({children:t,custom:e,initial:n=!0,onExitComplete:s,exitBeforeEnter:i,presenceAffectsLayout:r=!0,mode:o="sync"})=>{const a=q.useContext(xh).forceRender||function(){const t=Py(),[e,n]=q.useState(0),s=q.useCallback(()=>{t.current&&n(e+1)},[e]);return[q.useCallback(()=>Rd.postRender(s),[s]),e]}()[0],l=Py(),u=function(t){const e=[];return q.Children.forEach(t,t=>{q.isValidElement(t)&&e.push(t)}),e}(t);let c=u;const h=q.useRef(new Map).current,d=q.useRef(c),p=q.useRef(new Map).current,f=q.useRef(!0);var m;if(oh(()=>{f.current=!1,function(t,e){t.forEach(t=>{const n=jy(t);e.set(n,t)})}(u,p),d.current=c}),m=()=>{f.current=!0,p.clear(),h.clear()},q.useEffect(()=>()=>m(),[]),f.current)return q.createElement(q.Fragment,null,c.map(t=>q.createElement(Vy,{key:jy(t),isPresent:!0,initial:!!n&&void 0,presenceAffectsLayout:r,mode:o},t)));c=[...c];const g=d.current.map(jy),y=u.map(jy),v=g.length;for(let _=0;_<v;_++){const t=g[_];-1!==y.indexOf(t)||h.has(t)||h.set(t,void 0)}return"wait"===o&&h.size&&(c=[]),h.forEach((t,n)=>{if(-1!==y.indexOf(n))return;const i=p.get(n);if(!i)return;const f=g.indexOf(n);let m=t;if(!m){const t=()=>{h.delete(n);const t=Array.from(p.keys()).filter(t=>!y.includes(t));if(t.forEach(t=>p.delete(t)),d.current=u.filter(e=>{const s=jy(e);return s===n||t.includes(s)}),!h.size){if(!1===l.current)return;a(),s&&s()}};m=q.createElement(Vy,{key:jy(i),isPresent:!1,onExitComplete:t,custom:e,presenceAffectsLayout:r,mode:o},i),h.set(n,m)}c.splice(f,0,m)}),c=c.map(t=>{const e=t.key;return h.has(e)?t:q.createElement(Vy,{key:jy(t),isPresent:!0,presenceAffectsLayout:r,mode:o},t)}),q.createElement(q.Fragment,null,h.size?c:c.map(t=>q.cloneElement(t)))};function Ly({children:t,isValidProp:e,...n}){e&&ud(e),(n={...q.useContext(nh),...n}).isStatic=kd(()=>n.isStatic);const s=q.useMemo(()=>n,[JSON.stringify(n.transition),n.transformPagePoint,n.reducedMotion]);return q.createElement(nh.Provider,{value:s},t)}function zy(t){const e=kd(()=>Gf(t)),{isStatic:n}=q.useContext(nh);if(n){const[,n]=q.useState(t);q.useEffect(()=>e.on("change",n),[])}return e}const By=t=>(t=>t&&"object"==typeof t&&t.mix)(t)?t.mix:void 0;function Wy(t,e){const n=zy(e()),s=()=>n.set(e());return s(),oh(()=>{const e=()=>Rd.update(s,!1,!0),n=t.map(t=>t.on("change",e));return()=>{n.forEach(t=>t()),Pd(s)}}),n}function Uy(t,e,n,s){if("function"==typeof t)return function(t){Uf.current=[],t();const e=Wy(Uf.current,t);return Uf.current=void 0,e}(t);const i="function"==typeof e?e:function(...t){const e=!Array.isArray(t[0]),n=e?0:-1,s=t[0+n],i=t[1+n],r=t[2+n],o=t[3+n],a=of(i,r,{mixer:By(r[0]),...o});return e?a(s):a}(e,n,s);return Array.isArray(t)?$y(t,i):$y([t],([t])=>i(t))}function $y(t,e){const n=kd(()=>[]);return Wy(t,()=>{n.length=0;const s=t.length;for(let e=0;e<s;e++)n[e]=t[e].get();return e(n)})}function Gy(t,e={}){const{isStatic:n}=q.useContext(nh),s=q.useRef(null),i=zy(Rh(t)?t.get():t),r=()=>{s.current&&s.current.stop()};return q.useInsertionEffect(()=>i.attach((t,o)=>{if(n)return o(t);if(r(),s.current=xf({keyframes:[i.get(),t],velocity:i.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...e,onUpdate:o}),!Fd.isProcessing){const t=performance.now()-Fd.timestamp;t<30&&(s.current.time=up(t))}return i.get()},r),[JSON.stringify(e)]),oh(()=>{if(Rh(t))return t.on("change",t=>i.set(parseFloat(t)))},[i]),i}const Hy="14.9.17",Qy=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),Yy=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),Xy=(t,e)=>({startTime:e,type:"setValue",value:t}),Zy=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),Ky=(t,e,{startTime:n,target:s,timeConstant:i})=>s+(e-s)*Math.exp((n-t)/i),Jy=t=>"exponentialRampToValue"===t.type,tv=t=>"linearRampToValue"===t.type,ev=t=>Jy(t)||tv(t),nv=t=>"setValue"===t.type,sv=t=>"setValueCurve"===t.type,iv=(t,e,n,s)=>{const i=t[e];return void 0===i?s:ev(i)||nv(i)?i.value:sv(i)?i.values[i.values.length-1]:Ky(n,iv(t,e-1,i.startTime,s),i)},rv=(t,e,n,s,i)=>void 0===n?[s.insertTime,i]:ev(n)?[n.endTime,n.value]:nv(n)?[n.startTime,n.value]:sv(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,iv(t,e-1,n.startTime,i)],ov=t=>"cancelAndHold"===t.type,av=t=>"cancelScheduledValues"===t.type,lv=t=>ov(t)||av(t)?t.cancelTime:Jy(t)||tv(t)?t.endTime:t.startTime,uv=(t,e,n,{endTime:s,value:i})=>n===i?i:0<n&&0<i||n<0&&i<0?n*(i/n)**((t-e)/(s-e)):0,cv=(t,e,n,{endTime:s,value:i})=>n+(t-e)/(s-e)*(i-n),hv=t=>"setTarget"===t.type;class dv{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const e=lv(t);if(ov(t)||av(t)){const n=this._automationEvents.findIndex(n=>av(t)&&sv(n)?n.startTime+n.duration>=e:lv(n)>=e),s=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),ov(t)){const t=this._automationEvents[this._automationEvents.length-1];if(void 0!==s&&ev(s)){if(void 0!==t&&hv(t))throw new Error("The internal list is malformed.");const n=void 0===t?s.insertTime:sv(t)?t.startTime+t.duration:lv(t),i=void 0===t?this._defaultValue:sv(t)?t.values[t.values.length-1]:t.value,r=Jy(s)?uv(e,n,i,s):cv(e,n,i,s),o=Jy(s)?Qy(r,e,this._currenTime):Yy(r,e,this._currenTime);this._automationEvents.push(o)}if(void 0!==t&&hv(t)&&this._automationEvents.push(Xy(this.getValue(e),e)),void 0!==t&&sv(t)&&t.startTime+t.duration>e){const n=e-t.startTime,s=(t.values.length-1)/t.duration,i=Math.max(2,1+Math.ceil(n*s)),r=n/(i-1)*s,o=t.values.slice(0,i);if(r<1)for(let e=1;e<i;e+=1){const n=r*e%1;o[e]=t.values[e-1]*(1-n)+t.values[e]*n}this._automationEvents[this._automationEvents.length-1]=Zy(o,t.startTime,n)}}}else{const n=this._automationEvents.findIndex(t=>lv(t)>e),s=-1===n?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[n-1];if(void 0!==s&&sv(s)&&lv(s)+s.duration>e)return!1;const i=Jy(t)?Qy(t.value,t.endTime,this._currenTime):tv(t)?Yy(t.value,e,this._currenTime):t;if(-1===n)this._automationEvents.push(i);else{if(sv(t)&&e+t.duration>lv(this._automationEvents[n]))return!1;this._automationEvents.splice(n,0,i)}}return!0}flush(t){const e=this._automationEvents.findIndex(e=>lv(e)>t);if(e>1){const t=this._automationEvents.slice(e-1),n=t[0];hv(n)&&t.unshift(Xy(iv(this._automationEvents,e-2,n.startTime,this._defaultValue),n.startTime)),this._automationEvents=t}}getValue(t){if(0===this._automationEvents.length)return this._defaultValue;const e=this._automationEvents.findIndex(e=>lv(e)>t),n=this._automationEvents[e],s=(-1===e?this._automationEvents.length:e)-1,i=this._automationEvents[s];if(void 0!==i&&hv(i)&&(void 0===n||!ev(n)||n.insertTime>t))return Ky(t,iv(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(void 0!==i&&nv(i)&&(void 0===n||!ev(n)))return i.value;if(void 0!==i&&sv(i)&&(void 0===n||!ev(n)||i.startTime+i.duration>t))return t<i.startTime+i.duration?((t,{duration:e,startTime:n,values:s})=>((t,e)=>{const n=Math.floor(e),s=Math.ceil(e);return n===s?t[n]:(1-(e-n))*t[n]+(1-(s-e))*t[s]})(s,(t-n)/e*(s.length-1)))(t,i):i.values[i.values.length-1];if(void 0!==i&&ev(i)&&(void 0===n||!ev(n)))return i.value;if(void 0!==n&&Jy(n)){const[e,r]=rv(this._automationEvents,s,i,n,this._defaultValue);return uv(t,e,r,n)}if(void 0!==n&&tv(n)){const[e,r]=rv(this._automationEvents,s,i,n,this._defaultValue);return cv(t,e,r,n)}return this._defaultValue}}const pv=new WeakSet,fv=new WeakMap,mv=new WeakMap,gv=new WeakMap,yv=new WeakMap,vv=new WeakMap,_v=new WeakMap,xv=new WeakMap,bv=new WeakMap,wv=new WeakMap,kv={construct:()=>kv},Sv=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Tv=(t,e)=>{const n=[];let s=t.replace(/^[\s]+/,""),i=s.match(Sv);for(;null!==i;){const t=i[1].slice(1,-1),r=i[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,e).toString());n.push(r),s=s.slice(i[0].length).replace(/^[\s]+/,""),i=s.match(Sv)}return[n.join(";"),s]},Cv=t=>{if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Av=t=>{if(!(t=>{try{new new Proxy(t,kv)}catch{return!1}return!0})(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},Ev=(t,e)=>{const n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},Dv=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[s]=n;return t.delete(s),s},Mv=(t,e,n,s)=>{const i=Ev(t,e),r=Dv(i,t=>t[0]===n&&t[1]===s);return 0===i.size&&t.delete(e),r},Ov=t=>Ev(_v,t),Rv=t=>{if(pv.has(t))throw new Error("The AudioNode is already stored.");pv.add(t),Ov(t).forEach(t=>t(!0))},Pv=t=>"port"in t,Fv=t=>{if(!pv.has(t))throw new Error("The AudioNode is not stored.");pv.delete(t),Ov(t).forEach(t=>t(!1))},Nv=(t,e)=>{!Pv(t)&&e.every(t=>0===t.size)&&Fv(t)},Vv={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Iv=(t,e)=>t.context===e,jv=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},qv=()=>new DOMException("","IndexSizeError"),Lv=t=>{var e;t.getChannelData=(e=t.getChannelData,n=>{try{return e.call(t,n)}catch(s){if(12===s.code)throw qv();throw s}})},zv={numberOfChannels:1},Bv=-34028234663852886e22,Wv=-Bv,Uv=t=>pv.has(t),$v={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Gv=t=>Ev(fv,t),Hv=t=>Ev(gv,t),Qv=(t,e)=>{const{activeInputs:n}=Gv(t);n.forEach(n=>n.forEach(([n])=>{e.includes(t)||Qv(n,[...e,t])}));const s=(t=>"playbackRate"in t)(t)?[t.playbackRate]:Pv(t)?Array.from(t.parameters.values()):(t=>"frequency"in t&&"gain"in t)(t)?[t.Q,t.detune,t.frequency,t.gain]:(t=>"offset"in t)(t)?[t.offset]:(t=>!("frequency"in t)&&"gain"in t)(t)?[t.gain]:(t=>"detune"in t&&"frequency"in t&&!("gain"in t))(t)?[t.detune,t.frequency]:(t=>"pan"in t)(t)?[t.pan]:[];for(const i of s){const t=Hv(i);void 0!==t&&t.activeInputs.forEach(([t])=>Qv(t,e))}Uv(t)&&Fv(t)},Yv=t=>{Qv(t.destination,[])},Xv=t=>"context"in t,Zv=t=>Xv(t[0]),Kv=(t,e,n,s)=>{for(const i of t)if(n(i)){if(s)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},Jv=(t,e,[n,s],i)=>{Kv(t,[e,n,s],t=>t[0]===e&&t[1]===n,i)},t_=(t,[e,n,s],i)=>{const r=t.get(e);void 0===r?t.set(e,new Set([[n,s]])):Kv(r,[n,s],t=>t[0]===n,i)},e_=t=>"inputs"in t,n_=(t,e,n,s)=>{if(e_(e)){const i=e.inputs[s];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,s),[e,n,s]},s_=(t,e,n)=>{for(const s of t)if(s[0]===e&&s[1]===n)return t.delete(s),s;return null},i_=(t,e)=>{if(!Ov(t).delete(e))throw new Error("Missing the expected event listener.")},r_=(t,e,n)=>{const s=Ev(t,e),i=Dv(s,t=>t[0]===n);return 0===s.size&&t.delete(e),i},o_=(t,e,n,s)=>{e_(e)?t.disconnect(e.inputs[s],n,0):t.disconnect(e,n,s)},a_=t=>Ev(mv,t),l_=t=>Ev(yv,t),u_=t=>xv.has(t),c_=t=>!pv.has(t),h_=(t,e)=>new Promise(n=>{if(null!==e)n(!0);else{const e=t.createScriptProcessor(256,1,1),s=t.createGain(),i=t.createBuffer(1,2,44100),r=i.getChannelData(0);r[0]=1,r[1]=1;const o=t.createBufferSource();o.buffer=i,o.loop=!0,o.connect(e).connect(t.destination),o.connect(s),o.disconnect(s),e.onaudioprocess=s=>{const i=s.inputBuffer.getChannelData(0);Array.prototype.some.call(i,t=>1===t)?n(!0):n(!1),o.stop(),e.onaudioprocess=null,o.disconnect(e),e.disconnect(t.destination)},o.start()}}),d_=(t,e)=>{const n=new Map;for(const s of t)for(const t of s){const e=n.get(t);n.set(t,void 0===e?1:e+1)}n.forEach((t,n)=>e(n,t))},p_=t=>"context"in t,f_=(t,e,n,s,i)=>{const[r,o]=((t,e,n,s)=>{const{activeInputs:i,passiveInputs:r}=Gv(e),o=s_(i[s],t,n);return null===o?[Mv(r,t,n,s)[2],!1]:[o[2],!0]})(t,n,s,i);if(null!==r&&(i_(t,r),!o||e||u_(t)||o_(a_(t),a_(n),s,i)),Uv(n)){const{activeInputs:t}=Gv(n);Nv(n,t)}},m_=(t,e,n,s)=>{const[i,r]=((t,e,n)=>{const{activeInputs:s,passiveInputs:i}=Hv(e),r=s_(s,t,n);return null===r?[r_(i,t,n)[1],!1]:[r[2],!0]})(t,n,s);null!==i&&(i_(t,i),!r||e||u_(t)||a_(t).disconnect(l_(n),s))};class g_{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((n,s)=>t.call(e,n,s,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const y_={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function v_(t,e,n,s,i){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],s,i);else{const r=t.getChannelData(s);if(0===e[n].byteLength)e[n]=r.slice(i,i+128);else{const t=new Float32Array(r.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(t)}}}const __=(t,e,n,s,i)=>{"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],s,i):0!==e[n].byteLength&&t.getChannelData(s).set(e[n],i)},x_=(t,e)=>{const n=[];for(let s=0;s<t;s+=1){const t=[],i="number"==typeof e?e:e[s];for(let e=0;e<i;e+=1)t.push(new Float32Array(128));n.push(t)}return n},b_=async(t,e,n,s,i,r,o)=>{const a=null===e?128*Math.ceil(t.context.length/128):e.length,l=s.channelCount*s.numberOfInputs,u=i.reduce((t,e)=>t+e,0),c=0===u?null:n.createBuffer(u,a,n.sampleRate);if(void 0===r)throw new Error("Missing the processor constructor.");const h=Gv(t),d=await((t,e)=>{const n=Ev(wv,t),s=a_(e);return Ev(n,s)})(n,t),p=x_(s.numberOfInputs,s.channelCount),f=x_(s.numberOfOutputs,i),m=Array.from(t.parameters.keys()).reduce((t,e)=>({...t,[e]:new Float32Array(128)}),{});for(let y=0;y<a;y+=128){if(s.numberOfInputs>0&&null!==e)for(let t=0;t<s.numberOfInputs;t+=1)for(let n=0;n<s.channelCount;n+=1)v_(e,p[t],n,n,y);void 0!==r.parameterDescriptors&&null!==e&&r.parameterDescriptors.forEach(({name:t},n)=>{v_(e,m,t,l+n,y)});for(let t=0;t<s.numberOfInputs;t+=1)for(let e=0;e<i[t];e+=1)0===f[t][e].byteLength&&(f[t][e]=new Float32Array(128));try{const t=p.map((t,e)=>0===h.activeInputs[e].size?[]:t),e=o(y/n.sampleRate,n.sampleRate,()=>d.process(t,f,m));if(null!==c)for(let n=0,r=0;n<s.numberOfOutputs;n+=1){for(let t=0;t<i[n];t+=1)__(c,f[n],t,r+t,y);r+=i[n]}if(!e)break}catch(g){t.dispatchEvent(new ErrorEvent("processorerror",{colno:g.colno,filename:g.filename,lineno:g.lineno,message:g.message}));break}}return c},w_={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},k_={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},S_={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},T_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},C_={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},A_=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(s=>{const i=()=>{n.onmessage=null,e.close(),n.close(),s()};n.onmessage=()=>i();try{e.postMessage(t,[t])}catch{}finally{i()}})},E_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},D_=(t,e,n)=>{const s=e[n];if(void 0===s)throw t();return s},M_={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},O_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},R_=()=>new DOMException("","InvalidStateError"),P_=()=>new DOMException("","InvalidAccessError"),F_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},N_=(t,e,n,s,i,r,o,a,l,u,c)=>{const h=u.length;let d=a;for(let p=0;p<h;p+=1){let a=n[0]*u[p];for(let e=1;e<i;e+=1){const s=d-e&l-1;a+=n[e]*r[s],a-=t[e]*o[s]}for(let t=i;t<s;t+=1)a+=n[t]*r[d-t&l-1];for(let n=i;n<e;n+=1)a-=t[n]*o[d-n&l-1];r[d]=u[p],o[d]=a,d=d+1&l-1,c[p]=a}return d},V_={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},I_=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return void 0!==n&&(n.catch(()=>{}),!0)}catch{}return!1},j_=(t,e,n)=>{const s=e[n];void 0!==s&&s!==t[n]&&(t[n]=s)},q_=(t,e)=>{j_(t,e,"channelCount"),j_(t,e,"channelCountMode"),j_(t,e,"channelInterpretation")},L_=t=>"function"==typeof t.getFloatTimeDomainData,z_=(t,e,n)=>{const s=e[n];void 0!==s&&s!==t[n].value&&(t[n].value=s)},B_=t=>{var e;t.start=(e=t.start,(n=0,s=0,i)=>{if("number"==typeof i&&i<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,s,i)})},W_=t=>{var e;t.stop=(e=t.stop,(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})},U_=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),$_=(t,e)=>{const n=t.createBiquadFilter();return q_(n,e),z_(n,e,"Q"),z_(n,e,"detune"),z_(n,e,"frequency"),z_(n,e,"gain"),j_(n,e,"type"),n},G_=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return q_(n,e),(t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw R_()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw R_()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw R_()}})})(n),n},H_=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),Q_=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return q_(n,e),z_(n,e,"delayTime"),n},Y_=(t,e)=>{const n=t.createGain();return q_(n,e),z_(n,e,"gain"),n};function X_(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function Z_(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function K_(t,e){let n=[0,0];for(let s=t.length-1;s>=0;s-=1)n=Z_(n,e),n[0]+=t[s];return n}const J_=(t,e,n,s)=>t.createScriptProcessor(e,n,s),tx=()=>new DOMException("","NotSupportedError"),ex={numberOfChannels:1},nx={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},sx={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},ix={disableNormalization:!1},rx={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},ox={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},ax=(t,e,n)=>void 0===t.copyFromChannel?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),lx=t=>{if(null===t)return!1;const e=t.length;return e%2!=0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},ux=(t,e,n,s)=>{let i=t;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:r,set:o}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(r),set:s(o)})},cx=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(s){if(9!==s.code)throw s;cx(t,e,n+1e-7)}},hx=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},dx=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},px=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},fx=()=>{try{new DOMException}catch{return!1}return!0},mx=()=>new Promise(t=>{const e=new ArrayBuffer(0),{port1:n,port2:s}=new MessageChannel;n.onmessage=({data:e})=>t(null!==e),s.postMessage(e,[e])}),gx=(t,e)=>{const n=e.createGain();t.connect(n);const s=(e=>()=>{e.call(t,n),t.removeEventListener("ended",s)})(t.disconnect);t.addEventListener("ended",s),H_(t,n),t.stop=(e=>{let s=!1;return(i=0)=>{if(s)try{e.call(t,i)}catch{n.gain.setValueAtTime(0,i)}else e.call(t,i),s=!0}})(t.stop)},yx=(t,e)=>n=>{const s={value:t};return Object.defineProperties(n,{currentTarget:s,target:s}),"function"==typeof e?e.call(t,n):e.handleEvent.call(t,n)},vx=(t=>(e,n,[s,i,r],o)=>{t(e[i],[n,s,r],t=>t[0]===n&&t[1]===s,o)})(Kv),_x=(t=>(e,n,[s,i,r],o)=>{const a=e.get(s);void 0===a?e.set(s,new Set([[i,n,r]])):t(a,[i,n,r],t=>t[0]===i&&t[1]===n,o)})(Kv),xx=(t=>(e,n,s,i)=>t(e[i],t=>t[0]===n&&t[1]===s))(Dv),bx=new WeakMap,wx=(t=>e=>{var n;return null!==(n=t.get(e))&&void 0!==n?n:0})(bx),kx=(Sx=new Map,Tx=new WeakMap,(t,e)=>{const n=Tx.get(t);if(void 0!==n)return n;const s=Sx.get(t);if(void 0!==s)return s;try{const n=e();return n instanceof Promise?(Sx.set(t,n),n.catch(()=>!1).then(e=>(Sx.delete(t),Tx.set(t,e),e))):(Tx.set(t,n),n)}catch{return Tx.set(t,!1),!1}});var Sx,Tx;const Cx="undefined"==typeof window?null:window,Ax=((t,e)=>(n,s)=>{const i=n.createAnalyser();if(q_(i,s),!(s.maxDecibels>s.minDecibels))throw e();return j_(i,s,"fftSize"),j_(i,s,"maxDecibels"),j_(i,s,"minDecibels"),j_(i,s,"smoothingTimeConstant"),t(L_,()=>L_(i))||(t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const s=Math.max(n.length,t.fftSize);for(let t=0;t<s;t+=1)e[t]=.0078125*(n[t]-128);return e}})(i),i})(kx,qv),Ex=(t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(Gv),Dx=((t,e,n)=>async(s,i,r)=>{const o=t(s);await Promise.all(o.activeInputs.map((t,o)=>Array.from(t).map(async([t,a])=>{const l=e(t),u=await l.render(t,i),c=s.context.destination;n(t)||s===c&&n(s)||u.connect(r,a,o)})).reduce((t,e)=>[...t,...e],[]))})(Gv,Ex,u_),Mx=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=e(i);if(!Iv(o,r)){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,fftSize:o.fftSize,maxDecibels:o.maxDecibels,minDecibels:o.minDecibels,smoothingTimeConstant:o.smoothingTimeConstant};o=t(r,e)}return s.set(r,o),await n(i,r,o),o})(i,r)}}})(Ax,a_,Dx),Ox=(Rx=vv,t=>{const e=Rx.get(t);if(void 0===e)throw R_();return e});var Rx;const Px=(t=>null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null)(Cx),Fx=(t=>e=>null!==t&&e instanceof t)(Px),Nx=new WeakMap,Vx=(t=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(e,n,s){if(null!==n){let i=this._listeners.get(n);void 0===i&&(i=t(this,n),"function"==typeof n&&this._listeners.set(n,i)),this._nativeEventTarget.addEventListener(e,i,s)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,n){const s=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===s?null:s,n)}})(yx),Ix=(t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null)(Cx),jx=(t=>e=>null!==t&&e instanceof t)(Ix),qx=(t=>e=>null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode)(Cx),Lx=(t=>e=>null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam)(Cx),zx=(t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null)(Cx),Bx=((t,e,n,s,i,r,o,a,l,u,c,h,d,p,f,m)=>class extends u{constructor(e,s,i,r){super(i),this._context=e,this._nativeAudioNode=i;const o=c(e);h(o)&&!0!==n(h_,()=>h_(o,m))&&(t=>{const e=new Map;t.connect=(t=>(n,s=0,i=0)=>{const r=p_(n)?t(n,s,i):t(n,s),o=e.get(n);return void 0===o?e.set(n,[{input:i,output:s}]):o.every(t=>t.input!==i||t.output!==s)&&o.push({input:i,output:s}),r})(t.connect.bind(t)),t.disconnect=(n=>(s,i,r)=>{if(n.apply(t),void 0===s)e.clear();else if("number"==typeof s)for(const[t,n]of e){const i=n.filter(t=>t.output!==s);0===i.length?e.delete(t):e.set(t,i)}else if(e.has(s))if(void 0===i)e.delete(s);else{const t=e.get(s);if(void 0!==t){const n=t.filter(t=>t.output!==i&&(t.input!==r||void 0===r));0===n.length?e.delete(s):e.set(s,n)}}for(const[n,o]of e)o.forEach(e=>{p_(n)?t.connect(n,e.output,e.input):t.connect(n,e.output)})})(t.disconnect)})(i),mv.set(this,i),_v.set(this,new Set),"closed"!==e.state&&s&&Rv(this),t(this,r,i)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(t,n=0,a=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw i();const u=c(this._context),h=f(u);if(d(t)||p(t))throw r();if(Xv(t)){const i=a_(t);try{const e=n_(this._nativeAudioNode,i,n,a),s=c_(this);(h||s)&&this._nativeAudioNode.disconnect(...e),"closed"!==this.context.state&&!s&&c_(t)&&Rv(t)}catch(g){if(12===g.code)throw r();throw g}if(e(this,t,n,a,h)){const e=l([this],t);d_(e,s(h))}return t}const m=l_(t);if("playbackRate"===m.name&&1024===m.maxValue)throw o();try{this._nativeAudioNode.connect(m,n),(h||c_(this))&&this._nativeAudioNode.disconnect(m,n)}catch(g){if(12===g.code)throw r();throw g}if(((t,e,n,s)=>{const{activeInputs:i,passiveInputs:r}=Hv(e),{outputs:o}=Gv(t),a=Ov(t),l=o=>{const a=a_(t),l=l_(e);if(o){const e=r_(r,t,n);Jv(i,t,e,!1),s||u_(t)||a.connect(l,n)}else{const e=((t,e,n)=>Dv(t,t=>t[0]===e&&t[1]===n))(i,t,n);t_(r,e,!1),s||u_(t)||a.disconnect(l,n)}};return!!Kv(o,[e,n],t=>t[0]===e&&t[1]===n,!0)&&(a.add(l),Uv(t)?Jv(i,t,[n,l],!0):t_(r,[t,n,l],!0),!0)})(this,t,n,h)){const e=l([this],t);d_(e,s(h))}}disconnect(t,e,n){let s;const o=c(this._context),u=f(o);if(void 0===t)s=((t,e)=>{const n=Gv(t),s=[];for(const i of n.outputs)Zv(i)?f_(t,e,...i):m_(t,e,...i),s.push(i[0]);return n.outputs.clear(),s})(this,u);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw i();s=((t,e,n)=>{const s=Gv(t),i=[];for(const r of s.outputs)r[1]===n&&(Zv(r)?f_(t,e,...r):m_(t,e,...r),i.push(r[0]),s.outputs.delete(r));return i})(this,u,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs))throw i();if(Xv(t)&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw i();if(s=((t,e,n,s,i)=>{const r=Gv(t);return Array.from(r.outputs).filter(t=>!(t[0]!==n||void 0!==s&&t[1]!==s||void 0!==i&&t[2]!==i)).map(n=>(Zv(n)?f_(t,e,...n):m_(t,e,...n),r.outputs.delete(n),n[0]))})(this,u,t,e,n),0===s.length)throw r()}for(const i of s){const t=l([this],i);d_(t,a)}}})((Wx=fv,(t,e,n)=>{const s=[];for(let i=0;i<n.numberOfInputs;i+=1)s.push(new Set);Wx.set(t,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:e})}),((t,e,n,s,i,r,o,a,l,u,c,h,d)=>{const p=new WeakMap;return(f,m,g,y,v)=>{const{activeInputs:_,passiveInputs:x}=r(m),{outputs:b}=r(f),w=a(f),k=r=>{const a=l(m),u=l(f);if(r){const e=Mv(x,f,g,y);t(_,f,e,!1),v||h(f)||n(u,a,g,y),d(m)&&Rv(m)}else{const t=s(_,f,g,y);e(x,y,t,!1),v||h(f)||i(u,a,g,y);const n=o(m);if(0===n)c(m)&&Nv(m,_);else{const t=p.get(m);void 0!==t&&clearTimeout(t),p.set(m,setTimeout(()=>{c(m)&&Nv(m,_)},1e3*n))}}};return!!u(b,[m,g,y],t=>t[0]===m&&t[1]===g&&t[2]===y,!0)&&(w.add(k),c(f)?t(_,f,[g,y,k],!0):e(x,y,[f,g,k],!0),!0)}})(vx,_x,n_,xx,o_,Gv,wx,Ov,a_,Kv,Uv,u_,c_),kx,((t,e,n,s,i,r)=>o=>(a,l)=>{const u=t.get(a);if(void 0===u){if(!o&&r(a)){const t=s(a),{outputs:r}=n(a);for(const n of r)if(Zv(n)){const i=s(n[0]);e(t,i,n[1],n[2])}else{const e=i(n[0]);t.disconnect(e,n[1])}}t.set(a,l)}else t.set(a,u+l)})(xv,o_,Gv,a_,l_,Uv),qv,P_,tx,((t,e,n,s,i,r,o,a)=>(l,u)=>{const c=e.get(l);if(void 0===c)throw new Error("Missing the expected cycle count.");const h=r(l.context),d=a(h);if(c===u){if(e.delete(l),!d&&o(l)){const e=s(l),{outputs:r}=n(l);for(const n of r)if(Zv(n)){const i=s(n[0]);t(e,i,n[1],n[2])}else{const t=i(n[0]);e.connect(t,n[1])}}}else e.set(l,c-u)})(n_,xv,Gv,a_,l_,Ox,Uv,Fx),((t,e,n)=>function s(i,r){const o=Xv(r)?r:n(t,r);if((t=>"delayTime"in t)(o))return[];if(i[0]===o)return[i];if(i.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(t=>s([...i,o],t[0])).reduce((t,e)=>t.concat(e),[])})(Nx,Gv,Ev),Vx,Ox,jx,qx,Lx,Fx,zx);var Wx;const Ux=((t,e,n,s,i,r)=>class extends t{constructor(t,n){const o=i(t),a={...Vv,...n},l=s(o,a);super(t,!1,l,r(o)?e():null),this._nativeAnalyserNode=l}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){const e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){const e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}})(Bx,Mx,qv,Ax,Ox,Fx),$x=new WeakSet,Gx=(t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null)(Cx),Hx=(Qx=new Uint32Array(1),t=>(Qx[0]=t,Qx[0]));var Qx;const Yx=((t,e)=>n=>{n.copyFromChannel=(s,i,r=0)=>{const o=t(r),a=t(i);if(a>=n.numberOfChannels)throw e();const l=n.length,u=n.getChannelData(a),c=s.length;for(let t=o<0?-o:0;t+o<l&&t<c;t+=1)s[t]=u[t+o]},n.copyToChannel=(s,i,r=0)=>{const o=t(r),a=t(i);if(a>=n.numberOfChannels)throw e();const l=n.length,u=n.getChannelData(a),c=s.length;for(let t=o<0?-o:0;t+o<l&&t<c;t+=1)u[t+o]=s[t]}})(Hx,qv),Xx=(t=>e=>{e.copyFromChannel=(n=>(s,i,r=0)=>{const o=t(r),a=t(i);if(o<e.length)return n.call(e,s,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(s,i,r=0)=>{const o=t(r),a=t(i);if(o<e.length)return n.call(e,s,a,o)})(e.copyToChannel)})(Hx),Zx=((t,e,n,s,i,r,o,a)=>{let l=null;return class u{constructor(u){if(null===i)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:c,numberOfChannels:h,sampleRate:d}={...zv,...u};null===l&&(l=new i(1,1,44100));const p=null!==s&&e(r,r)?new s({length:c,numberOfChannels:h,sampleRate:d}):l.createBuffer(h,c,d);if(0===p.numberOfChannels)throw n();return"function"!=typeof p.copyFromChannel?(o(p),Lv(p)):e(jv,()=>jv(p))||a(p),t.add(p),p}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===u.prototype||t.has(e)}}})($x,kx,tx,Gx,Px,(t=>()=>{if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0})(Gx),Yx,Xx),Kx=(t=>(e,n)=>{const s=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(s).connect(e.destination);const i=()=>{n.removeEventListener("ended",i),n.disconnect(s),s.disconnect()};n.addEventListener("ended",i)})(Y_),Jx=((t,e,n)=>async(s,i,r)=>{const o=e(s);await Promise.all(Array.from(o.activeInputs).map(async([e,s])=>{const o=t(e),a=await o.render(e,i);n(e)||a.connect(r,s)}))})(Ex,Hv,u_),tb=(t=>(e,n,s)=>t(n,e,s))(Jx),eb=((t,e,n,s,i,r,o,a,l,u,c)=>(l,h)=>{const d=l.createBufferSource();return q_(d,h),z_(d,h,"playbackRate"),j_(d,h,"buffer"),j_(d,h,"loop"),j_(d,h,"loopEnd"),j_(d,h,"loopStart"),e(n,()=>n(l))||(t=>{t.start=(e=>{let n=!1;return(s=0,i=0,r)=>{if(n)throw R_();e.call(t,s,i,r),n=!0}})(t.start)})(d),e(s,()=>s(l))||(t=>{t.start=(e=t.start,(n=0,s=0,i)=>{const r=t.buffer,o=null===r?s:Math.min(r.duration,s);null!==r&&o>r.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,i)});var e})(d),e(i,()=>i(l))||u(d,l),e(r,()=>r(l))||B_(d),e(o,()=>o(l))||c(d,l),e(a,()=>a(l))||W_(d),t(l,d),d})(Kx,kx,t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},hx,dx,px,0,(t=>(e,n)=>{const s=n.createBuffer(1,1,44100);null===e.buffer&&(e.buffer=s),t(e,"buffer",t=>()=>{const n=t.call(e);return n===s?null:n},t=>n=>t.call(e,null===n?s:n))})(ux),gx),nb=((t,e)=>(n,s,i)=>(t(s).replay(i),e(s,n,i)))((t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(Hv),Jx),sb=((t,e,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null;return{set start(t){o=t},set stop(t){a=t},render(l,u){const c=r.get(u);return void 0!==c?Promise.resolve(c):(async(l,u)=>{let c=n(l);const h=Iv(c,u);if(!h){const t={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,loop:c.loop,loopEnd:c.loopEnd,loopStart:c.loopStart,playbackRate:c.playbackRate.value};c=e(u,t),null!==o&&c.start(...o),null!==a&&c.stop(a)}return r.set(u,c),h?await t(u,l.playbackRate,c.playbackRate):await s(u,l.playbackRate,c.playbackRate),await i(l,u,c),c})(l,u)}}})(tb,eb,a_,nb,Dx),ib=((t,e,n,s,i,r,o,a,l,u,c,h,d)=>(s,r,o,a=null,l=null)=>{const p=o.value,f=new dv(p),m=r?(t=>({replay(e){for(const n of t)if("exponentialRampToValue"===n.type){const{endTime:t,value:s}=n;e.exponentialRampToValueAtTime(s,t)}else if("linearRampToValue"===n.type){const{endTime:t,value:s}=n;e.linearRampToValueAtTime(s,t)}else if("setTarget"===n.type){const{startTime:t,target:s,timeConstant:i}=n;e.setTargetAtTime(s,t,i)}else if("setValue"===n.type){const{startTime:t,value:s}=n;e.setValueAtTime(s,t)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:t,startTime:s,values:i}=n;e.setValueCurveAtTime(i,s,t)}}}}))(f):null,g={get defaultValue(){return p},get maxValue(){return null===a?o.maxValue:a},get minValue(){return null===l?o.minValue:l},get value(){return o.value},set value(t){o.value=t,g.setValueAtTime(t,s.context.currentTime)},cancelAndHoldAtTime(t){if("function"==typeof o.cancelAndHoldAtTime)null===m&&f.flush(s.context.currentTime),f.add(i(t)),o.cancelAndHoldAtTime(t);else{const e=Array.from(f).pop();null===m&&f.flush(s.context.currentTime),f.add(i(t));const n=Array.from(f).pop();o.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?o.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?o.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?o.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&o.setValueCurveAtTime(n.values,n.startTime,n.duration))}return g},cancelScheduledValues:t=>(null===m&&f.flush(s.context.currentTime),f.add((t=>({cancelTime:t,type:"cancelScheduledValues"}))(t)),o.cancelScheduledValues(t),g),exponentialRampToValueAtTime(t,e){if(0===t)throw new RangeError;if(!Number.isFinite(e)||e<0)throw new RangeError;const n=s.context.currentTime;return null===m&&f.flush(n),0===Array.from(f).length&&(f.add(u(p,n)),o.setValueAtTime(p,n)),f.add(((t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}))(t,e)),o.exponentialRampToValueAtTime(t,e),g},linearRampToValueAtTime(t,e){const n=s.context.currentTime;return null===m&&f.flush(n),0===Array.from(f).length&&(f.add(u(p,n)),o.setValueAtTime(p,n)),f.add(((t,e)=>({endTime:e,type:"linearRampToValue",value:t}))(t,e)),o.linearRampToValueAtTime(t,e),g},setTargetAtTime:(t,e,n)=>(null===m&&f.flush(s.context.currentTime),f.add(((t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}))(t,e,n)),o.setTargetAtTime(t,e,n),g),setValueAtTime:(t,e)=>(null===m&&f.flush(s.context.currentTime),f.add(u(t,e)),o.setValueAtTime(t,e),g),setValueCurveAtTime(t,e,n){const i=t instanceof Float32Array?t:new Float32Array(t);if(null!==h&&"webkitAudioContext"===h.name){const t=e+n,r=s.context.sampleRate,a=Math.ceil(e*r),l=Math.floor(t*r),u=l-a,h=new Float32Array(u);for(let s=0;s<u;s+=1){const t=(i.length-1)/n*((a+s)/r-e),o=Math.floor(t),l=Math.ceil(t);h[s]=o===l?i[o]:(1-(t-o))*i[o]+(1-(l-t))*i[l]}null===m&&f.flush(s.context.currentTime),f.add(c(h,e,n)),o.setValueCurveAtTime(h,e,n);const p=l/r;p<t&&d(g,h[h.length-1],p),d(g,i[i.length-1],t)}else null===m&&f.flush(s.context.currentTime),f.add(c(i,e,n)),o.setValueCurveAtTime(i,e,n);return g}};return n.set(g,o),e.set(g,s),t(g,m),g})((rb=gv,(t,e)=>{rb.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})}),Nx,yv,0,t=>({cancelTime:t,type:"cancelAndHold"}),0,0,0,0,Xy,Zy,Ix,cx);var rb;const ob=((t,e,n,s,i,r,o,a)=>class extends t{constructor(t,s){const a=r(t),l={...$v,...s},u=i(a,l),c=o(a),h=c?e():null;super(t,!1,u,h),this._audioBufferSourceNodeRenderer=h,this._isBufferNullified=!1,this._isBufferSet=null!==l.buffer,this._nativeAudioBufferSourceNode=u,this._onended=null,this._playbackRate=n(this,c,u.playbackRate,Wv,Bv)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get onended(){return this._onended}set onended(t){const e="function"==typeof t?a(this,t):null;this._nativeAudioBufferSourceNode.onended=e;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}get playbackRate(){return this._playbackRate}start(t=0,e=0,n){if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n]),"closed"!==this.context.state){Rv(this);const t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),Uv(this)&&Fv(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}})(Bx,sb,ib,R_,eb,Ox,Fx,yx),ab=((t,e,n,s,i,r,o,a)=>class extends t{constructor(t,e){const n=r(t),s=o(n),l=i(n,e,s);super(t,!1,l,s?(t=>{const e=new WeakMap;return{render(n,s){const i=e.get(s);return void 0!==i?Promise.resolve(i):(async(n,s)=>{const i=s.destination;return e.set(s,i),await t(n,s,i),i})(n,s)}}})(a):null),this._isNodeOfNativeOfflineAudioContext=s,this._nativeAudioDestinationNode=l}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(Bx,0,qv,R_,((t,e)=>(n,s,i)=>{const r=n.destination;if(r.channelCount!==s)try{r.channelCount=s}catch{}i&&"explicit"!==r.channelCountMode&&(r.channelCountMode="explicit"),0===r.maxChannelCount&&Object.defineProperty(r,"maxChannelCount",{value:s});const o=t(n,{channelCount:s,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:1});return e(o,"channelCount",t=>()=>t.call(o),t=>e=>{t.call(o,e);try{r.channelCount=e}catch(n){if(e>r.maxChannelCount)throw n}}),e(o,"channelCountMode",t=>()=>t.call(o),t=>e=>{t.call(o,e),r.channelCountMode=e}),e(o,"channelInterpretation",t=>()=>t.call(o),t=>e=>{t.call(o,e),r.channelInterpretation=e}),Object.defineProperty(o,"maxChannelCount",{get:()=>r.maxChannelCount}),o.connect(r),o})(Y_,ux),Ox,Fx,Dx),lb=((t,e,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a){const l=r.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const u=Iv(l,a);if(!u){const t={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(a,t)}return r.set(a,l),u?(await t(a,o.Q,l.Q),await t(a,o.detune,l.detune),await t(a,o.frequency,l.frequency),await t(a,o.gain,l.gain)):(await s(a,o.Q,l.Q),await s(a,o.detune,l.detune),await s(a,o.frequency,l.frequency),await s(a,o.gain,l.gain)),await i(o,a,l),l})(o,a)}}})(tb,$_,a_,nb,Dx),ub=(t=>(e,n)=>t.set(e,n))(bx),cb=((t,e,n,s,i,r,o,a)=>class extends t{constructor(t,s){const l=r(t),u={...w_,...s},c=i(l,u),h=o(l);super(t,!1,c,h?n():null),this._Q=e(this,h,c.Q,Wv,Bv),this._detune=e(this,h,c.detune,1200*Math.log2(Wv),-1200*Math.log2(Wv)),this._frequency=e(this,h,c.frequency,t.sampleRate/2,0),this._gain=e(this,h,c.gain,40*Math.log10(Wv),Bv),this._nativeBiquadFilterNode=c,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,e,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n)}catch(i){if(11===i.code)throw s();throw i}if(t.length!==e.length||e.length!==n.length)throw s()}})(Bx,ib,lb,P_,$_,Ox,Fx,ub),hb=((t,e)=>(n,s,i)=>{const r=new Set;return n.connect=(i=>(o,a=0,l=0)=>{const u=0===r.size;if(e(o))return i.call(n,o,a,l),t(r,[o,a,l],t=>t[0]===o&&t[1]===a&&t[2]===l,!0),u&&s(),o;i.call(n,o,a),t(r,[o,a],t=>t[0]===o&&t[1]===a,!0),u&&s()})(n.connect),n.disconnect=(t=>(s,o,a)=>{const l=r.size>0;if(void 0===s)t.apply(n),r.clear();else if("number"==typeof s){t.call(n,s);for(const t of r)t[1]===s&&r.delete(t)}else{e(s)?t.call(n,s,o,a):t.call(n,s,o);for(const t of r)t[0]!==s||void 0!==o&&t[1]!==o||void 0!==a&&t[2]!==a||r.delete(t)}const u=0===r.size;l&&u&&i()})(n.disconnect),n})(Kv,qx),db=((t,e)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const i=n.createBufferSource();e(s,()=>{const t=s.numberOfInputs;for(let e=0;e<t;e+=1)i.connect(s,0,e)},()=>i.disconnect(s))})(R_,hb),pb=((t,e)=>(n,s)=>{const i=n.createChannelMerger(s.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,i),q_(i,s),i})(Ix,db),fb=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=e(i);if(!Iv(o,r)){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfInputs:o.numberOfInputs};o=t(r,e)}return s.set(r,o),await n(i,r,o),o})(i,r)}}})(pb,a_,Dx),mb=((t,e,n,s,i)=>class extends t{constructor(t,r){const o=s(t),a={...k_,...r};super(t,!1,n(o,a),i(o)?e():null)}})(Bx,fb,pb,Ox,Fx),gb=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=e(i);if(!Iv(o,r)){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfOutputs:o.numberOfOutputs};o=t(r,e)}return s.set(r,o),await n(i,r,o),o})(i,r)}}})(G_,a_,Dx),yb=((t,e,n,s,i)=>class extends t{constructor(t,r){const o=s(t),a=(t=>({...t,channelCount:t.numberOfOutputs}))({...S_,...r});super(t,!1,n(o,a),i(o)?e():null)}})(Bx,gb,G_,Ox,Fx),vb=((t,e,n,s)=>(i,{offset:r,...o})=>{const a=i.createBuffer(1,2,44100),l=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=n(i,{...o,gain:r}),c=a.getChannelData(0);c[0]=1,c[1]=1,l.buffer=a,l.loop=!0;const h={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(t){u.channelCount=t},get channelCountMode(){return u.channelCountMode},set channelCountMode(t){u.channelCountMode=t},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(t){u.channelInterpretation=t},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return l.onended},set onended(t){l.onended=t},addEventListener:(...t)=>l.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>l.dispatchEvent(t[0]),removeEventListener:(...t)=>l.removeEventListener(t[0],t[1],t[2]),start(t=0){l.start.call(l,t)},stop(t=0){l.stop.call(l,t)}};return t(i,l),s(H_(h,u),()=>l.connect(u),()=>l.disconnect(u))})(Kx,eb,Y_,hb),_b=((t,e,n,s,i)=>(r,o)=>{if(void 0===r.createConstantSource)return n(r,o);const a=r.createConstantSource();return q_(a,o),z_(a,o,"offset"),e(s,()=>s(r))||B_(a),e(i,()=>i(r))||W_(a),t(r,a),a})(Kx,kx,vb,hx,px),xb=((t,e,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null;return{set start(t){o=t},set stop(t){a=t},render(l,u){const c=r.get(u);return void 0!==c?Promise.resolve(c):(async(l,u)=>{let c=n(l);const h=Iv(c,u);if(!h){const t={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,offset:c.offset.value};c=e(u,t),null!==o&&c.start(o),null!==a&&c.stop(a)}return r.set(u,c),h?await t(u,l.offset,c.offset):await s(u,l.offset,c.offset),await i(l,u,c),c})(l,u)}}})(tb,_b,a_,nb,Dx),bb=((t,e,n,s,i,r,o)=>class extends t{constructor(t,o){const a=i(t),l={...T_,...o},u=s(a,l),c=r(a),h=c?n():null;super(t,!1,u,h),this._constantSourceNodeRenderer=h,this._nativeConstantSourceNode=u,this._offset=e(this,c,u.offset,Wv,Bv),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){const e="function"==typeof t?o(this,t):null;this._nativeConstantSourceNode.onended=e;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}start(t=0){if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){Rv(this);const t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),Uv(this)&&Fv(this)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}})(Bx,ib,xb,_b,Ox,Fx,yx),wb=((t,e)=>(n,s)=>{const i=n.createConvolver();if(q_(i,s),s.disableNormalization===i.normalize&&(i.normalize=!s.disableNormalization),j_(i,s,"buffer"),s.channelCount>2)throw t();if(e(i,"channelCount",t=>()=>t.call(i),e=>n=>{if(n>2)throw t();return e.call(i,n)}),"max"===s.channelCountMode)throw t();return e(i,"channelCountMode",t=>()=>t.call(i),e=>n=>{if("max"===n)throw t();return e.call(i,n)}),i})(tx,ux),kb=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=e(i);if(!Iv(o,r)){const e={buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize};o=t(r,e)}return s.set(r,o),e_(o)?await n(i,r,o.inputs[0]):await n(i,r,o),o})(i,r)}}})(wb,a_,Dx),Sb=((t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=s(t),l={...C_,...o},u=n(a,l);super(t,!1,u,i(a)?e():null),this._isBufferNullified=!1,this._nativeConvolverNode=u,null!==l.buffer&&r(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){const t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,t.sampleRate),this._isBufferNullified=!0,r(this,0)}else this._isBufferNullified=!1,r(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}})(Bx,kb,wb,Ox,Fx,ub),Tb=((t,e,n,s,i)=>r=>{const o=new WeakMap;return{render(a,l){const u=o.get(l);return void 0!==u?Promise.resolve(u):(async(a,l)=>{let u=n(a);const c=Iv(u,l);if(!c){const t={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:r};u=e(l,t)}return o.set(l,u),c?await t(l,a.delayTime,u.delayTime):await s(l,a.delayTime,u.delayTime),await i(a,l,u),u})(a,l)}}})(tb,Q_,a_,nb,Dx),Cb=((t,e,n,s,i,r,o)=>class extends t{constructor(t,a){const l=i(t),u={...E_,...a},c=s(l,u),h=r(l);super(t,!1,c,h?n(u.maxDelayTime):null),this._delayTime=e(this,h,c.delayTime),o(this,u.maxDelayTime)}get delayTime(){return this._delayTime}})(Bx,ib,Tb,Q_,Ox,Fx,ub),Ab=(t=>(e,n)=>{const s=e.createDynamicsCompressor();if(q_(s,n),n.channelCount>2)throw t();if("max"===n.channelCountMode)throw t();return z_(s,n,"attack"),z_(s,n,"knee"),z_(s,n,"ratio"),z_(s,n,"release"),z_(s,n,"threshold"),s})(tx),Eb=((t,e,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a){const l=r.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const u=Iv(l,a);if(!u){const t={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(a,t)}return r.set(a,l),u?(await t(a,o.attack,l.attack),await t(a,o.knee,l.knee),await t(a,o.ratio,l.ratio),await t(a,o.release,l.release),await t(a,o.threshold,l.threshold)):(await s(a,o.attack,l.attack),await s(a,o.knee,l.knee),await s(a,o.ratio,l.ratio),await s(a,o.release,l.release),await s(a,o.threshold,l.threshold)),await i(o,a,l),l})(o,a)}}})(tb,Ab,a_,nb,Dx),Db=((t,e,n,s,i,r,o,a)=>class extends t{constructor(t,i){const l=r(t),u={...M_,...i},c=s(l,u),h=o(l);super(t,!1,c,h?n():null),this._attack=e(this,h,c.attack),this._knee=e(this,h,c.knee),this._nativeDynamicsCompressorNode=c,this._ratio=e(this,h,c.ratio),this._release=e(this,h,c.release),this._threshold=e(this,h,c.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){const e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){const e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(Bx,ib,Eb,Ab,tx,Ox,Fx,ub),Mb=((t,e,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a){const l=r.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const u=Iv(l,a);if(!u){const t={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(a,t)}return r.set(a,l),u?await t(a,o.gain,l.gain):await s(a,o.gain,l.gain),await i(o,a,l),l})(o,a)}}})(tb,Y_,a_,nb,Dx),Ob=((t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=i(t),l={...O_,...o},u=s(a,l),c=r(a);super(t,!1,u,c?n():null),this._gain=e(this,c,u.gain,Wv,Bv)}get gain(){return this._gain}})(Bx,ib,Mb,Y_,Ox,Fx),Rb=((t,e,n,s)=>(i,r,{channelCount:o,channelCountMode:a,channelInterpretation:l,feedback:u,feedforward:c})=>{const h=U_(r,i.sampleRate),d=u instanceof Float64Array?u:new Float64Array(u),p=c instanceof Float64Array?c:new Float64Array(c),f=d.length,m=p.length,g=Math.min(f,m);if(0===f||f>20)throw s();if(0===d[0])throw e();if(0===m||m>20)throw s();if(0===p[0])throw e();if(1!==d[0]){for(let t=0;t<m;t+=1)p[t]/=d[0];for(let t=1;t<f;t+=1)d[t]/=d[0]}const y=n(i,h,o,o);y.channelCount=o,y.channelCountMode=a,y.channelInterpretation=l;const v=[],_=[],x=[];for(let t=0;t<o;t+=1){v.push(0);const t=new Float32Array(32),e=new Float32Array(32);t.fill(0),e.fill(0),_.push(t),x.push(e)}y.onaudioprocess=t=>{const e=t.inputBuffer,n=t.outputBuffer,s=e.numberOfChannels;for(let i=0;i<s;i+=1){const t=e.getChannelData(i),s=n.getChannelData(i);v[i]=N_(d,f,p,m,g,_[i],x[i],v[i],32,t,s)}};const b=i.sampleRate/2,w={get bufferSize(){return h},get channelCount(){return y.channelCount},set channelCount(t){y.channelCount=t},get channelCountMode(){return y.channelCountMode},set channelCountMode(t){y.channelCountMode=t},get channelInterpretation(){return y.channelInterpretation},set channelInterpretation(t){y.channelInterpretation=t},get context(){return y.context},get inputs(){return[y]},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},addEventListener:(...t)=>y.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>y.dispatchEvent(t[0]),getFrequencyResponse(e,n,s){if(e.length!==n.length||n.length!==s.length)throw t();const i=e.length;for(let t=0;t<i;t+=1){const i=-Math.PI*(e[t]/b),r=[Math.cos(i),Math.sin(i)],o=X_(K_(p,r),K_(d,r));n[t]=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s[t]=Math.atan2(o[1],o[0])}},removeEventListener:(...t)=>y.removeEventListener(t[0],t[1],t[2])};return H_(w,y)})(P_,R_,J_,tx),Pb=((t,e,n,s)=>i=>t(I_,()=>I_(i))?Promise.resolve(t(s,s)).then(t=>{if(!t){const t=n(i,512,0,1);i.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>i.currentTime,t.connect(i.destination)}return i.startRendering()}):new Promise(t=>{const n=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=e=>{n.disconnect(),t(e.renderedBuffer)},n.connect(i.destination),i.startRendering()}))(kx,Y_,J_,((t,e)=>()=>{if(null===e)return Promise.resolve(!1);const n=new e(1,1,44100),s=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(t=>{n.oncomplete=()=>{s.disconnect(),t(0!==n.currentTime)},n.startRendering()})})(Y_,Px)),Fb=((t,e,n,s,i)=>(r,o)=>{const a=new WeakMap;let l=null;return{render(u,c){const h=a.get(c);return void 0!==h?Promise.resolve(h):(async(u,c)=>{let h=null,d=e(u);const p=Iv(d,c);if(void 0===c.createIIRFilter?h=t(c,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(d=c.createIIRFilter(o,r)),a.set(c,null===h?d:h),null!==h){if(null===l){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new n(u.context.destination.channelCount,u.context.length,c.sampleRate);l=(async()=>(await s(u,t,t.destination),((t,e,n,s)=>{const i=n instanceof Float64Array?n:new Float64Array(n),r=s instanceof Float64Array?s:new Float64Array(s),o=i.length,a=r.length,l=Math.min(o,a);if(1!==i[0]){for(let t=0;t<o;t+=1)r[t]/=i[0];for(let t=1;t<a;t+=1)i[t]/=i[0]}const u=new Float32Array(32),c=new Float32Array(32),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),d=t.numberOfChannels;for(let p=0;p<d;p+=1){const e=t.getChannelData(p),n=h.getChannelData(p);u.fill(0),c.fill(0),N_(i,o,r,a,l,u,c,0,32,e,n)}return h})(await i(t),c,r,o)))()}const t=await l;return h.buffer=t,h.start(0),h}return await s(u,c,d),d})(u,c)}}})(eb,a_,Px,Dx,Pb),Nb=(t=>(e,n,s)=>{if(void 0===e.createIIRFilter)return t(e,n,s);const i=e.createIIRFilter(s.feedforward,s.feedback);return q_(i,s),i})(Rb),Vb=((t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=s(t),l=i(a),u={...F_,...o},c=e(a,l?null:t.baseLatency,u);super(t,!1,c,l?n(u.feedback,u.feedforward):null),(t=>{var e;t.getFrequencyResponse=(e=t.getFrequencyResponse,(n,s,i)=>{if(n.length!==s.length||s.length!==i.length)throw P_();return e.call(t,n,s,i)})})(c),this._nativeIIRFilterNode=c,r(this,1)}getFrequencyResponse(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}})(Bx,Nb,Fb,Ox,Fx,ub),Ib=((t,e,n,s,i,r,o,a)=>(l,u)=>{const c=u.listener,{forwardX:h,forwardY:d,forwardZ:p,positionX:f,positionY:m,positionZ:g,upX:y,upY:v,upZ:_}=void 0===c.forwardX?(()=>{const h=new Float32Array(1),d=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),p=o(u);let f=!1,m=[0,0,-1,0,1,0],g=[0,0,0];const y=()=>{if(f)return;f=!0;const t=s(u,256,9,0);t.onaudioprocess=({inputBuffer:t})=>{const e=[r(t,h,0),r(t,h,1),r(t,h,2),r(t,h,3),r(t,h,4),r(t,h,5)];e.some((t,e)=>t!==m[e])&&(c.setOrientation(...e),m=e);const n=[r(t,h,6),r(t,h,7),r(t,h,8)];n.some((t,e)=>t!==g[e])&&(c.setPosition(...n),g=n)},d.connect(t)},v=t=>e=>{e!==m[t]&&(m[t]=e,c.setOrientation(...m))},_=t=>e=>{e!==g[t]&&(g[t]=e,c.setPosition(...g))},x=(e,s,r)=>{const o=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:s});o.connect(d,0,e),o.start(),Object.defineProperty(o.offset,"defaultValue",{get:()=>s});const c=t({context:l},p,o.offset,Wv,Bv);var h,f,m,g,v,_,x;return a(c,"value",t=>()=>t.call(c),t=>e=>{try{t.call(c,e)}catch(n){if(9!==n.code)throw n}y(),p&&r(e)}),c.cancelAndHoldAtTime=(h=c.cancelAndHoldAtTime,p?()=>{throw i()}:(...t)=>{const e=h.apply(c,t);return y(),e}),c.cancelScheduledValues=(f=c.cancelScheduledValues,p?()=>{throw i()}:(...t)=>{const e=f.apply(c,t);return y(),e}),c.exponentialRampToValueAtTime=(m=c.exponentialRampToValueAtTime,p?()=>{throw i()}:(...t)=>{const e=m.apply(c,t);return y(),e}),c.linearRampToValueAtTime=(g=c.linearRampToValueAtTime,p?()=>{throw i()}:(...t)=>{const e=g.apply(c,t);return y(),e}),c.setTargetAtTime=(v=c.setTargetAtTime,p?()=>{throw i()}:(...t)=>{const e=v.apply(c,t);return y(),e}),c.setValueAtTime=(_=c.setValueAtTime,p?()=>{throw i()}:(...t)=>{const e=_.apply(c,t);return y(),e}),c.setValueCurveAtTime=(x=c.setValueCurveAtTime,p?()=>{throw i()}:(...t)=>{const e=x.apply(c,t);return y(),e}),c};return{forwardX:x(0,0,v(0)),forwardY:x(1,0,v(1)),forwardZ:x(2,-1,v(2)),positionX:x(6,0,_(0)),positionY:x(7,0,_(1)),positionZ:x(8,0,_(2)),upX:x(3,0,v(3)),upY:x(4,1,v(4)),upZ:x(5,0,v(5))}})():c;return{get forwardX(){return h},get forwardY(){return d},get forwardZ(){return p},get positionX(){return f},get positionY(){return m},get positionZ(){return g},get upX(){return y},get upY(){return v},get upZ(){return _}}})(ib,pb,_b,J_,tx,ax,Fx,ux),jb=new WeakMap,qb=((t,e,n,s,i,r)=>class extends n{constructor(n,r){super(n),this._nativeContext=n,vv.set(this,n),s(n)&&i.set(n,new Set),this._destination=new t(this,r),this._listener=e(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){const e="function"==typeof t?r(this,t):null;this._nativeContext.onstatechange=e;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(ab,Ib,Vx,Fx,jb,yx),Lb=((t,e,n,s,i,r)=>(o,a)=>{const l=o.createOscillator();return q_(l,a),z_(l,a,"detune"),z_(l,a,"frequency"),void 0!==a.periodicWave?l.setPeriodicWave(a.periodicWave):j_(l,a,"type"),e(n,()=>n(o))||B_(l),e(s,()=>s(o))||r(l,o),e(i,()=>i(o))||W_(l),t(o,l),l})(Kx,kx,hx,dx,px,gx),zb=((t,e,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null,l=null;return{set periodicWave(t){o=t},set start(t){a=t},set stop(t){l=t},render(u,c){const h=r.get(c);return void 0!==h?Promise.resolve(h):(async(u,c)=>{let h=n(u);const d=Iv(h,c);if(!d){const t={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:null===o?void 0:o,type:h.type};h=e(c,t),null!==a&&h.start(a),null!==l&&h.stop(l)}return r.set(c,h),d?(await t(c,u.detune,h.detune),await t(c,u.frequency,h.frequency)):(await s(c,u.detune,h.detune),await s(c,u.frequency,h.frequency)),await i(u,c,h),h})(u,c)}}})(tb,Lb,a_,nb,Dx),Bb=((t,e,n,s,i,r,o)=>class extends t{constructor(t,o){const a=i(t),l={...nx,...o},u=n(a,l),c=r(a),h=c?s():null,d=t.sampleRate/2;super(t,!1,u,h),this._detune=e(this,c,u.detune,153600,-153600),this._frequency=e(this,c,u.frequency,d,-d),this._nativeOscillatorNode=u,this._onended=null,this._oscillatorNodeRenderer=h,null!==this._oscillatorNodeRenderer&&void 0!==l.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=l.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){const e="function"==typeof t?o(this,t):null;this._nativeOscillatorNode.onended=e;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}get type(){return this._nativeOscillatorNode.type}set type(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(t=0){if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){Rv(this);const t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),Uv(this)&&Fv(this)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(t=0){this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}})(Bx,ib,Lb,zb,Ox,Fx,yx),Wb=(t=>(e,n)=>{const s=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return s.buffer=i,s.loop=!0,s.connect(n),s.start(),()=>{s.stop(),s.disconnect(n)}})(eb),Ub=((t,e,n,s,i)=>(r,{curve:o,oversample:a,...l})=>{const u=r.createWaveShaper(),c=r.createWaveShaper();q_(u,l),q_(c,l);const h=n(r,{...l,gain:1}),d=n(r,{...l,gain:-1}),p=n(r,{...l,gain:1}),f=n(r,{...l,gain:-1});let m=null,g=!1,y=null;const v={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(t){h.channelCount=t,d.channelCount=t,u.channelCount=t,p.channelCount=t,c.channelCount=t,f.channelCount=t},get channelCountMode(){return u.channelCountMode},set channelCountMode(t){h.channelCountMode=t,d.channelCountMode=t,u.channelCountMode=t,p.channelCountMode=t,c.channelCountMode=t,f.channelCountMode=t},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(t){h.channelInterpretation=t,d.channelInterpretation=t,u.channelInterpretation=t,p.channelInterpretation=t,c.channelInterpretation=t,f.channelInterpretation=t},get context(){return u.context},get curve(){return y},set curve(n){if(null!==n&&n.length<2)throw e();if(null===n)u.curve=n,c.curve=n;else{const t=n.length,e=new Float32Array(t+2-t%2),s=new Float32Array(t+2-t%2);e[0]=n[0],s[0]=-n[t-1];const i=Math.ceil((t+1)/2),r=(t+1)/2-1;for(let o=1;o<i;o+=1){const a=o/i*r,l=Math.floor(a),u=Math.ceil(a);e[o]=l===u?n[l]:(1-(a-l))*n[l]+(1-(u-a))*n[u],s[o]=l===u?-n[t-1-l]:-(1-(a-l))*n[t-1-l]-(1-(u-a))*n[t-1-u]}e[i]=t%2==1?n[i-1]:(n[i-2]+n[i-1])/2,u.curve=e,c.curve=s}y=n,g&&(s(y)&&null===m?m=t(r,h):null!==m&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(t){u.oversample=t,c.oversample=t},addEventListener:(...t)=>h.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>h.dispatchEvent(t[0]),removeEventListener:(...t)=>h.removeEventListener(t[0],t[1],t[2])};return null!==o&&(v.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==v.oversample&&(v.oversample=a),i(H_(v,p),()=>{h.connect(u).connect(p),h.connect(d).connect(c).connect(f).connect(p),g=!0,s(y)&&(m=t(r,h))},()=>{h.disconnect(u),u.disconnect(p),h.disconnect(d),d.disconnect(c),c.disconnect(f),f.disconnect(p),g=!1,null!==m&&(m(),m=null)})})(Wb,R_,Y_,lx,hb),$b=((t,e,n,s,i,r,o)=>(a,l)=>{const u=a.createWaveShaper();if(null!==r&&"webkitAudioContext"===r.name&&void 0===a.createGain().gain.automationRate)return n(a,l);q_(u,l);const c=null===l.curve||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(null!==c&&c.length<2)throw e();j_(u,{curve:c},"curve"),j_(u,l,"oversample");let h=null,d=!1;return o(u,"curve",t=>()=>t.call(u),e=>n=>(e.call(u,n),d&&(s(n)&&null===h?h=t(a,u):s(n)||null===h||(h(),h=null)),n)),i(u,()=>{d=!0,s(u.curve)&&(h=t(a,u))},()=>{d=!1,null!==h&&(h(),h=null)})})(Wb,R_,Ub,lx,hb,Ix,ux),Gb=((t,e,n,s,i,r,o,a,l,u)=>(c,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:p,distanceModel:f,maxDistance:m,orientationX:g,orientationY:y,orientationZ:v,panningModel:_,positionX:x,positionY:b,positionZ:w,refDistance:k,rolloffFactor:S,...T})=>{const C=c.createPanner();if(T.channelCount>2)throw o();if("max"===T.channelCountMode)throw o();q_(C,T);const A={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},E=n(c,{...A,channelInterpretation:"speakers",numberOfInputs:6}),D=s(c,{...T,gain:1}),M=s(c,{...A,gain:1}),O=s(c,{...A,gain:0}),R=s(c,{...A,gain:0}),P=s(c,{...A,gain:0}),F=s(c,{...A,gain:0}),N=s(c,{...A,gain:0}),V=i(c,256,6,1),I=r(c,{...A,curve:new Float32Array([1,1]),oversample:"none"});let j=[g,y,v],q=[x,b,w];const L=new Float32Array(1);V.onaudioprocess=({inputBuffer:t})=>{const e=[l(t,L,0),l(t,L,1),l(t,L,2)];e.some((t,e)=>t!==j[e])&&(C.setOrientation(...e),j=e);const n=[l(t,L,3),l(t,L,4),l(t,L,5)];n.some((t,e)=>t!==q[e])&&(C.setPosition(...n),q=n)},Object.defineProperty(O.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0});const z={get bufferSize(){},get channelCount(){return C.channelCount},set channelCount(t){if(t>2)throw o();D.channelCount=t,C.channelCount=t},get channelCountMode(){return C.channelCountMode},set channelCountMode(t){if("max"===t)throw o();D.channelCountMode=t,C.channelCountMode=t},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(t){D.channelInterpretation=t,C.channelInterpretation=t},get coneInnerAngle(){return C.coneInnerAngle},set coneInnerAngle(t){C.coneInnerAngle=t},get coneOuterAngle(){return C.coneOuterAngle},set coneOuterAngle(t){C.coneOuterAngle=t},get coneOuterGain(){return C.coneOuterGain},set coneOuterGain(t){if(t<0||t>1)throw e();C.coneOuterGain=t},get context(){return C.context},get distanceModel(){return C.distanceModel},set distanceModel(t){C.distanceModel=t},get inputs(){return[D]},get maxDistance(){return C.maxDistance},set maxDistance(t){if(t<0)throw new RangeError;C.maxDistance=t},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get orientationX(){return M.gain},get orientationY(){return O.gain},get orientationZ(){return R.gain},get panningModel(){return C.panningModel},set panningModel(t){C.panningModel=t},get positionX(){return P.gain},get positionY(){return F.gain},get positionZ(){return N.gain},get refDistance(){return C.refDistance},set refDistance(t){if(t<0)throw new RangeError;C.refDistance=t},get rolloffFactor(){return C.rolloffFactor},set rolloffFactor(t){if(t<0)throw new RangeError;C.rolloffFactor=t},addEventListener:(...t)=>D.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>D.dispatchEvent(t[0]),removeEventListener:(...t)=>D.removeEventListener(t[0],t[1],t[2])};return h!==z.coneInnerAngle&&(z.coneInnerAngle=h),d!==z.coneOuterAngle&&(z.coneOuterAngle=d),p!==z.coneOuterGain&&(z.coneOuterGain=p),f!==z.distanceModel&&(z.distanceModel=f),m!==z.maxDistance&&(z.maxDistance=m),g!==z.orientationX.value&&(z.orientationX.value=g),y!==z.orientationY.value&&(z.orientationY.value=y),v!==z.orientationZ.value&&(z.orientationZ.value=v),_!==z.panningModel&&(z.panningModel=_),x!==z.positionX.value&&(z.positionX.value=x),b!==z.positionY.value&&(z.positionY.value=b),w!==z.positionZ.value&&(z.positionZ.value=w),k!==z.refDistance&&(z.refDistance=k),S!==z.rolloffFactor&&(z.rolloffFactor=S),1===j[0]&&0===j[1]&&0===j[2]||C.setOrientation(...j),0===q[0]&&0===q[1]&&0===q[2]||C.setPosition(...q),u(H_(z,C),()=>{D.connect(C),t(D,I,0,0),I.connect(M).connect(E,0,0),I.connect(O).connect(E,0,1),I.connect(R).connect(E,0,2),I.connect(P).connect(E,0,3),I.connect(F).connect(E,0,4),I.connect(N).connect(E,0,5),E.connect(V).connect(c.destination)},()=>{D.disconnect(C),a(D,I,0,0),I.disconnect(M),M.disconnect(E),I.disconnect(O),O.disconnect(E),I.disconnect(R),R.disconnect(E),I.disconnect(P),P.disconnect(E),I.disconnect(F),F.disconnect(E),I.disconnect(N),N.disconnect(E),E.disconnect(V),V.disconnect(c.destination)})})(n_,R_,pb,Y_,J_,$b,tx,o_,ax,hb),Hb=(t=>(e,n)=>{const s=e.createPanner();return void 0===s.orientationX?t(e,n):(q_(s,n),z_(s,n,"orientationX"),z_(s,n,"orientationY"),z_(s,n,"orientationZ"),z_(s,n,"positionX"),z_(s,n,"positionY"),z_(s,n,"positionZ"),j_(s,n,"coneInnerAngle"),j_(s,n,"coneOuterAngle"),j_(s,n,"coneOuterGain"),j_(s,n,"distanceModel"),j_(s,n,"maxDistance"),j_(s,n,"panningModel"),j_(s,n,"refDistance"),j_(s,n,"rolloffFactor"),s)})(Gb),Qb=((t,e,n,s,i,r,o,a,l,u)=>()=>{const c=new WeakMap;let h=null;return{render(d,p){const f=c.get(p);return void 0!==f?Promise.resolve(f):(async(d,p)=>{let f=null,m=r(d);const g={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},y={...g,coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor},v=Iv(m,p);if("bufferSize"in m)f=s(p,{...g,gain:1});else if(!v){const t={...y,orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value};m=i(p,t)}if(c.set(p,null===f?m:f),null!==f){if(null===h){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new o(6,d.context.length,p.sampleRate),s=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});s.connect(t.destination),h=(async()=>{const e=await Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map(async(e,s)=>{const i=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===s?1:0});return await a(t,e,i.offset),i}));for(let t=0;t<6;t+=1)e[t].connect(s,0,t),e[t].start(0);return u(t)})()}const t=await h,r=s(p,{...g,gain:1});await l(d,p,r);const c=[];for(let e=0;e<t.numberOfChannels;e+=1)c.push(t.getChannelData(e));let m=[c[0][0],c[1][0],c[2][0]],v=[c[3][0],c[4][0],c[5][0]],_=s(p,{...g,gain:1}),x=i(p,{...y,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:v[0],positionY:v[1],positionZ:v[2]});r.connect(_).connect(x.inputs[0]),x.connect(f);for(let e=128;e<t.length;e+=128){const t=[c[0][e],c[1][e],c[2][e]],n=[c[3][e],c[4][e],c[5][e]];if(t.some((t,e)=>t!==m[e])||n.some((t,e)=>t!==v[e])){m=t,v=n;const o=e/p.sampleRate;_.gain.setValueAtTime(0,o),_=s(p,{...g,gain:0}),x=i(p,{...y,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:v[0],positionY:v[1],positionZ:v[2]}),_.gain.setValueAtTime(1,o),r.connect(_).connect(x.inputs[0]),x.connect(f)}}return f}return v?(await t(p,d.orientationX,m.orientationX),await t(p,d.orientationY,m.orientationY),await t(p,d.orientationZ,m.orientationZ),await t(p,d.positionX,m.positionX),await t(p,d.positionY,m.positionY),await t(p,d.positionZ,m.positionZ)):(await a(p,d.orientationX,m.orientationX),await a(p,d.orientationY,m.orientationY),await a(p,d.orientationZ,m.orientationZ),await a(p,d.positionX,m.positionX),await a(p,d.positionY,m.positionY),await a(p,d.positionZ,m.positionZ)),e_(m)?await l(d,p,m.inputs[0]):await l(d,p,m),m})(d,p)}}})(tb,pb,_b,Y_,Hb,a_,Px,nb,Dx,Pb),Yb=((t,e,n,s,i,r,o)=>class extends t{constructor(t,a){const l=i(t),u={...sx,...a},c=n(l,u),h=r(l);super(t,!1,c,h?s():null),this._nativePannerNode=c,this._orientationX=e(this,h,c.orientationX,Wv,Bv),this._orientationY=e(this,h,c.orientationY,Wv,Bv),this._orientationZ=e(this,h,c.orientationZ,Wv,Bv),this._positionX=e(this,h,c.positionX,Wv,Bv),this._positionY=e(this,h,c.positionY,Wv,Bv),this._positionZ=e(this,h,c.positionZ,Wv,Bv),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}})(Bx,ib,Hb,Qb,Ox,Fx,ub),Xb=(t=>(e,{disableNormalization:n,imag:s,real:i})=>{const r=s instanceof Float32Array?s:new Float32Array(s),o=i instanceof Float32Array?i:new Float32Array(i),a=e.createPeriodicWave(o,r,{disableNormalization:n});if(Array.from(s).length<2)throw t();return a})(qv),Zb=((t,e,n)=>class s{constructor(s,i){const r=e(s),o=(t=>{const{imag:e,real:n}=t;return void 0===e?void 0===n?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:void 0===n?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}})({...ix,...i}),a=t(r,o);return n.add(a),a}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===s.prototype||n.has(t)}})(Xb,Ox,new WeakSet),Kb=((t,e,n,s,i,r)=>{const o=16385,a=new Float32Array([1,1]),l=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},c={...u,oversample:"none"},h=(t,r,h,d,p)=>{if(1===r)return((t,e,i,r)=>{const h=new Float32Array(o),d=new Float32Array(o);for(let n=0;n<o;n+=1){const t=n/16384*l;h[n]=Math.cos(t),d[n]=Math.sin(t)}const p=n(t,{...u,gain:0}),f=s(t,{...c,curve:h}),m=s(t,{...c,curve:a}),g=n(t,{...u,gain:0}),y=s(t,{...c,curve:d});return{connectGraph(){e.connect(p),e.connect(void 0===m.inputs?m:m.inputs[0]),e.connect(g),m.connect(i),i.connect(void 0===f.inputs?f:f.inputs[0]),i.connect(void 0===y.inputs?y:y.inputs[0]),f.connect(p.gain),y.connect(g.gain),p.connect(r,0,0),g.connect(r,0,1)},disconnectGraph(){e.disconnect(p),e.disconnect(void 0===m.inputs?m:m.inputs[0]),e.disconnect(g),m.disconnect(i),i.disconnect(void 0===f.inputs?f:f.inputs[0]),i.disconnect(void 0===y.inputs?y:y.inputs[0]),f.disconnect(p.gain),y.disconnect(g.gain),p.disconnect(r,0,0),g.disconnect(r,0,1)}}})(t,h,d,p);if(2===r)return((t,i,r,h)=>{const d=new Float32Array(o),p=new Float32Array(o),f=new Float32Array(o),m=new Float32Array(o),g=Math.floor(8192.5);for(let e=0;e<o;e+=1)if(e>g){const t=(e-g)/(16384-g)*l;d[e]=Math.cos(t),p[e]=Math.sin(t),f[e]=0,m[e]=1}else{const t=e/(16384-g)*l;d[e]=1,p[e]=0,f[e]=Math.cos(t),m[e]=Math.sin(t)}const y=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),v=n(t,{...u,gain:0}),_=s(t,{...c,curve:d}),x=n(t,{...u,gain:0}),b=s(t,{...c,curve:p}),w=s(t,{...c,curve:a}),k=n(t,{...u,gain:0}),S=s(t,{...c,curve:f}),T=n(t,{...u,gain:0}),C=s(t,{...c,curve:m});return{connectGraph(){i.connect(y),i.connect(void 0===w.inputs?w:w.inputs[0]),y.connect(v,0),y.connect(x,0),y.connect(k,1),y.connect(T,1),w.connect(r),r.connect(void 0===_.inputs?_:_.inputs[0]),r.connect(void 0===b.inputs?b:b.inputs[0]),r.connect(void 0===S.inputs?S:S.inputs[0]),r.connect(void 0===C.inputs?C:C.inputs[0]),_.connect(v.gain),b.connect(x.gain),S.connect(k.gain),C.connect(T.gain),v.connect(h,0,0),k.connect(h,0,0),x.connect(h,0,1),T.connect(h,0,1)},disconnectGraph(){i.disconnect(y),i.disconnect(void 0===w.inputs?w:w.inputs[0]),y.disconnect(v,0),y.disconnect(x,0),y.disconnect(k,1),y.disconnect(T,1),w.disconnect(r),r.disconnect(void 0===_.inputs?_:_.inputs[0]),r.disconnect(void 0===b.inputs?b:b.inputs[0]),r.disconnect(void 0===S.inputs?S:S.inputs[0]),r.disconnect(void 0===C.inputs?C:C.inputs[0]),_.disconnect(v.gain),b.disconnect(x.gain),S.disconnect(k.gain),C.disconnect(T.gain),v.disconnect(h,0,0),k.disconnect(h,0,0),x.disconnect(h,0,1),T.disconnect(h,0,1)}}})(t,h,d,p);throw i()};return(e,{channelCount:s,channelCountMode:o,pan:a,...l})=>{if("max"===o)throw i();const u=t(e,{...l,channelCount:1,channelCountMode:o,numberOfInputs:2}),c=n(e,{...l,channelCount:s,channelCountMode:o,gain:1}),d=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:a});let{connectGraph:p,disconnectGraph:f}=h(e,s,c,d,u);Object.defineProperty(d.gain,"defaultValue",{get:()=>0}),Object.defineProperty(d.gain,"maxValue",{get:()=>1}),Object.defineProperty(d.gain,"minValue",{get:()=>-1});const m={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){c.channelCount!==t&&(g&&f(),({connectGraph:p,disconnectGraph:f}=h(e,t,c,d,u)),g&&p()),c.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw i();c.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){c.channelInterpretation=t},get context(){return c.context},get inputs(){return[c]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get pan(){return d.gain},addEventListener:(...t)=>c.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>c.dispatchEvent(t[0]),removeEventListener:(...t)=>c.removeEventListener(t[0],t[1],t[2])};let g=!1;return r(H_(m,u),()=>{p(),g=!0},()=>{f(),g=!1})}})(pb,G_,Y_,$b,tx,hb),Jb=((t,e)=>(n,s)=>{const i=s.channelCountMode;if("clamped-max"===i)throw e();if(void 0===n.createStereoPanner)return t(n,s);const r=n.createStereoPanner();return q_(r,s),z_(r,s,"pan"),Object.defineProperty(r,"channelCountMode",{get:()=>i,set:t=>{if(t!==i)throw e()}}),r})(Kb,tx),tw=((t,e,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a){const l=r.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const u=Iv(l,a);if(!u){const t={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(a,t)}return r.set(a,l),u?await t(a,o.pan,l.pan):await s(a,o.pan,l.pan),e_(l)?await i(o,a,l.inputs[0]):await i(o,a,l),l})(o,a)}}})(tb,Jb,a_,nb,Dx),ew=((t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=i(t),l={...rx,...o},u=n(a,l),c=r(a);super(t,!1,u,c?s():null),this._pan=e(this,c,u.pan)}get pan(){return this._pan}})(Bx,ib,Jb,tw,Ox,Fx),nw=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=e(i);if(!Iv(o,r)){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample};o=t(r,e)}return s.set(r,o),e_(o)?await n(i,r,o.inputs[0]):await n(i,r,o),o})(i,r)}}})($b,a_,Dx),sw=((t,e,n,s,i,r,o)=>class extends t{constructor(t,e){const a=i(t),l={...ox,...e},u=n(a,l);super(t,!0,u,r(a)?s():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=u,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}})(Bx,R_,$b,nw,Ox,Fx,ub),iw=null!==Cx&&Cx.isSecureContext,rw=(t=>(e,n,s)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get:()=>Math.round(e*n)},currentTime:{configurable:!0,get:()=>e}});try{return s()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}})(Cx),ow=new WeakMap,aw=((t,e)=>n=>{let s=t.get(n);if(void 0!==s)return s;if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),t.set(n,s),s})(ow,Px),lw=iw?((t,e,n,s,i,r,o,a,l,u,c,h,d)=>{let p=0;return(f,m,g={credentials:"omit"})=>{const y=c.get(f);if(void 0!==y&&y.has(m))return Promise.resolve();const v=u.get(f);if(void 0!==v){const t=v.get(m);if(void 0!==t)return t}const _=r(f),x=void 0===_.audioWorklet?i(m).then(([t,e])=>{const[s,i]=Tv(t,e);return n(`${s};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${i}\n})})(window,'_AWGS')`)}).then(()=>{const t=d._AWGS.pop();if(void 0===t)throw new SyntaxError;s(_.currentTime,_.sampleRate,()=>t(class{},void 0,(t,n)=>{if(""===t.trim())throw e();const s=bv.get(_);if(void 0!==s){if(s.has(t))throw e();Av(n),Cv(n.parameterDescriptors),s.set(t,n)}else Av(n),Cv(n.parameterDescriptors),bv.set(_,new Map([[t,n]]))},_.sampleRate,void 0,void 0))}):Promise.all([i(m),Promise.resolve(t(h,h))]).then(([[t,e],n])=>{const s=p+1;p=s;const[i,r]=Tv(t,e),u=new Blob([`${i};((AudioWorkletProcessor,registerProcessor)=>{${r}\n})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${s}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),c=URL.createObjectURL(u);return _.audioWorklet.addModule(c,g).then(()=>{if(a(_))return _;const t=o(_);return t.audioWorklet.addModule(c,g).then(()=>t)}).then(t=>{if(null===l)throw new SyntaxError;try{new l(t,`__sac${s}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(c))});return void 0===v?u.set(f,new Map([[m,x]])):v.set(m,x),x.then(()=>{const t=c.get(f);void 0===t?c.set(f,new Set([m])):t.add(m)}).finally(()=>{const t=u.get(f);void 0!==t&&t.delete(m)}),x}})(kx,tx,(t=>e=>new Promise((n,s)=>{if(null===t)return void s(new SyntaxError);const i=t.document.head;if(null===i)s(new SyntaxError);else{const r=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=t.onerror,u=()=>{t.onerror=l,URL.revokeObjectURL(a)};t.onerror=(e,n,i,r,o)=>n===a||n===t.location.href&&1===i&&1===r?(u(),s(o),!1):null!==l?l(e,n,i,r,o):void 0,r.onerror=()=>{u(),s(new SyntaxError)},r.onload=()=>{u(),n()},r.src=a,r.type="module",i.appendChild(r)}}))(Cx),rw,async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw new DOMException("","AbortError")},Ox,aw,Fx,zx,new WeakMap,new WeakMap,((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),i=URL.createObjectURL(n);let r=!1,o=!1;try{await s.audioWorklet.addModule(i);const e=new t(s,"a",{numberOfOutputs:0}),n=s.createOscillator();e.port.onmessage=()=>r=!0,e.onprocessorerror=()=>o=!0,n.connect(e),n.start(0),await s.startRendering(),await new Promise(t=>setTimeout(t))}catch{}finally{URL.revokeObjectURL(i)}return r&&!o})(zx,Px),Cx):void 0,uw=((t,e)=>n=>t(n)||e(n))(jx,Fx),cw=((t,e,n,s,i,r,o,a,l,u,c)=>(n,s)=>{const h=o(n)?n:r(n);if(i.has(s)){const t=new DOMException("","DataCloneError");return Promise.reject(t)}try{i.add(s)}catch{}return e(l,()=>l(h))?h.decodeAudioData(s).then(n=>(A_(s).catch(()=>{}),e(a,()=>a(n))||c(n),t.add(n),n)):new Promise((e,n)=>{const i=async()=>{try{await A_(s)}catch{}},r=t=>{n(t),i()};try{h.decodeAudioData(s,n=>{"function"!=typeof n.copyFromChannel&&(u(n),Lv(n)),t.add(n),i().then(()=>e(n))},t=>{r(null===t?new DOMException("","EncodingError"):t)})}catch(o){r(o)}})})($x,kx,0,0,new WeakSet,Ox,uw,jv,I_,Yx,Xx),hw=((t,e,n,s,i,r,o,a,l,u,c,h,d,p,f,m,g,y,v,_)=>class extends f{constructor(e,n){super(e,n),this._nativeContext=e,this._audioWorklet=void 0===t?void 0:{addModule:(e,n)=>t(this,e,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(t,e,s){return new n({length:e,numberOfChannels:t,sampleRate:s})}createBufferSource(){return new s(this)}createChannelMerger(t=6){return new r(this,{numberOfInputs:t})}createChannelSplitter(t=6){return new o(this,{numberOfOutputs:t})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(t=1){return new c(this,{maxDelayTime:t})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(t,e){return new p(this,{feedback:e,feedforward:t})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(t,e,n={disableNormalization:!1}){return new y(this,{...n,imag:e,real:t})}createStereoPanner(){return new v(this)}createWaveShaper(){return new _(this)}decodeAudioData(t,e,n){return u(this._nativeContext,t).then(t=>("function"==typeof e&&e(t),t),t=>{throw"function"==typeof n&&n(t),t})}})(lw,Ux,Zx,ob,cb,mb,yb,bb,Sb,cw,Cb,Db,Ob,Vb,qb,Bb,Yb,Zb,ew,sw),dw=((t,e,n,s)=>class extends t{constructor(t,e){const i=n(t),r=((t,e)=>t.createMediaElementSource(e.mediaElement))(i,e);if(s(i))throw TypeError();super(t,!0,r,null),this._nativeMediaElementAudioSourceNode=r}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(Bx,0,Ox,Fx),pw=((t,e,n,s)=>class extends t{constructor(t,e){const i=n(t);if(s(i))throw new TypeError;const r=((t,e)=>{const n=t.createMediaStreamDestination();return q_(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n})(i,{...V_,...e});super(t,!1,r,null),this._nativeMediaStreamAudioDestinationNode=r}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(Bx,0,Ox,Fx),fw=((t,e,n,s)=>class extends t{constructor(t,e){const i=n(t),r=((t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((t,e)=>t.id<e.id?-1:t.id>e.id?1:0);const s=n.slice(0,1),i=t.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(i,"mediaStream",{value:e}),i})(i,e);if(s(i))throw new TypeError;super(t,!0,r,null),this._nativeMediaStreamAudioSourceNode=r}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(Bx,0,Ox,Fx),mw=((t,e)=>(n,{mediaStreamTrack:s})=>{if("function"==typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(s);const i=new MediaStream([s]),r=n.createMediaStreamSource(i);if("audio"!==s.kind)throw t();if(e(n))throw new TypeError;return r})(R_,Fx),gw=((t,e,n)=>class extends t{constructor(t,s){const i=n(t);super(t,!0,e(i,s),null)}})(Bx,mw,Ox),yw=((t,e,n,s,i,r,o,a,l)=>class extends t{constructor(t={}){if(null===l)throw new Error("Missing the native AudioContext constructor.");let e;try{e=new l(t)}catch(r){if(12===r.code&&"sampleRate is not in range"===r.message)throw n();throw r}if(null===e)throw new DOMException("","UnknownError");if(!(t=>void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t))(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);const{latencyHint:s}=t,{sampleRate:i}=e;if(this._baseLatency="number"==typeof e.baseLatency?e.baseLatency:"balanced"===s?512/i:"interactive"===s||void 0===s?256/i:"playback"===s?1024/i:128*Math.max(2,Math.min(128,Math.round(s*i/128)))/i,this._nativeAudioContext=e,"webkitAudioContext"===l.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw e()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Yv(this)}))}createMediaElementSource(t){return new i(this,{mediaElement:t})}createMediaStreamDestination(){return new r(this)}createMediaStreamSource(t){return new o(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new a(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)}):this._nativeAudioContext.resume().catch(t=>{if(void 0===t||15===t.code)throw e();throw t})}suspend(){return this._nativeAudioContext.suspend().catch(t=>{if(void 0===t)throw e();throw t})}})(hw,R_,tx,0,dw,pw,fw,gw,Ix),vw=(t=>e=>{const n=t.get(e);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(jb),_w=(t=>(e,n)=>{t(e).add(n)})(vw),xw=(t=>(e,n,s=0,i=0)=>{const r=e[s];if(void 0===r)throw t();return p_(n)?r.connect(n,0,i):r.connect(n,0)})(qv),bw=(t=>(e,n)=>{t(e).delete(n)})(vw),ww=(t=>(e,n=void 0,s=void 0,i=0)=>void 0===n?e.forEach(t=>t.disconnect()):"number"==typeof n?D_(t,e,n).disconnect():p_(n)?void 0===s?e.forEach(t=>t.disconnect(n)):void 0===i?D_(t,e,s).disconnect(n,0):D_(t,e,s).disconnect(n,0,i):void 0===s?e.forEach(t=>t.disconnect(n)):D_(t,e,s).disconnect(n,0))(qv),kw=new WeakMap,Sw=((t,e)=>n=>e(t,n))(kw,Ev),Tw=((t,e,n,s,i,r,o,a,l,u,c,h,d)=>(p,f,m,g)=>{if(0===g.numberOfInputs&&0===g.numberOfOutputs)throw l();const y=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(y.some(t=>t<1))throw l();if(y.length!==g.numberOfOutputs)throw e();if("explicit"!==g.channelCountMode)throw l();const v=g.channelCount*g.numberOfInputs,_=y.reduce((t,e)=>t+e,0),x=void 0===m.parameterDescriptors?0:m.parameterDescriptors.length;if(v+x>6||_>6)throw l();const b=new MessageChannel,w=[],k=[];for(let t=0;t<g.numberOfInputs;t+=1)w.push(o(p,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),k.push(i(p,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const S=[];if(void 0!==m.parameterDescriptors)for(const{defaultValue:t,maxValue:e,minValue:n,name:s}of m.parameterDescriptors){const i=r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==g.parameterData[s]?g.parameterData[s]:void 0===t?0:t});Object.defineProperties(i.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===e?Wv:e},minValue:{get:()=>void 0===n?Bv:n}}),S.push(i)}const T=s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+x)}),C=U_(f,p.sampleRate),A=a(p,C,v+x,Math.max(1,_)),E=i(p,{channelCount:Math.max(1,_),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,_)}),D=[];for(let t=0;t<g.numberOfOutputs;t+=1)D.push(s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:y[t]}));for(let t=0;t<g.numberOfInputs;t+=1){w[t].connect(k[t]);for(let e=0;e<g.channelCount;e+=1)k[t].connect(T,e,t*g.channelCount+e)}const M=new g_(void 0===m.parameterDescriptors?[]:m.parameterDescriptors.map(({name:t},e)=>{const n=S[e];return n.connect(T,0,v+e),n.start(0),[t,n.offset]}));T.connect(A);let O=g.channelInterpretation,R=null;const P=0===g.numberOfOutputs?[A]:D,F={get bufferSize(){return C},get channelCount(){return g.channelCount},set channelCount(t){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(t){throw n()},get channelInterpretation(){return O},set channelInterpretation(t){for(const e of w)e.channelInterpretation=t;O=t},get context(){return A.context},get inputs(){return w},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return R},set onprocessorerror(t){"function"==typeof R&&F.removeEventListener("processorerror",R),R="function"==typeof t?t:null,"function"==typeof R&&F.addEventListener("processorerror",R)},get parameters(){return M},get port(){return b.port2},addEventListener:(...t)=>A.addEventListener(t[0],t[1],t[2]),connect:t.bind(null,P),disconnect:u.bind(null,P),dispatchEvent:(...t)=>A.dispatchEvent(t[0]),removeEventListener:(...t)=>A.removeEventListener(t[0],t[1],t[2])},N=new Map;var V,I;b.port1.addEventListener=(V=b.port1.addEventListener,(...t)=>{if("message"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=N.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{c(p.currentTime,p.sampleRate,()=>e(t))},N.set(e,t[1]))}}return V.call(b.port1,t[0],t[1],t[2])}),b.port1.removeEventListener=(I=b.port1.removeEventListener,(...t)=>{if("message"===t[0]){const e=N.get(t[1]);void 0!==e&&(N.delete(t[1]),t[1]=e)}return I.call(b.port1,t[0],t[1],t[2])});let j=null;Object.defineProperty(b.port1,"onmessage",{get:()=>j,set:t=>{"function"==typeof j&&b.port1.removeEventListener("message",j),j="function"==typeof t?t:null,"function"==typeof j&&(b.port1.addEventListener("message",j),b.port1.start())}}),m.prototype.port=b.port1;let q=null;const L=((t,e,n,s)=>{let i=wv.get(t);void 0===i&&(i=new WeakMap,wv.set(t,i));const r=(async(t,e)=>{const n=await(t=>new Promise((e,n)=>{const{port1:s,port2:i}=new MessageChannel;s.onmessage=({data:t})=>{s.close(),i.close(),e(t)},s.onmessageerror=({data:t})=>{s.close(),i.close(),n(t)},i.postMessage(t)}))(e);return new t(n)})(n,s);return i.set(e,r),r})(p,F,m,g);L.then(t=>q=t);const z=x_(g.numberOfInputs,g.channelCount),B=x_(g.numberOfOutputs,y),W=void 0===m.parameterDescriptors?[]:m.parameterDescriptors.reduce((t,{name:e})=>({...t,[e]:new Float32Array(128)}),{});let U=!0;const $=()=>{g.numberOfOutputs>0&&A.disconnect(E);for(let t=0,e=0;t<g.numberOfOutputs;t+=1){const n=D[t];for(let s=0;s<y[t];s+=1)E.disconnect(n,e+s,s);e+=y[t]}},G=new Map;A.onaudioprocess=({inputBuffer:t,outputBuffer:e})=>{if(null!==q){const s=h(F);for(let i=0;i<C;i+=128){for(let e=0;e<g.numberOfInputs;e+=1)for(let n=0;n<g.channelCount;n+=1)v_(t,z[e],n,n,i);void 0!==m.parameterDescriptors&&m.parameterDescriptors.forEach(({name:e},n)=>{v_(t,W,e,v+n,i)});for(let t=0;t<g.numberOfInputs;t+=1)for(let e=0;e<y[t];e+=1)0===B[t][e].byteLength&&(B[t][e]=new Float32Array(128));try{const t=z.map((t,e)=>{if(s[e].size>0)return G.set(e,C/128),t;const n=G.get(e);return void 0===n?[]:(t.every(t=>t.every(t=>0===t))&&(1===n?G.delete(e):G.set(e,n-1)),t)}),n=c(p.currentTime+i/p.sampleRate,p.sampleRate,()=>q.process(t,B,W));U=n;for(let s=0,r=0;s<g.numberOfOutputs;s+=1){for(let t=0;t<y[s];t+=1)__(e,B[s],t,r+t,i);r+=y[s]}}catch(n){U=!1,F.dispatchEvent(new ErrorEvent("processorerror",{colno:n.colno,filename:n.filename,lineno:n.lineno,message:n.message}))}if(!U){for(let t=0;t<g.numberOfInputs;t+=1){w[t].disconnect(k[t]);for(let e=0;e<g.channelCount;e+=1)k[i].disconnect(T,e,t*g.channelCount+e)}if(void 0!==m.parameterDescriptors){const t=m.parameterDescriptors.length;for(let e=0;e<t;e+=1){const t=S[e];t.disconnect(T,0,v+e),t.stop()}}T.disconnect(A),A.onaudioprocess=null,H?$():X();break}}}};let H=!1;const Q=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Y=()=>A.connect(Q).connect(p.destination),X=()=>{A.disconnect(Q),Q.disconnect()};return Y(),d(F,()=>{if(U){X(),g.numberOfOutputs>0&&A.connect(E);for(let t=0,e=0;t<g.numberOfOutputs;t+=1){const n=D[t];for(let s=0;s<y[t];s+=1)E.connect(n,e+s,s);e+=y[t]}}H=!0},()=>{U&&(Y(),$()),H=!1})})(xw,qv,R_,pb,G_,_b,Y_,J_,tx,ww,rw,Sw,hb),Cw=((t,e,n,s,i)=>(r,o,a,l,u,c)=>{if(null!==a)try{const e=new a(r,l,c),s=new Map;let o=null;if(Object.defineProperties(e,{channelCount:{get:()=>c.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>o,set:t=>{"function"==typeof o&&e.removeEventListener("processorerror",o),o="function"==typeof t?t:null,"function"==typeof o&&e.addEventListener("processorerror",o)}}}),e.addEventListener=(d=e.addEventListener,(...t)=>{if("processorerror"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=s.get(t[1]);void 0!==n?t[1]=n:(t[1]=n=>{"error"===n.type?(Object.defineProperties(n,{type:{value:"processorerror"}}),e(n)):e(new ErrorEvent(t[0],{...n}))},s.set(e,t[1]))}}return d.call(e,"error",t[1],t[2]),d.call(e,...t)}),e.removeEventListener=(h=e.removeEventListener,(...t)=>{if("processorerror"===t[0]){const e=s.get(t[1]);void 0!==e&&(s.delete(t[1]),t[1]=e)}return h.call(e,"error",t[1],t[2]),h.call(e,t[0],t[1],t[2])}),0!==c.numberOfOutputs){const t=n(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return e.connect(t).connect(r.destination),i(e,()=>t.disconnect(),()=>t.connect(r.destination))}return e}catch(p){if(11===p.code)throw s();throw p}var h,d;if(void 0===u)throw s();return(t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}})(c),e(r,o,u,c)})(R_,Tw,Y_,tx,hb),Aw=((t,e,n,s,i,r,o,a,l,u,c,h,d,p,f,m)=>(g,y,v)=>{const _=new WeakMap;let x=null;return{render(b,w){a(w,b);const k=_.get(w);return void 0!==k?Promise.resolve(k):(async(a,b)=>{let w=c(a),k=null;const S=Iv(w,b),T=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(null===h){const t=T.reduce((t,e)=>t+e,0),n=i(b,{channelCount:Math.max(1,t),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,t)}),r=[];for(let e=0;e<a.numberOfOutputs;e+=1)r.push(s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:T[e]}));const u=o(b,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1});u.connect=e.bind(null,r),u.disconnect=l.bind(null,r),k=[n,r,u]}else S||(w=new h(b,g));if(_.set(b,null===k?w:k[2]),null!==k){if(null===x){if(void 0===v)throw new Error("Missing the processor constructor.");if(null===d)throw new Error("Missing the native OfflineAudioContext constructor.");const t=a.channelCount*a.numberOfInputs,e=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length,n=t+e,l=async()=>{const l=new d(n,128*Math.ceil(a.context.length/128),b.sampleRate),u=[],c=[];for(let t=0;t<y.numberOfInputs;t+=1)u.push(o(l,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),c.push(i(l,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));const h=await Promise.all(Array.from(a.parameters.values()).map(async t=>{const e=r(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await p(l,t,e.offset),e})),g=s(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,t+e)});for(let t=0;t<y.numberOfInputs;t+=1){u[t].connect(c[t]);for(let e=0;e<y.channelCount;e+=1)c[t].connect(g,e,t*y.channelCount+e)}for(const[e,n]of h.entries())n.connect(g,0,t+e),n.start(0);return g.connect(l.destination),await Promise.all(u.map(t=>f(a,l,t))),m(l)};x=b_(a,0===n?null:await l(),b,y,T,v,u)}const t=await x,e=n(b,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[l,c,h]=k;null!==t&&(e.buffer=t,e.start(0)),e.connect(l);for(let n=0,s=0;n<a.numberOfOutputs;n+=1){const t=c[n];for(let e=0;e<T[n];e+=1)l.connect(t,s+e,e);s+=T[n]}return h}if(S)for(const[e,n]of a.parameters.entries())await t(b,n,w.parameters.get(e));else for(const[t,e]of a.parameters.entries())await p(b,e,w.parameters.get(t));return await f(a,b,w),w})(b,w)}}})(tb,xw,eb,pb,G_,_b,Y_,bw,ww,rw,a_,zx,Px,nb,Dx,Pb),Ew=(t=>e=>t.get(e))(ow),Dw=(t=>(e,n)=>{t.set(e,n)})(kw),Mw=iw?((t,e,n,s,i,r,o,a,l,u,c,h,d,p)=>class extends e{constructor(e,c,d){var p;const f=a(e),m=l(f),g=(t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}))({...y_,...d});(t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}})(g);const y=bv.get(f),v=null==y?void 0:y.get(c),_=m||"closed"!==f.state?f:null!==(p=o(f))&&void 0!==p?p:f,x=i(_,m?null:e.baseLatency,u,c,v,g);super(e,!0,x,m?s(c,g,v):null);const b=[];x.parameters.forEach((t,e)=>{const s=n(this,m,t);b.push([e,s])}),this._nativeAudioWorkletNode=x,this._onprocessorerror=null,this._parameters=new g_(b),m&&t(f,this);const{activeInputs:w}=r(this);h(x,w)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){const e="function"==typeof t?p(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(_w,Bx,ib,Aw,Cw,Gv,Ew,Ox,Fx,zx,0,Dw,0,yx):void 0,Ow=((t,e)=>(n,s,i)=>{if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,s,i)}catch(r){if("SyntaxError"===r.name)throw t();throw r}})(tx,Px),Rw=((t,e,n,s,i,r,o,a)=>(l,u)=>n(l).render(l,u).then(()=>Promise.all(Array.from(s(u)).map(t=>n(t).render(t,u)))).then(()=>i(u)).then(n=>("function"!=typeof n.copyFromChannel?(o(n),Lv(n)):e(r,()=>r(n))||a(n),t.add(n),n)))($x,kx,Ex,vw,Pb,jv,Yx,Xx),Pw=((t,e,n,s,i)=>class extends t{constructor(t,n,i){let r;if("number"==typeof t&&void 0!==n&&void 0!==i)r={length:n,numberOfChannels:t,sampleRate:i};else{if("object"!=typeof t)throw new Error("The given parameters are not valid.");r=t}const{length:o,numberOfChannels:a,sampleRate:l}={...ex,...r},u=s(a,o,l);e(I_,()=>I_(u))||u.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(u.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(u,a),this._length=o,this._nativeOfflineAudioContext=u,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Yv(this)}))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout(()=>this._waitForThePromiseToSettle(t))}})(hw,kx,R_,Ow,Rw),Fw=((t,e)=>n=>{const s=t.get(n);return e(s)||e(n)})(vv,jx),Nw=((t,e)=>n=>t.has(n)||e(n))(mv,qx),Vw=((t,e)=>n=>t.has(n)||e(n))(yv,Lx),Iw=((t,e)=>n=>{const s=t.get(n);return e(s)||e(n)})(vv,Fx);function jw(t){return void 0===t}function qw(t){return void 0!==t}function Lw(t){return"function"==typeof t}function zw(t){return"number"==typeof t}function Bw(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function Ww(t){return"boolean"==typeof t}function Uw(t){return Array.isArray(t)}function $w(t){return"string"==typeof t}function Gw(t){return $w(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function Hw(t,e){if(!t)throw new Error(e)}function Qw(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function Yw(t){t.isOffline||"running"===t.state||nk('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Xw=!1,Zw=!1;function Kw(t){Xw=t}function Jw(t){jw(t)&&Xw&&!Zw&&(Zw=!0,nk("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let tk=console;function ek(...t){tk.log(...t)}function nk(...t){tk.warn(...t)}const sk=Object.freeze(Object.defineProperty({__proto__:null,assert:Hw,assertContextRunning:Yw,assertRange:Qw,assertUsedScheduleTime:Jw,enterScheduledCallback:Kw,log:ek,setLogger:function(t){tk=t},warn:nk},Symbol.toStringTag,{value:"Module"})),ik="object"==typeof self?self:null,rk=ik&&(ik.hasOwnProperty("AudioContext")||ik.hasOwnProperty("webkitAudioContext"));function ok(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function ak(t,e,n,s){return new(n||(n=Promise))(function(i,r){function o(t){try{l(s.next(t))}catch(e){r(e)}}function a(t){try{l(s.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}l((s=s.apply(t,e||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;class lk{constructor(t,e,n,s){this._callback=t,this._type=e,this._minimumUpdateInterval=Math.max(128/(s||44100),.001),this.updateInterval=n,this._createClock()}_createWorker(){const t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var e;this._updateInterval=Math.max(t,this._minimumUpdateInterval),"worker"===this._type&&(null===(e=this._worker)||void 0===e||e.postMessage(1e3*this._updateInterval))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function uk(t){return Vw(t)}function ck(t){return Nw(t)}function hk(t){return Iw(t)}function dk(t){return Fw(t)}function pk(t,e){return"value"===t||uk(e)||ck(e)||function(t){return t instanceof Zx}(e)}function fk(t,...e){if(!e.length)return t;const n=e.shift();if(Bw(t)&&Bw(n))for(const s in n)pk(s,n[s])?t[s]=n[s]:Bw(n[s])?(t[s]||Object.assign(t,{[s]:{}}),fk(t[s],n[s])):Object.assign(t,{[s]:n[s]});return fk(t,...e)}function mk(t,e,n=[],s){const i={},r=Array.from(e);if(Bw(r[0])&&s&&!Reflect.has(r[0],s)&&(Object.keys(r[0]).some(e=>Reflect.has(t,e))||(fk(i,{[s]:r[0]}),n.splice(n.indexOf(s),1),r.shift())),1===r.length&&Bw(r[0]))fk(i,r[0]);else for(let o=0;o<n.length;o++)qw(r[o])&&(i[n[o]]=r[o]);return fk(t,i)}function gk(t,e){return jw(t)?e:t}function yk(t,e){return e.forEach(e=>{Reflect.has(t,e)&&delete t[e]}),t}let vk=class{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||ik&&this.toString()===ik.TONE_DEBUG_CLASS)&&ek(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}};vk.version=Hy;const _k=1e-6;function xk(t,e){return t>e+_k}function bk(t,e){return xk(t,e)||kk(t,e)}function wk(t,e){return t+_k<e}function kk(t,e){return Math.abs(t-e)<_k}function Sk(t,e,n){return Math.max(Math.min(t,n),e)}class Tk extends vk{constructor(){super(),this.name="Timeline",this._timeline=[];const t=mk(Tk.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(Hw(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];Hw(bk(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(t){const e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){const n=this._search(t,e);return-1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const n=this._search(t);return n-1>=0?this._timeline[n-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(kk(this._timeline[e].time,t)){for(let n=e;n>=0&&kk(this._timeline[n].time,t);n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&bk(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return-1;let n=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][e]<=t)return s-1;for(;n<i;){let s=Math.floor(n+(i-n)/2);const r=this._timeline[s],o=this._timeline[s+1];if(kk(r[e],t)){for(let n=s;n<this._timeline.length&&kk(this._timeline[n][e],t);n++)s=n;return s}if(wk(r[e],t)&&xk(o[e],t))return s;xk(r[e],t)?i=s:n=s+1}return-1}_iterate(t,e=0,n=this._timeline.length-1){this._timeline.slice(e,n+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const n=this._search(t);return-1!==n&&this._iterate(e,0,n),this}forEachAfter(t,e){const n=this._search(t);return this._iterate(e,n+1),this}forEachBetween(t,e,n){let s=this._search(t),i=this._search(e);return-1!==s&&-1!==i?(this._timeline[s].time!==t&&(s+=1),this._timeline[i].time===e&&(i-=1),this._iterate(n,s,i)):-1===s&&this._iterate(n,0,i),this}forEachFrom(t,e){let n=this._search(t);for(;n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this}forEachAtTime(t,e){const n=this._search(t);if(-1!==n&&kk(this._timeline[n].time,t)){let s=n;for(let e=n;e>=0&&kk(this._timeline[e].time,t);e--)s=e;this._iterate(t=>{e(t)},s,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Ck=[];function Ak(t){Ck.push(t)}const Ek=[];function Dk(t){Ek.push(t)}class Mk extends vk{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(t=>{jw(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(e)}),this}once(t,e){const n=(...s)=>{e(...s),this.off(t,n)};return this.on(t,n),this}off(t,e){return t.split(/\W+/).forEach(t=>{if(jw(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(jw(e))this._events[t]=[];else{const n=this._events[t];for(let t=n.length-1;t>=0;t--)n[t]===e&&n.splice(t,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const n=this._events[t].slice(0);for(let t=0,s=n.length;t<s;t++)n[t].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{const n=Object.getOwnPropertyDescriptor(Mk.prototype,e);Object.defineProperty(t.prototype,e,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class Ok extends Mk{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Rk extends Ok{constructor(){var t,e;super(),this.name="Context",this._constants=new Map,this._timeouts=new Tk,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const n=mk(Rk.getDefaults(),arguments,["context"]);n.context?(this._context=n.context,this._latencyHint=(null===(t=arguments[0])||void 0===t?void 0:t.latencyHint)||""):(this._context=function(t){return new yw(t)}({latencyHint:n.latencyHint}),this._latencyHint=n.latencyHint),this._ticker=new lk(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[(null===(e=arguments[0])||void 0===e?void 0:e.hasOwnProperty("updateInterval"))?"_lookAhead":"lookAhead"]=n.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){var t;return this._initialized||(t=this,Ck.forEach(e=>e(t)),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,n){return this._context.createBuffer(t,e,n)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,n){return this._context.createPeriodicWave(t,e,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return Hw(dk(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return Hw(dk(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return Hw(dk(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){Hw(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){Hw(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){Hw(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){Hw(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return function(t,e,n){return Hw(qw(Mw),"This node only works in a secure context (https or localhost)"),new Mw(t,e,n)}(this.rawContext,t,e)}addAudioWorkletModule(t){return ak(this,void 0,void 0,function*(){Hw(qw(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return ak(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return dk(this._context)?this._context.resume():Promise.resolve()}close(){return ak(this,void 0,void 0,function*(){var t;dk(this._context)&&"closed"!==this.state&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&(t=this,Ek.forEach(e=>e(t)))})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0);for(let i=0;i<n.length;i++)n[i]=t;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=e,s.loop=!0,s.start(0),this._constants.set(t,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const n=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{t(),s()},id:n,time:i+e})};return s(),n}}function Pk(t,e){Uw(e)?e.forEach(e=>Pk(t,e)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Fk(t,e){Uw(e)?e.forEach(e=>Fk(t,e)):Object.defineProperty(t,e,{writable:!0})}const Nk=()=>{};class Vk extends vk{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Nk;const t=mk(Vk.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,$w(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:Nk,onload:Nk,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Lk().sampleRate}set(t){return t instanceof Vk?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return ak(this,void 0,void 0,function*(){const e=Vk.load(t).then(t=>{this.set(t),this.onload(this)});Vk.downloads.push(e);try{yield e}finally{const t=Vk.downloads.indexOf(e);Vk.downloads.splice(t,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=Uw(t)&&t[0].length>0,n=e?t.length:1,s=e?t[0].length:t.length,i=Lk(),r=i.createBuffer(n,s,i.sampleRate),o=e||1!==n?t:[t];for(let a=0;a<n;a++)r.copyToChannel(o[a],a);return this._buffer=r,this}toMono(t){if(zw(t))this.fromArray(this.toArray(t));else{let t=new Float32Array(this.length);const e=this.numberOfChannels;for(let n=0;n<e;n++){const e=this.toArray(n);for(let n=0;n<e.length;n++)t[n]+=e[n]}t=t.map(t=>t/e),this.fromArray(t)}return this}toArray(t){if(zw(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);{const t=[];for(let e=0;e<this.numberOfChannels;e++)t[e]=this.getChannelData(e);return t}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){Hw(this.loaded,"Buffer is not loaded");const n=Math.floor(t*this.sampleRate),s=Math.floor(e*this.sampleRate);Hw(n<s,"The start time must be less than the end time");const i=s-n,r=Lk().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let o=0;o<this.numberOfChannels;o++)r.copyToChannel(this.getChannelData(o).subarray(n,s),o);return new Vk(r)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return(new Vk).fromArray(t)}static fromUrl(t){return ak(this,void 0,void 0,function*(){const e=new Vk;return yield e.load(t)})}static load(t){return ak(this,void 0,void 0,function*(){const e=t.match(/\[([^\]\[]+\|.+)\]$/);if(e){const n=e[1].split("|");let s=n[0];for(const t of n)if(Vk.supportsType(t)){s=t;break}t=t.replace(e[0],s)}const n=""===Vk.baseUrl||Vk.baseUrl.endsWith("/")?Vk.baseUrl:Vk.baseUrl+"/",s=document.createElement("a");s.href=n+t,s.pathname=(s.pathname+s.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(s.href);if(!i.ok)throw new Error(`could not load url: ${t}`);const r=yield i.arrayBuffer();return yield Lk().decodeAudioData(r)})}static supportsType(t){const e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return ak(this,void 0,void 0,function*(){for(yield Promise.resolve();Vk.downloads.length;)yield Vk.downloads[0]})}}Vk.baseUrl="",Vk.downloads=[];class Ik extends Rk{constructor(){var t,e,n;super({clockSource:"offline",context:hk(arguments[0])?arguments[0]:(t=arguments[0],e=arguments[1]*arguments[2],n=arguments[2],new Pw(t,e,n)),lookAhead:0,updateInterval:hk(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=hk(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return ak(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const n=Math.floor(this.sampleRate/128);t&&e%n===0&&(yield new Promise(t=>setTimeout(t,1)))}})}render(t=!0){return ak(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new Vk(e)})}close(){return Promise.resolve()}}const jk=new class extends Ok{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,n){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return ak(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}};let qk=jk;function Lk(){return qk===jk&&rk&&zk(new Rk),qk}function zk(t,e=!1){e&&qk.dispose(),qk=dk(t)?new Rk(t):hk(t)?new Ik(t):t}function Bk(t){return Math.pow(10,t/20)}function Wk(t){return Math.log(t)/Math.LN10*20}function Uk(t){return Math.pow(2,t/12)}ik&&ik.TONE_SILENCE_LOGGING;let $k=440;function Gk(t){return Math.round(Hk(t))}function Hk(t){return 69+12*Math.log2(t/$k)}function Qk(t){return $k*Math.pow(2,(t-69)/12)}class Yk extends vk{constructor(t,e,n){super(),this.defaultUnits="s",this._val=e,this._units=n,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const n=parseInt(t,10),s="."===e?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/n)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,n)=>{let s=0;return t&&"0"!==t&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(s+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(s+=this._beatsToUnits(parseFloat(n)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Yk&&this.fromType(this._val),jw(this._val))return this._noArg();if($w(this._val)&&jw(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Bw(this._val)){let t=0;for(const e in this._val)if(qw(this._val[e])){const n=this._val[e];t+=new this.constructor(this.context,e).valueOf()*n}return t}if(qw(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return $w(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class Xk extends Yk{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new Xk(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const n=new this.constructor(this.context,t).valueOf(),s=this.valueOf();return s+(Math.round(s/n)*n-s)*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let i=1;i<9;i++){const t=Math.pow(2,i);e.push(t+"n."),e.push(t+"n"),e.push(t+"t")}e.push("0");let n=e[0],s=new Xk(this.context,e[0]).toSeconds();return e.forEach(e=>{const i=new Xk(this.context,e).toSeconds();Math.abs(i-t)<Math.abs(s-t)&&(n=e,s=i)}),n}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const n=Math.floor(e/this._getTimeSignature());let s=e%1*4;e=Math.floor(e)%this._getTimeSignature();const i=s.toString();return i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3))),[n,e,s].join(":")}toTicks(){const t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Gk(this.toFrequency())}_now(){return this.context.now()}}class Zk extends Xk{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return $k}static set A4(t){!function(t){$k=t}(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:Zk.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,e){const n=Kk[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?n:Zk.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,n){let s=1;return t&&"0"!==t&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(s*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(s*=this._beatsToUnits(parseFloat(n)/4)),s}}})}transpose(t){return new Zk(this.context,this.valueOf()*Uk(t))}harmonize(t){return t.map(t=>this.transpose(t))}toMidi(){return Gk(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/Zk.A4);let n=Math.round(12*e)+57;const s=Math.floor(n/12);return s<0&&(n+=-12*s),Jk[n%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return Qk(t)}static ftom(t){return Gk(t)}}const Kk={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},Jk=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class tS extends Xk{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class eS extends vk{constructor(){super();const t=mk(eS.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Lk()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return Jw(t),new Xk(this.context,t).toSeconds()}toFrequency(t){return new Zk(this.context,t).toFrequency()}toTicks(t){return new tS(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach(n=>{jw(t[n])&&delete e[n]}),e}get(){const t=this.constructor.getDefaults();return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){const n=this[e];qw(n)&&qw(n.value)&&qw(n.setValueAtTime)?t[e]=n.value:n instanceof eS?t[e]=n._getPartialProperties(t[e]):Uw(n)||zw(n)||$w(n)||Ww(n)?t[e]=n:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&qw(this[e])&&(this[e]&&qw(this[e].value)&&qw(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof eS?this[e].set(t[e]):this[e]=t[e])}),this}}class nS extends Tk{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,n){return Qw(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}getLastState(t,e){for(let n=this._search(e);n>=0;n--){const e=this._timeline[n];if(e.state===t)return e}}getNextState(t,e){const n=this._search(e);if(-1!==n)for(let s=n;s<this._timeline.length;s++){const e=this._timeline[s];if(e.state===t)return e}}}class sS extends eS{constructor(){super(mk(sS.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=mk(sS.getDefaults(),arguments,["param","units","convert"]);for(Hw(qw(t.param)&&(uk(t.param)||t.param instanceof sS),"param must be an AudioParam");!uk(t.param);)t.param=t.param._param;this._swappable=!!qw(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Tk(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,qw(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(eS.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return qw(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return qw(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return qw(this.maxValue)&&qw(this.minValue)&&Qw(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?Bk(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?Wk(t):t}setValueAtTime(t,e){const n=this.toSeconds(e),s=this._fromType(t);return Hw(isFinite(s)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),s=this._events.get(e);let i=this._initialValue;if(null===s)i=this._initialValue;else if("setTargetAtTime"!==s.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)i=s.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let t=s.value;if("setTargetAtTime"===s.type){const e=this._events.getBefore(s.time);t=null===e?this._initialValue:e.value}i="linearRampToValueAtTime"===n.type?this._linearInterpolate(s.time,t,n.time,n.value,e):this._exponentialInterpolate(s.time,t,n.time,n.value,e)}else i=s.value;else{const t=this._events.getBefore(s.time);let n;n=null===t?this._initialValue:t.value,"setTargetAtTime"===s.type&&(i=this._exponentialApproach(s.time,n,s.value,s.constant,e))}return this._toType(i)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const n=this._fromType(t),s=this.toSeconds(e);return Hw(isFinite(n)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(n),this._events.add({time:s,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,s),this._param.linearRampToValueAtTime(n,s),this}exponentialRampToValueAtTime(t,e){let n=this._fromType(t);n=kk(n,0)?this._minOutput:n,this._assertRange(n);const s=this.toSeconds(e);return Hw(isFinite(n)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,s),this._param.exponentialRampToValueAtTime(n,s),this}exponentialRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}linearRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}targetRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}exponentialApproachValueAtTime(t,e,n){e=this.toSeconds(e),n=this.toSeconds(n);const s=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(t,e,s),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}setTargetAtTime(t,e,n){const s=this._fromType(t);Hw(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(e);return this._assertRange(s),Hw(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",t,i,n),this._param.setTargetAtTime(s,i,n),this}setValueCurveAtTime(t,e,n,s=1){n=this.toSeconds(n),e=this.toSeconds(e);const i=this._fromType(t[0])*s;this.setValueAtTime(this._toType(i),e);const r=n/(t.length-1);for(let o=1;o<t.length;o++){const n=this._fromType(t[o])*s;this.linearRampToValueAtTime(this._toType(n),e+o*r)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return Hw(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));Hw(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);const s=this._events.get(e),i=this._events.getAfter(e);return s&&kk(s.time,e)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),"linearRampToValueAtTime"===i.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===i.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}rampTo(t,e=.1,n){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const n=this._events.get(e);if(n&&"setTargetAtTime"===n.type){const s=this._events.getAfter(n.time),i=s?s.time:e+2,r=(i-e)/10;for(let n=e;n<i;n+=r)t.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,e=>{"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)}),this}setParam(t){Hw(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,n,s,i){return n+(e-n)*Math.exp(-(i-t)/s)}_linearInterpolate(t,e,n,s,i){return e+(i-t)/(n-t)*(s-e)}_exponentialInterpolate(t,e,n,s,i){return e*Math.pow(s/e,(i-t)/(n-t))}}class iS extends eS{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return qw(this.input)?uk(this.input)||this.input instanceof sS?1:this.input.numberOfInputs:0}get numberOfOutputs(){return qw(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return qw(t)&&(t instanceof iS||ck(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();Hw(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,n=0){return oS(this,t,e,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return nk("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,n=0){return aS(this,t,e,n),this}chain(...t){return rS(this,...t),this}fan(...t){return t.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),qw(this.input)&&(this.input instanceof iS?this.input.dispose():ck(this.input)&&this.input.disconnect()),qw(this.output)&&(this.output instanceof iS?this.output.dispose():ck(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function rS(...t){const e=t.shift();t.reduce((t,e)=>(t instanceof iS?t.connect(e):ck(t)&&oS(t,e),e),e)}function oS(t,e,n=0,s=0){for(Hw(qw(t),"Cannot connect from undefined node"),Hw(qw(e),"Cannot connect to undefined node"),(e instanceof iS||ck(e))&&Hw(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Hw(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof iS||e instanceof sS;)qw(e.input)&&(e=e.input);for(;t instanceof iS;)qw(t.output)&&(t=t.output);uk(e)?t.connect(e,n):t.connect(e,n,s)}function aS(t,e,n=0,s=0){if(qw(e))for(;e instanceof iS;)e=e.input;for(;!ck(t);)qw(t.output)&&(t=t.output);uk(e)?t.disconnect(e,n):ck(e)?t.disconnect(e,n,s):t.disconnect()}class lS extends iS{constructor(){super(mk(lS.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=mk(lS.getDefaults(),arguments,["gain","units"]);this.gain=new sS({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),Pk(this,"gain")}static getDefaults(){return Object.assign(iS.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class uS extends iS{constructor(t){super(t),this.onended=Nk,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new lS({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(iS.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Nk})}_startGain(t,e=1){Hw(-1===this._startTime,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){Hw(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.now()),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const t="exponential"===this._curve?2*e:0;this._stopSource(this.now()+t),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Nk&&(this.onended(this),this.onended=Nk,!this.context.isOffline)){const t=()=>this.dispose();void 0!==window.requestIdleCallback?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Hw(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Nk,this}}class cS extends uS{constructor(){super(mk(cS.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=mk(cS.getDefaults(),arguments,["offset"]);oS(this._source,this._gainNode),this.offset=new sS({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(uS.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class hS extends iS{constructor(){super(mk(hS.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=mk(hS.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new cS({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(iS.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,n=0){return dS(this,t,e,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,n){return this._param.exponentialRampTo(t,e,n),this}linearRampTo(t,e,n){return this._param.linearRampTo(t,e,n),this}targetRampTo(t,e,n){return this._param.targetRampTo(t,e,n),this}exponentialApproachValueAtTime(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}setTargetAtTime(t,e,n){return this._param.setTargetAtTime(t,e,n),this}setValueCurveAtTime(t,e,n,s){return this._param.setValueCurveAtTime(t,e,n,s),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,n){return this._param.rampTo(t,e,n),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function dS(t,e,n,s){(e instanceof sS||uk(e)||e instanceof hS&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof hS&&(e.overridden=!0)),oS(t,e,n,s)}class pS extends sS{constructor(){super(mk(pS.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Tk(1/0),this._multiplier=1;const t=mk(pS.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(sS.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);const s=this._fromType(t),i=this._events.get(e),r=Math.round(Math.max(1/n,1));for(let o=0;o<=r;o++){const t=n*o+e,r=this._exponentialApproach(i.time,i.value,s,n,t);this.linearRampToValueAtTime(this._toType(r),t)}return this}setValueAtTime(t,e){const n=this.toSeconds(e);super.setValueAtTime(t,e);const s=this._events.get(n),i=this._events.previousEvent(s),r=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(r,0),this}linearRampToValueAtTime(t,e){const n=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const s=this._events.get(n),i=this._events.previousEvent(s),r=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(r,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const n=this._fromType(t),s=this._events.get(e),i=Math.round(Math.max(10*(e-s.time),1)),r=(e-s.time)/i;for(let o=0;o<=i;o++){const t=r*o+s.time,i=this._exponentialInterpolate(s.time,s.value,e,n,t);this.linearRampToValueAtTime(this._toType(i),t)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(jw(t.ticks)){const e=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(e,t.time)}const n=this._fromType(this.getValueAtTime(t.time));let s=this._fromType(this.getValueAtTime(e));const i=this._events.get(e);return i&&i.time===e&&"setValueAtTime"===i.type&&(s=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(n+s)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}getDurationOfTicks(t,e){const n=this.toSeconds(e),s=this.getTicksAtTime(e);return this.getTimeOfTick(s+t)-n}getTimeOfTick(t){const e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){const s=this._fromType(this.getValueAtTime(e.time)),i=(this._fromType(this.getValueAtTime(n.time))-s)/(n.time-e.time),r=Math.sqrt(Math.pow(s,2)-2*i*(e.ticks-t)),o=(-s+r)/i;return(o>0?o:(-s-r)/i)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const n=this.toSeconds(e),s=this.toSeconds(t),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+s)-i}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class fS extends hS{constructor(){super(mk(fS.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=mk(fS.getDefaults(),arguments,["value"]);this.input=this._param=new pS({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(hS.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class mS extends eS{constructor(){super(mk(mS.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new nS,this._tickOffset=new Tk,this._ticksAtTime=new Tk,this._secondsAtTime=new Tk;const t=mk(mS.getDefaults(),arguments,["frequency"]);this.frequency=new fS({context:this.context,units:t.units,value:t.frequency}),Pk(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},eS.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),qw(e)&&this.setTicksAtTime(e,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}stop(t){const e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){const t=this._state.get(e);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),n=this._state.getLastState("stopped",e),s=this._ticksAtTime.get(e),i={state:"paused",time:e};this._state.add(i);let r=s||n,o=s?s.ticks:0,a=null;return this._state.forEachBetween(r.time,e+this.sampleTime,t=>{let e=r.time;const n=this._tickOffset.get(t.time);n&&n.time>=r.time&&(o=n.ticks,e=n.time),"started"===r.state&&"started"!==t.state&&(o+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e),t.time!==i.time&&(a={state:t.state,time:t.time,ticks:o})),r=t}),this._state.remove(i),a&&this._ticksAtTime.add(a),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),n={state:"paused",time:t};this._state.add(n);const s=this._secondsAtTime.get(t);let i=s||e,r=s?s.seconds:0,o=null;return this._state.forEachBetween(i.time,t+this.sampleTime,t=>{let e=i.time;const s=this._tickOffset.get(t.time);s&&s.time>=i.time&&(r=s.seconds,e=s.time),"started"===i.state&&"started"!==t.state&&(r+=t.time-e,t.time!==n.time&&(o={state:t.state,time:t.time,seconds:r})),i=t}),this._state.remove(n),o&&this._secondsAtTime.add(o),r}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const n=this._tickOffset.get(e),s=this._state.get(e),i=Math.max(n.time,s.time),r=this.frequency.getTicksAtTime(i)+t-n.ticks;return this.frequency.getTimeOfTick(r)}forEachTickBetween(t,e,n){let s=this._state.get(t);this._state.forEachBetween(t,e,e=>{s&&"started"===s.state&&"started"!==e.state&&this.forEachTickBetween(Math.max(s.time,t),e.time-this.sampleTime,n),s=e});let i=null;if(s&&"started"===s.state){const o=Math.max(s.time,t),a=this.frequency.getTicksAtTime(o),l=a-this.frequency.getTicksAtTime(s.time);let u=Math.ceil(l)-l;u=kk(u,1)?0:u;let c=this.frequency.getTimeOfTick(a+u);for(;c<e;){try{n(c,Math.round(this.getTicksAtTime(c)))}catch(r){i=r;break}c+=this.frequency.getDurationOfTicks(1,c)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class gS extends eS{constructor(){super(mk(gS.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Nk,this._lastUpdate=0,this._state=new nS("stopped"),this._boundLoop=this._loop.bind(this);const t=mk(gS.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new mS({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Pk(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(eS.getDefaults(),{callback:Nk,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){Yw(this.context);const n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const n=this.toSeconds(e),s=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(s+t,n)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,t=>{switch(t.state){case"started":const e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time)}}),this._tickSource.forEachTickBetween(t,e,(t,e)=>{this.callback(t,e)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Mk.mixin(gS);class yS extends iS{constructor(){super(mk(yS.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const t=mk(yS.getDefaults(),arguments,["delayTime","maxDelay"]),e=this.toSeconds(t.maxDelay);this._maxDelay=Math.max(e,this.toSeconds(t.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(e),this.delayTime=new sS({context:this.context,param:this._delayNode.delayTime,units:"time",value:t.delayTime,minValue:0,maxValue:this.maxDelay}),Pk(this,"delayTime")}static getDefaults(){return Object.assign(iS.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class vS extends vk{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=mk(vS.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++;const n=t.urls[e];this.add(e,n,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Nk,onload:Nk,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return Hw(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,n=Nk,s=Nk){return $w(e)?(this.baseUrl&&"data:audio/"===e.trim().substring(0,11).toLowerCase()&&(this.baseUrl=""),this._buffers.set(t.toString(),new Vk(this.baseUrl+e,n,s))):this._buffers.set(t.toString(),new Vk(e,n,s)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class _S extends Zk{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(t){return Gk(super._frequencyToUnits(t))}_ticksToUnits(t){return Gk(super._ticksToUnits(t))}_beatsToUnits(t){return Gk(super._beatsToUnits(t))}_secondsToUnits(t){return Gk(super._secondsToUnits(t))}toMidi(){return this.valueOf()}toFrequency(){return Qk(this.toMidi())}transpose(t){return new _S(this.context,this.toMidi()+t)}}class xS extends tS{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class bS extends eS{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Tk,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Ak(t=>{t.draw=new bS({context:t})}),Dk(t=>{t.draw.dispose()});class wS extends vk{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){Hw(qw(t.time),"Events must have a time property"),Hw(qw(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new kS(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const n of e)if(n.event===t){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,t=>this.remove(t)),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let e,n=null;if(t.getBalance()>0)if(null===t.left.right)e=t.left,e.right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)e=t.right,e.left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()}_rotateLeft(t){const e=t.parent,n=t.isLeftChild(),s=t.right;s&&(t.right=s.left,s.left=t),null!==e?n?e.left=s:e.right=s:this._setRoot(s)}_rotateRight(t){const e=t.parent,n=t.isLeftChild(),s=t.left;s&&(t.left=s.right,s.right=t),null!==e?n?e.left=s:e.right=s:this._setRoot(s)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){const e=[];if(this._root.search(t,e),e.length>0){let t=e[0];for(let n=1;n<e.length;n++)e[n].low>t.low&&(t=e[n]);return t.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse(t=>e.push(t)),e.forEach(e=>{e.event&&t(e.event)})}return this}forEachAtTime(t,e){if(null!==this._root){const n=[];this._root.search(t,n),n.forEach(t=>{t.event&&e(t.event)})}return this}forEachFrom(t,e){if(null!==this._root){const n=[];this._root.searchAfter(t,n),n.forEach(t=>{t.event&&e(t.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class kS{constructor(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}const SS=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class TS extends iS{constructor(){super(mk(TS.getDefaults(),arguments,["volume"])),this.name="Volume";const t=mk(TS.getDefaults(),arguments,["volume"]);this.input=this.output=new lS({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,Pk(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(iS.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class CS extends iS{constructor(){super(mk(CS.getDefaults(),arguments)),this.name="Destination",this.input=new TS({context:this.context}),this.output=new lS({context:this.context}),this.volume=this.input.volume;const t=mk(CS.getDefaults(),arguments);rS(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(iS.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),rS(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Ak(t=>{t.destination=new CS({context:t})}),Dk(t=>{t.destination.dispose()});class AS extends vk{constructor(t){super(),this.name="TimelineValue",this._timeline=new Tk({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class ES extends iS{constructor(){super(Object.assign(mk(ES.getDefaults(),arguments,["context"])))}connect(t,e=0,n=0){return dS(this,t,e,n),this}}class DS extends ES{constructor(){super(Object.assign(mk(DS.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=mk(DS.getDefaults(),arguments,["mapping","length"]);Uw(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):Lw(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(hS.getDefaults(),{length:1024})}setMap(t,e=1024){const n=new Float32Array(e);for(let s=0,i=e;s<i;s++){const e=s/(i-1)*2-1;n[s]=t(e,s)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){Hw(["none","2x","4x"].some(e=>e.includes(t)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class MS extends ES{constructor(){super(Object.assign(mk(MS.getDefaults(),arguments,["value"]))),this.name="Pow";const t=mk(MS.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new DS({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(ES.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class OS{constructor(t,e){this.id=OS._eventId++,this._remainderTime=0;const n=Object.assign(OS.getDefaults(),e);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=Math.floor(n.time),this._remainderTime=n.time-this.time}static getDefaults(){return{callback:Nk,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){const e=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*e),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}OS._eventId=0;class RS extends OS{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(RS.getDefaults(),e);this.duration=n.duration,this._interval=n.interval,this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},OS.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return wk(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new xS(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){wk(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new xS(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const e=this.transport.getTicksAtTime(t);xk(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class PS extends eS{constructor(){super(mk(PS.getDefaults(),arguments)),this.name="Transport",this._loop=new AS(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Tk,this._repeatedEvents=new wS,this._syncedSignals=[],this._swingAmount=0;const t=mk(PS.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new gS({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),Pk(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(eS.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!==0&&e%(2*this._swingTicks)!=0){const n=e%(2*this._swingTicks)/(2*this._swingTicks),s=Math.sin(n*Math.PI)*this._swingAmount;t+=new xS(this.context,2*this._swingTicks/3).toSeconds()*s}Kw(!0),this._timeline.forEachAtTime(e,e=>e.invoke(t)),Kw(!1)}schedule(t,e){const n=new OS(this,{callback:t,time:new tS(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(t,e,n,s=1/0){const i=new RS(this,{callback:t,duration:new Xk(this.context,s).toTicks(),interval:new Xk(this.context,e).toTicks(),time:new tS(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(t,e){const n=new OS(this,{callback:t,once:!0,time:new tS(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,t=>this.clear(t.id)),this._repeatedEvents.forEachFrom(e,t=>this.clear(t.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new xS(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let n;return this.context.resume(),qw(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){Uw(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Xk(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Xk(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new xS(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new xS(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const n=this._clock.getTicksAtTime(e),s=e+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e);this.emit("stop",s),this._clock.setTicksAtTime(t,s),this.emit("start",s,this._clock.getSecondsAtTime(s))}else this.emit("ticks",e),this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)}}syncSignal(t,e){const n=this.now();let s=this.bpm,i=1/(60/s.getValueAtTime(n)/this.PPQ),r=[];if("time"===t.units){const t=1/64/i,e=new lS(t),n=new MS(-1),o=new lS(t);s.chain(e,n,o),s=o,i=1/i,r=[e,n,o]}e||(e=0!==t.getValueAtTime(n)?t.getValueAtTime(n)/i:0);const o=new lS(e);return s.connect(o),o.connect(t._param),r.push(o),this._syncedSignals.push({initial:t.value,nodes:r,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const n=this._syncedSignals[e];n.signal===t&&(n.nodes.forEach(t=>t.dispose()),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Fk(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Mk.mixin(PS),Ak(t=>{t.transport=new PS({context:t})}),Dk(t=>{t.transport.dispose()});class FS extends iS{constructor(t){super(t),this.input=void 0,this._state=new nS("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Nk,this._syncedStop=Nk,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new TS({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,Pk(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(iS.getDefaults(),{mute:!1,onstop:Nk,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,n){let s=jw(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(s=this._clampToCurrentTime(s),this._synced||"started"!==this._state.getValueAtTime(s))if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const t=this._state.get(s);t&&(t.offset=this.toSeconds(gk(e,0)),t.duration=n?this.toSeconds(n):void 0);const i=this.context.transport.schedule(t=>{this._start(t,e,n)},s);this._scheduled.push(i),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else Yw(this.context),this._start(s,e,n);else Hw(xk(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,e,n);return this}stop(t){let e=jw(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||qw(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){const t=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(t)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(xk(e,0)){const n=this._state.get(e);if(n&&"started"===n.state&&n.time!==e){const s=e-this.toSeconds(n.time);let i;n.duration&&(i=this.toSeconds(n.duration)-s),this._start(t,this.toSeconds(n.offset)+s,i)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Nk,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class NS extends uS{constructor(){super(mk(NS.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=mk(NS.getDefaults(),arguments,["url","onload"]);oS(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new sS({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new Vk(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(uS.getDefaults(),{url:new Vk,loop:!1,loopEnd:0,loopStart:0,onload:Nk,onerror:Nk,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,n,s=1){Hw(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(t);this._startGain(i,s),e=this.loop?gk(e,this.loopStart):gk(e,0);let r=Math.max(this.toSeconds(e),0);if(this.loop){const t=this.toSeconds(this.loopEnd)||this.buffer.duration,e=this.toSeconds(this.loopStart),n=t-e;bk(r,t)&&(r=(r-e)%n+e),kk(r,this.buffer.duration)&&(r=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,wk(r,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,r)),qw(n)){let t=this.toSeconds(n);t=Math.max(t,0),this.stop(i+t)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class VS extends FS{constructor(){super(mk(VS.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const t=mk(VS.getDefaults(),arguments,["type"]);this._playbackRate=t.playbackRate,this.type=t.type,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(FS.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(t){if(Hw(t in qS,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,"started"===this.state)){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}_start(t){const e=qS[this._type];this._source=new NS({url:e,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(e.duration-.001))}_stop(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(t){this._stop(t),this._start(t)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const IS=220500,jS={brown:null,pink:null,white:null},qS={get brown(){if(!jS.brown){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(IS);t[e]=n;let s=0;for(let t=0;t<IS;t++){const e=2*Math.random()-1;n[t]=(s+.02*e)/1.02,s=n[t],n[t]*=3.5}}jS.brown=(new Vk).fromArray(t)}return jS.brown},get pink(){if(!jS.pink){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(IS);let s,i,r,o,a,l,u;t[e]=n,s=i=r=o=a=l=u=0;for(let t=0;t<IS;t++){const e=2*Math.random()-1;s=.99886*s+.0555179*e,i=.99332*i+.0750759*e,r=.969*r+.153852*e,o=.8665*o+.3104856*e,a=.55*a+.5329522*e,l=-.7616*l-.016898*e,n[t]=s+i+r+o+a+l+u+.5362*e,n[t]*=.11,u=.115926*e}}jS.pink=(new Vk).fromArray(t)}return jS.pink},get white(){if(!jS.white){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(IS);t[e]=n;for(let t=0;t<IS;t++)n[t]=2*Math.random()-1}jS.white=(new Vk).fromArray(t)}return jS.white}};class LS extends iS{constructor(){super(mk(LS.getDefaults(),arguments,["volume"])),this.name="UserMedia";const t=mk(LS.getDefaults(),arguments,["volume"]);this._volume=this.output=new TS({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Pk(this,"volume"),this.mute=t.mute}static getDefaults(){return Object.assign(iS.getDefaults(),{mute:!1,volume:0})}open(t){return ak(this,void 0,void 0,function*(){Hw(LS.supported,"UserMedia is not supported"),"started"===this.state&&this.close();const e=yield LS.enumerateDevices();zw(t)?this._device=e[t]:(this._device=e.find(e=>e.label===t||e.deviceId===t),!this._device&&e.length>0&&(this._device=e[0]),Hw(qw(this._device),`No matching device ${t}`));const n={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(n.audio.deviceId=this._device.deviceId);const s=yield navigator.mediaDevices.getUserMedia(n);if(!this._stream){this._stream=s;const t=this.context.createMediaStreamSource(s);oS(t,this.output),this._mediaStream=t}return this})}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach(t=>{t.stop()}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return ak(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(t=>"audioinput"===t.kind)})}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){return this._device?this._device.deviceId:void 0}get groupId(){return this._device?this._device.groupId:void 0}get label(){return this._device?this._device.label:void 0}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return qw(navigator.mediaDevices)&&qw(navigator.mediaDevices.getUserMedia)}}function zS(t,e){return ak(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,s=new Ik(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class BS extends uS{constructor(){super(mk(BS.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=mk(BS.getDefaults(),arguments,["frequency","type"]);oS(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new sS({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new sS({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),Pk(this,["frequency","detune"])}static getDefaults(){return Object.assign(uS.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class WS extends FS{constructor(){super(mk(WS.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const t=mk(WS.getDefaults(),arguments,["frequency","type"]);this.frequency=new hS({context:this.context,units:"frequency",value:t.frequency}),Pk(this,"frequency"),this.detune=new hS({context:this.context,units:"cents",value:t.detune}),Pk(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(FS.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),n=new BS({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return WS._periodicWaveCache.find(t=>{return t.phase===this._phase&&(e=t.partials,n=this._partials,e.length===n.length&&e.every((t,e)=>n[e]===t));var e,n});{const t=WS._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{const e=this._getCachedPeriodicWave();if(qw(e)){const{partials:t,wave:n}=e;this._wave=n,this._partials=t,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[e,n]=this._getRealImaginary(t,this._phase),s=this.context.createPeriodicWave(e,n);this._wave=s,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),WS._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:e,type:this._type,wave:this._wave}),WS._periodicWaveCache.length>100&&WS._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){Qw(t,0);let e=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{const e=new Float32Array(t);this._partials.forEach((t,n)=>e[n]=t),this._partials=Array.from(e),this.type=this._type}}_getRealImaginary(t,e){let n=2048;const s=new Float32Array(n),i=new Float32Array(n);let r=1;if("custom"===t){if(r=this._partials.length+1,this._partialCount=this._partials.length,n=r,0===this._partials.length)return[s,i]}else{const e=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);e?(r=parseInt(e[2],10)+1,this._partialCount=parseInt(e[2],10),t=e[1],r=Math.max(r,2),n=r):this._partialCount=0,this._partials=[]}for(let o=1;o<n;++o){const n=2/(o*Math.PI);let a;switch(t){case"sine":a=o<=r?1:0,this._partials[o-1]=a;break;case"square":a=1&o?2*n:0,this._partials[o-1]=a;break;case"sawtooth":a=n*(1&o?1:-1),this._partials[o-1]=a;break;case"triangle":a=1&o?n*n*2*(o-1>>1&1?-1:1):0,this._partials[o-1]=a;break;case"custom":a=this._partials[o-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==a?(s[o]=-a*Math.sin(e*o),i[o]=a*Math.cos(e*o)):(s[o]=0,i[o]=0)}return[s,i]}_inverseFFT(t,e,n){let s=0;const i=t.length;for(let r=0;r<i;r++)s+=t[r]*Math.cos(r*n)+e[r]*Math.sin(r*n);return s}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let n=0;const s=2*Math.PI;for(let i=0;i<32;i++)n=Math.max(this._inverseFFT(t,e,i/32*s),n);return Sk(-this._inverseFFT(t,e,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(t=1024){return ak(this,void 0,void 0,function*(){return zS(this,t)})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}WS._periodicWaveCache=[];class US extends ES{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new DS({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class $S extends hS{constructor(){super(Object.assign(mk($S.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=mk($S.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new lS({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(hS.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class GS extends FS{constructor(){super(mk(GS.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new US({context:this.context}),this._modulationNode=new lS({context:this.context});const t=mk(GS.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new WS({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new WS({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new $S({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Pk(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(WS.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return ak(this,void 0,void 0,function*(){return zS(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class HS extends FS{constructor(){super(mk(HS.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new lS({context:this.context,gain:0});const t=mk(HS.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new WS({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new hS({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new WS({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new $S({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new $S({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Pk(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(WS.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return ak(this,void 0,void 0,function*(){return zS(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class QS extends FS{constructor(){super(mk(QS.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new lS({context:this.context,gain:0}),this._thresh=new DS({context:this.context,mapping:t=>t<=0?-1:1});const t=mk(QS.getDefaults(),arguments,["frequency","width"]);this.width=new hS({context:this.context,units:"audioRange",value:t.width}),this._triangle=new WS({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Pk(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(FS.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return ak(this,void 0,void 0,function*(){return zS(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class YS extends FS{constructor(){super(mk(YS.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=mk(YS.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new hS({context:this.context,units:"frequency",value:t.frequency}),this.detune=new hS({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,Pk(this,["frequency","detune"])}static getDefaults(){return Object.assign(WS.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,n=t/(this._oscillators.length-1);this._forEach((t,s)=>t.detune.value=e+n*s)}}get count(){return this._oscillators.length}set count(t){if(Qw(t,1),this._oscillators.length!==t){this._forEach(t=>t.dispose()),this._oscillators=[];for(let e=0;e<t;e++){const n=new WS({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):Nk});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[e]=n}this.spread=this._spread,"started"===this.state&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((t,e)=>t.phase=this._phase+e/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(t=1024){return ak(this,void 0,void 0,function*(){return zS(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class XS extends FS{constructor(){super(mk(XS.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new $S({context:this.context,value:2});const t=mk(XS.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new QS({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new WS({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Pk(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(FS.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return ak(this,void 0,void 0,function*(){return zS(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const ZS={am:GS,fat:YS,fm:HS,oscillator:WS,pulse:QS,pwm:XS};class KS extends FS{constructor(){super(mk(KS.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=mk(KS.getDefaults(),arguments,["frequency","type"]);this.frequency=new hS({context:this.context,units:"frequency",value:t.frequency}),this.detune=new hS({context:this.context,units:"cents",value:t.detune}),Pk(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(WS.getDefaults(),HS.getDefaults(),GS.getDefaults(),YS.getDefaults(),QS.getDefaults(),XS.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=ZS[t],n=this.now();if(this._oscillator){const t=this._oscillator;t.stop(n),this.context.setTimeout(()=>t.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof ZS[e]}get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,"fat")&&zw(t)&&(this._oscillator.count=t)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,"fat")&&zw(t)&&(this._oscillator.spread=t)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&$w(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(t=1024){return ak(this,void 0,void 0,function*(){return zS(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class JS extends hS{constructor(){super(Object.assign(mk(JS.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new lS({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,rS(this._constantSource,this._sum)}static getDefaults(){return Object.assign(hS.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class tT extends ES{constructor(){super(Object.assign(mk(tT.getDefaults(),arguments,["min","max"]))),this.name="Scale";const t=mk(tT.getDefaults(),arguments,["min","max"]);this._mult=this.input=new $S({context:this.context,value:t.max-t.min}),this._add=this.output=new JS({context:this.context,value:t.min}),this._min=t.min,this._max=t.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(ES.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class eT extends ES{constructor(){super(Object.assign(mk(eT.getDefaults(),arguments))),this.name="Zero",this._gain=new lS({context:this.context}),this.output=this._gain,this.input=void 0,oS(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),aS(this.context.getConstant(0),this._gain),this}}class nT extends iS{constructor(){super(mk(nT.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=sS.prototype._fromType,this._toType=sS.prototype._toType,this._is=sS.prototype._is,this._clampValue=sS.prototype._clampValue;const t=mk(nT.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new WS(t),this.frequency=this._oscillator.frequency,this._amplitudeGain=new lS({context:this.context,gain:t.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new hS({context:this.context,units:"audioRange",value:0}),this._zeros=new eT({context:this.context}),this._a2g=new US({context:this.context}),this._scaler=this.output=new tT({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Pk(this,["amplitude","frequency"]),this.phase=t.phase}static getDefaults(){return Object.assign(WS.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){const e=this.min,n=this.max;this._units=t,this.min=e,this.max=n}get state(){return this._oscillator.state}connect(t,e,n){return(t instanceof sS||t instanceof hS)&&(this.convert=t.convert,this.units=t.units),dS(this,t,e,n),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function sT(t,e=1/0){const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){Qw(s,t,e),n.set(this,s)}})}}function iT(t,e=1/0){const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){Qw(this.toSeconds(s),t,e),n.set(this,s)}})}}class rT extends FS{constructor(){super(mk(rT.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=mk(rT.getDefaults(),arguments,["url","onload"]);this._buffer=new Vk({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(FS.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Nk,onerror:Nk,playbackRate:1,reverse:!1})}load(t){return ak(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=Nk){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,n){return super.start(t,e,n),this}_start(t,e,n){e=this._loop?gk(e,this._loopStart):gk(e,0);const s=this.toSeconds(e),i=n;n=gk(n,Math.max(this._buffer.duration-s,0));let r=this.toSeconds(n);r/=this._playbackRate,t=this.toSeconds(t);const o=new NS({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+r),this._state.setStateAtTime("stopped",t+r,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&jw(i)?o.start(t,s):o.start(t,s,r-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(t=>t.stop(e))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){var s;null===(s=[...this._activeSources].pop())||void 0===s||s.stop(t),this._start(t,e,n)}seek(t,e){const n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){const e=this.toSeconds(t);this._stop(n),this._start(n,e)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Qw(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Qw(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(t=>t.cancelStop())),this._activeSources.forEach(n=>{n.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}ok([iT(0)],rT.prototype,"fadeIn",void 0),ok([iT(0)],rT.prototype,"fadeOut",void 0);class oT extends iS{constructor(){super(mk(oT.getDefaults(),arguments,["urls","onload"],"urls")),this.name="Players",this.input=void 0,this._players=new Map;const t=mk(oT.getDefaults(),arguments,["urls","onload"],"urls");this._volume=this.output=new TS({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Pk(this,"volume"),this._buffers=new vS({urls:t.urls,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.mute=t.mute,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(FS.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:Nk,onerror:Nk,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._players.forEach(e=>{e.fadeIn=t})}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._players.forEach(e=>{e.fadeOut=t})}get state(){return Array.from(this._players).some(([t,e])=>"started"===e.state)?"started":"stopped"}has(t){return this._buffers.has(t)}player(t){if(Hw(this.has(t),`No Player with the name ${t} exists on this object`),!this._players.has(t)){const e=new rT({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(t)}).connect(this.output);this._players.set(t,e)}return this._players.get(t)}get loaded(){return this._buffers.loaded}add(t,e,n){return Hw(!this._buffers.has(t),"A buffer with that name already exists on this object"),this._buffers.add(t,e,n),this}stopAll(t){return this._players.forEach(e=>e.stop(t)),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach(t=>t.dispose()),this._buffers.dispose(),this}}class aT extends FS{constructor(){super(mk(aT.getDefaults(),arguments,["url","onload"])),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[];const t=mk(aT.getDefaults(),arguments,["url","onload"]);this.buffer=new Vk({onload:t.onload,onerror:t.onerror,reverse:t.reverse,url:t.url}),this._clock=new gS({context:this.context,callback:this._tick.bind(this),frequency:1/t.grainSize}),this._playbackRate=t.playbackRate,this._grainSize=t.grainSize,this._overlap=t.overlap,this.detune=t.detune,this.overlap=t.overlap,this.loop=t.loop,this.playbackRate=t.playbackRate,this.grainSize=t.grainSize,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.reverse=t.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(FS.getDefaults(),{onload:Nk,onerror:Nk,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(t,e,n){e=gk(e,0),e=this.toSeconds(e),t=this.toSeconds(t);const s=1/this._clock.frequency.getValueAtTime(t);this._clock.start(t,e/s),n&&this.stop(t+this.toSeconds(n))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){this._stop(t),this._start(t,e,n)}_stop(t){this._clock.stop(t)}_onstop(t){this._activeSources.forEach(e=>{e.fadeOut=0,e.stop(t)}),this.onstop(this)}_tick(t){const e=this._clock.getTicksAtTime(t),n=e*this._grainSize;if(this.log("offset",n),!this.loop&&n>this.buffer.duration)return void this.stop(t);const s=n<this._overlap?0:this._overlap,i=new NS({context:this.context,url:this.buffer,fadeIn:s,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:Uk(this.detune/100)}).connect(this.output);i.start(t,this._grainSize*e),i.stop(t+this._grainSize/this.playbackRate),this._activeSources.push(i),i.onended=()=>{const t=this._activeSources.indexOf(i);-1!==t&&this._activeSources.splice(t,1)}}get playbackRate(){return this._playbackRate}set playbackRate(t){Qw(t,.001),this._playbackRate=t,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(t){this.buffer.loaded&&Qw(this.toSeconds(t),0,this.buffer.duration),this._loopStart=this.toSeconds(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this.buffer.loaded&&Qw(this.toSeconds(t),0,this.buffer.duration),this._loopEnd=this.toSeconds(t)}get reverse(){return this.buffer.reverse}set reverse(t){this.buffer.reverse=t}get grainSize(){return this._grainSize}set grainSize(t){this._grainSize=this.toSeconds(t),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(t){const e=this.toSeconds(t);Qw(e,0),this._overlap=e}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(t=>t.dispose()),this}}class lT extends ES{constructor(){super(...arguments),this.name="Abs",this._abs=new DS({context:this.context,mapping:t=>Math.abs(t)<.001?0:Math.abs(t)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class uT extends ES{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new DS({context:this.context,mapping:t=>2*Math.abs(t)-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class cT extends ES{constructor(){super(...arguments),this.name="Negate",this._multiply=new $S({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class hT extends hS{constructor(){super(Object.assign(mk(hT.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Subtract",this._sum=new lS({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new cT({context:this.context}),this.subtrahend=this._param,rS(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(hS.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class dT extends ES{constructor(){super(Object.assign(mk(dT.getDefaults(),arguments))),this.name="GreaterThanZero",this._thresh=this.output=new DS({context:this.context,length:127,mapping:t=>t<=0?0:1}),this._scale=this.input=new $S({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class pT extends hS{constructor(){super(Object.assign(mk(pT.getDefaults(),arguments,["value"]))),this.name="GreaterThan",this.override=!1;const t=mk(pT.getDefaults(),arguments,["value"]);this._subtract=this.input=new hT({context:this.context,value:t.value}),this._gtz=this.output=new dT({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,Pk(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(hS.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class fT extends tT{constructor(){super(Object.assign(mk(fT.getDefaults(),arguments,["min","max","exponent"]))),this.name="ScaleExp";const t=mk(fT.getDefaults(),arguments,["min","max","exponent"]);this.input=this._exp=new MS({context:this.context,value:t.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(tT.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(t){this._exp.value=t}dispose(){return super.dispose(),this._exp.dispose(),this}}class mT extends iS{constructor(){super(mk(mT.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new hS({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=mk(mT.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(iS.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if($w(t))return t;{let n;for(n in gT)if(gT[n][e]===t)return n;return t}}_setCurve(t,e,n){if($w(n)&&Reflect.has(gT,n)){const s=gT[n];Bw(s)?"_decayCurve"!==t&&(this[t]=s[e]):this[t]=s}else{if(!Uw(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let n=this.toSeconds(this.attack);const s=this.toSeconds(this.decay),i=this.getValueAtTime(t);if(i>0&&(n=(1-i)/(1/n)),n<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else{this._sig.cancelAndHoldAtTime(t);let s=this._attackCurve;for(let t=1;t<s.length;t++)if(s[t-1]<=i&&i<=s[t]){s=this._attackCurve.slice(t),s[0]=i;break}this._sig.setValueCurveAtTime(s,t,n,e)}if(s&&this.sustain<1){const i=e*this.sustain,r=t+n;this.log("decay",r),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(i,s+r):this._sig.exponentialApproachValueAtTime(i,r,s)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(Hw(Uw(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,n=0){return dS(this,t,e,n),this}asArray(t=1024){return ak(this,void 0,void 0,function*(){const e=t/this.context.sampleRate,n=new Ik(1,e,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),r=.1*i,o=i+r,a=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/o,decay:e*this.toSeconds(this.decay)/o,release:e*this.toSeconds(this.release)/o,context:n}));return a._sig.toDestination(),a.triggerAttackRelease(e*(s+r)/o,0),(yield n.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}ok([iT(0)],mT.prototype,"attack",void 0),ok([iT(0)],mT.prototype,"decay",void 0),ok([sT(0,1)],mT.prototype,"sustain",void 0),ok([iT(0)],mT.prototype,"release",void 0);const gT=(()=>{const t=128;let e,n;const s=[];for(e=0;e<t;e++)s[e]=Math.sin(e/127*(Math.PI/2));const i=[];for(e=0;e<127;e++){n=e/127;const t=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;i[e]=t/10+.83*n}i[127]=1;const r=[];for(e=0;e<t;e++)r[e]=Math.ceil(e/127*5)/5;const o=[];for(e=0;e<t;e++)n=e/127,o[e]=.5*(1-Math.cos(Math.PI*n));const a=[];for(e=0;e<t;e++){n=e/127;const t=4*Math.pow(n,3)+.2,s=Math.cos(t*Math.PI*2*n);a[e]=Math.abs(s*(1-n))}function l(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:l(a),Out:a},cosine:{In:s,Out:(u=s,u.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:i,Out:l(i)},sine:{In:o,Out:l(o)},step:{In:r,Out:l(r)}};var u})();class yT extends iS{constructor(){super(mk(yT.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t);const t=mk(yT.getDefaults(),arguments);this._volume=this.output=new TS({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Pk(this,"volume")}static getDefaults(){return Object.assign(iS.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const n=this["_original_"+t]=this[t];this[t]=(...t)=>{const s=t[e],i=this.context.transport.schedule(s=>{t[e]=s,n.apply(this,t)},s);this._scheduledEvents.push(i)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,e,n,s){const i=this.toSeconds(n),r=this.toSeconds(e);return this.triggerAttack(t,i,s),this.triggerRelease(i+r),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class vT extends yT{constructor(){super(mk(vT.getDefaults(),arguments));const t=mk(vT.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(yT.getDefaults(),{detune:0,onsilence:Nk,portamento:0})}triggerAttack(t,e,n=1){this.log("triggerAttack",t,e,n);const s=this.toSeconds(e);return this._triggerEnvelopeAttack(s,n),this.setNote(t,s),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const n=this.toSeconds(e),s=t instanceof Zk?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const t=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,t,n)}else this.frequency.setValueAtTime(s,n);return this}}ok([iT(0)],vT.prototype,"portamento",void 0);class _T extends mT{constructor(){super(mk(_T.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new lS({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class xT extends vT{constructor(){super(mk(xT.getDefaults(),arguments)),this.name="Synth";const t=mk(xT.getDefaults(),arguments);this.oscillator=new KS(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new _T(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),Pk(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(vT.getDefaults(),{envelope:Object.assign(yk(mT.getDefaults(),Object.keys(iS.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(yk(KS.getDefaults(),[...Object.keys(FS.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){const e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class bT extends vT{constructor(){super(mk(bT.getDefaults(),arguments)),this.name="ModulationSynth";const t=mk(bT.getDefaults(),arguments);this._carrier=new xT({context:this.context,oscillator:t.oscillator,envelope:t.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new xT({context:this.context,oscillator:t.modulation,envelope:t.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new hS({context:this.context,units:"frequency"}),this.detune=new hS({context:this.context,value:t.detune,units:"cents"}),this.harmonicity=new $S({context:this.context,value:t.harmonicity,minValue:0}),this._modulationNode=new lS({context:this.context,gain:0}),Pk(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(vT.getDefaults(),{harmonicity:3,oscillator:Object.assign(yk(KS.getDefaults(),[...Object.keys(FS.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(yk(mT.getDefaults(),Object.keys(iS.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(yk(KS.getDefaults(),[...Object.keys(FS.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(yk(mT.getDefaults(),Object.keys(iS.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(t,e){this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class wT extends bT{constructor(){super(mk(wT.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new US({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class kT extends iS{constructor(){super(mk(kT.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const t=mk(kT.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new sS({context:this.context,units:"number",value:t.Q,param:this._filter.Q}),this.frequency=new sS({context:this.context,units:"frequency",value:t.frequency,param:this._filter.frequency}),this.detune=new sS({context:this.context,units:"cents",value:t.detune,param:this._filter.detune}),this.gain=new sS({context:this.context,units:"decibels",convert:!1,value:t.gain,param:this._filter.gain}),this.type=t.type}static getDefaults(){return Object.assign(iS.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(t){Hw(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),`Invalid filter type: ${t}`),this._filter.type=t}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let r=0;r<t;r++){const n=19980*Math.pow(r/t,2)+20;e[r]=n}const n=new Float32Array(t),s=new Float32Array(t),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(e,n,s),n}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class ST extends iS{constructor(){super(mk(ST.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new lS({context:this.context}),this.output=new lS({context:this.context}),this._filters=[];const t=mk(ST.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new hS({context:this.context,units:"positive",value:t.Q}),this.frequency=new hS({context:this.context,units:"frequency",value:t.frequency}),this.detune=new hS({context:this.context,units:"cents",value:t.detune}),this.gain=new hS({context:this.context,units:"decibels",convert:!1,value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,Pk(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(iS.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(t){Hw(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),`Invalid filter type: ${t}`),this._type=t,this._filters.forEach(e=>e.type=t)}get rolloff(){return this._rolloff}set rolloff(t){const e=zw(t)?t:parseInt(t,10),n=[-12,-24,-48,-96];let s=n.indexOf(e);Hw(-1!==s,`rolloff can only be ${n.join(", ")}`),s+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach(t=>t.disconnect()),this._filters=new Array(s);for(let i=0;i<s;i++){const t=new kT({context:this.context});t.type=this._type,this.frequency.connect(t.frequency),this.detune.connect(t.detune),this.Q.connect(t.Q),this.gain.connect(t.gain),this._filters[i]=t}this._internalChannels=this._filters,rS(this.input,...this._internalChannels,this.output)}getFrequencyResponse(t=128){const e=new kT({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(t).map(()=>1);return this._filters.forEach(()=>{e.getFrequencyResponse(t).forEach((t,e)=>n[e]*=t)}),e.dispose(),n}dispose(){return super.dispose(),this._filters.forEach(t=>{t.dispose()}),Fk(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class TT extends mT{constructor(){super(mk(TT.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const t=mk(TT.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=t.octaves,this._baseFrequency=this.toFrequency(t.baseFrequency),this._exponent=this.input=new MS({context:this.context,value:t.exponent}),this._scale=this.output=new tT({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(mT.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){const e=this.toFrequency(t);Qw(e,0),this._baseFrequency=e,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t)}get exponent(){return this._exponent.value}set exponent(t){this._exponent.value=t}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class CT extends vT{constructor(){super(mk(CT.getDefaults(),arguments)),this.name="MonoSynth";const t=mk(CT.getDefaults(),arguments);this.oscillator=new KS(Object.assign(t.oscillator,{context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new ST(Object.assign(t.filter,{context:this.context})),this.filterEnvelope=new TT(Object.assign(t.filterEnvelope,{context:this.context})),this.envelope=new _T(Object.assign(t.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Pk(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(vT.getDefaults(),{envelope:Object.assign(yk(mT.getDefaults(),Object.keys(iS.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(yk(ST.getDefaults(),Object.keys(iS.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(yk(TT.getDefaults(),Object.keys(iS.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(yk(KS.getDefaults(),Object.keys(FS.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(t,e=1){if(this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),0===this.envelope.sustain){const e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class AT extends vT{constructor(){super(mk(AT.getDefaults(),arguments)),this.name="DuoSynth";const t=mk(AT.getDefaults(),arguments);this.voice0=new CT(Object.assign(t.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new CT(Object.assign(t.voice1,{context:this.context})),this.harmonicity=new $S({context:this.context,units:"positive",value:t.harmonicity}),this._vibrato=new nT({frequency:t.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new lS({context:this.context,units:"normalRange",gain:t.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new hS({context:this.context,units:"frequency",value:440}),this.detune=new hS({context:this.context,units:"cents",value:t.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),Pk(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(t){return t=this.toSeconds(t),this.voice0.envelope.getValueAtTime(t)+this.voice1.envelope.getValueAtTime(t)}static getDefaults(){return fk(vT.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:fk(yk(CT.getDefaults(),Object.keys(vT.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:fk(yk(CT.getDefaults(),Object.keys(vT.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(t,e){this.voice0._triggerEnvelopeAttack(t,e),this.voice1._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class ET extends bT{constructor(){super(mk(ET.getDefaults(),arguments)),this.name="FMSynth";const t=mk(ET.getDefaults(),arguments);this.modulationIndex=new $S({context:this.context,value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(bT.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const DT=[1,1.483,1.932,2.546,2.63,3.897];class MT extends vT{constructor(){super(mk(MT.getDefaults(),arguments)),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[];const t=mk(MT.getDefaults(),arguments);this.detune=new hS({context:this.context,units:"cents",value:t.detune}),this.frequency=new hS({context:this.context,units:"frequency"}),this._amplitude=new lS({context:this.context,gain:0}).connect(this.output),this._highpass=new ST({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let e=0;e<DT.length;e++){const n=new HS({context:this.context,harmonicity:t.harmonicity,modulationIndex:t.modulationIndex,modulationType:"square",onstop:0===e?()=>this.onsilence(this):Nk,type:"square"});n.connect(this._highpass),this._oscillators[e]=n;const s=new $S({context:this.context,value:DT[e]});this._freqMultipliers[e]=s,this.frequency.chain(s,n.frequency),this.detune.connect(n.detune)}this._filterFreqScaler=new tT({context:this.context,max:7e3,min:this.toFrequency(t.resonance)}),this.envelope=new mT({attack:t.envelope.attack,attackCurve:"linear",context:this.context,decay:t.envelope.decay,release:t.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=t.octaves,this.octaves=t.octaves}static getDefaults(){return fk(vT.getDefaults(),{envelope:Object.assign(yk(mT.getDefaults(),Object.keys(iS.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(t,e=1){return this.envelope.triggerAttack(t,e),this._oscillators.forEach(e=>e.start(t)),0===this.envelope.sustain&&this._oscillators.forEach(e=>{e.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(t){return this.envelope.triggerRelease(t),this._oscillators.forEach(e=>e.stop(t+this.toSeconds(this.envelope.release))),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(t){this._oscillators.forEach(e=>e.modulationIndex.value=t)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(t){this._oscillators.forEach(e=>e.harmonicity.value=t)}get resonance(){return this._filterFreqScaler.min}set resonance(t){this._filterFreqScaler.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}dispose(){return super.dispose(),this._oscillators.forEach(t=>t.dispose()),this._freqMultipliers.forEach(t=>t.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class OT extends xT{constructor(){super(mk(OT.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=mk(OT.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,Pk(this,["oscillator","envelope"])}static getDefaults(){return fk(vT.getDefaults(),xT.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const n=this.toSeconds(e),s=this.toFrequency(t instanceof Zk?t.toFrequency():t),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(s,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}ok([sT(0)],OT.prototype,"octaves",void 0),ok([iT(0)],OT.prototype,"pitchDecay",void 0);class RT extends yT{constructor(){super(mk(RT.getDefaults(),arguments)),this.name="NoiseSynth";const t=mk(RT.getDefaults(),arguments);this.noise=new VS(Object.assign({context:this.context},t.noise)),this.envelope=new _T(Object.assign({context:this.context},t.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(yT.getDefaults(),{envelope:Object.assign(yk(mT.getDefaults(),Object.keys(iS.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(yk(VS.getDefaults(),Object.keys(FS.getDefaults())),{type:"white"})})}triggerAttack(t,e=1){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.noise.start(t),0===this.envelope.sustain&&this.noise.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.noise.stop(t+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,n),this.triggerRelease(e+t),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const PT=new Set;function FT(t){PT.add(t)}function NT(t,e){const n=`registerProcessor("${t}", ${e})`;PT.add(n)}class VT extends iS{constructor(t){super(t),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=Nk;const e=URL.createObjectURL(new Blob([Array.from(PT).join("\n")],{type:"text/javascript"})),n=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(e).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(n,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}FT('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n'),FT("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n"),FT("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");const IT="feedback-comb-filter";NT(IT,'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class jT extends VT{constructor(){super(mk(jT.getDefaults(),arguments,["delayTime","resonance"])),this.name="FeedbackCombFilter";const t=mk(jT.getDefaults(),arguments,["delayTime","resonance"]);this.input=new lS({context:this.context}),this.output=new lS({context:this.context}),this.delayTime=new sS({context:this.context,value:t.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new sS({context:this.context,value:t.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),Pk(this,["resonance","delayTime"])}_audioWorkletName(){return IT}static getDefaults(){return Object.assign(iS.getDefaults(),{delayTime:.1,resonance:.5})}onReady(t){rS(this.input,t,this.output);const e=t.parameters.get("delayTime");this.delayTime.setParam(e);const n=t.parameters.get("feedback");this.resonance.setParam(n)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class qT extends iS{constructor(){super(mk(qT.getDefaults(),arguments,["frequency","type"])),this.name="OnePoleFilter";const t=mk(qT.getDefaults(),arguments,["frequency","type"]);this._frequency=t.frequency,this._type=t.type,this.input=new lS({context:this.context}),this.output=new lS({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(iS.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const t=this._filter,e=this.toFrequency(this._frequency),n=1/(2*Math.PI*e);if("lowpass"===this._type){const t=1/(n*this.context.sampleRate),e=t-1;this._filter=this.context.createIIRFilter([t,0],[1,e])}else{const t=1/(n*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,t])}this.input.chain(this._filter,this.output),t&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(t),t.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(t){this._frequency=t,this._createFilter()}get type(){return this._type}set type(t){this._type=t,this._createFilter()}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let i=0;i<t;i++){const n=19980*Math.pow(i/t,2)+20;e[i]=n}const n=new Float32Array(t),s=new Float32Array(t);return this._filter.getFrequencyResponse(e,n,s),n}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class LT extends iS{constructor(){super(mk(LT.getDefaults(),arguments,["delayTime","resonance","dampening"])),this.name="LowpassCombFilter";const t=mk(LT.getDefaults(),arguments,["delayTime","resonance","dampening"]);this._combFilter=this.output=new jT({context:this.context,delayTime:t.delayTime,resonance:t.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new qT({context:this.context,frequency:t.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(iS.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(t){this._lowpass.frequency=t}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class zT extends yT{constructor(){super(mk(zT.getDefaults(),arguments)),this.name="PluckSynth";const t=mk(zT.getDefaults(),arguments);this._noise=new VS({context:this.context,type:"pink"}),this.attackNoise=t.attackNoise,this._lfcf=new LT({context:this.context,dampening:t.dampening,resonance:t.resonance}),this.resonance=t.resonance,this.release=t.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return fk(yT.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(t){this._lfcf.dampening=t}triggerAttack(t,e){const n=this.toFrequency(t);e=this.toSeconds(e);const s=1/n;return this._lfcf.delayTime.setValueAtTime(s,e),this._noise.start(e),this._noise.stop(e+s*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(e),this._lfcf.resonance.setValueAtTime(this.resonance,e),this}triggerRelease(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class BT extends yT{constructor(){super(mk(BT.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=t=>this.releaseAll(t);const t=mk(BT.getDefaults(),arguments,["voice","options"]);Hw(!zw(t.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const e=t.voice.getDefaults();this.options=Object.assign(e,t.options),this.voice=t.voice,this.maxPolyphony=t.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const n=this._voices.indexOf(this._dummyVoice);this._voices.splice(n,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(yT.getDefaults(),{maxPolyphony:32,options:{},voice:xT})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(t){this._availableVoices.push(t);const e=this._activeVoices.findIndex(e=>e.voice===t);this._activeVoices.splice(e,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return Hw(t instanceof vT,"Voice must extend Monophonic class"),t.connect(this.output),this._voices.push(t),t}nk("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const t=this._availableVoices.shift(),e=this._voices.indexOf(t);this._voices.splice(e,1),this.context.isOffline||t.dispose()}}_triggerAttack(t,e,n){t.forEach(t=>{const s=new _S(this.context,t).toMidi(),i=this._getNextAvailableVoice();i&&(i.triggerAttack(t,e,n),this._activeVoices.push({midi:s,voice:i,released:!1}),this.log("triggerAttack",t,e))})}_triggerRelease(t,e){t.forEach(t=>{const n=new _S(this.context,t).toMidi(),s=this._activeVoices.find(({midi:t,released:e})=>t===n&&!e);s&&(s.voice.triggerRelease(e),s.released=!0,this.log("triggerRelease",t,e))})}_scheduleEvent(t,e,n,s){Hw(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===t?this._triggerAttack(e,n,s):this._triggerRelease(e,n):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(t,e,n,s)},n-this.now())}triggerAttack(t,e,n){Array.isArray(t)||(t=[t]);const s=this.toSeconds(e);return this._scheduleEvent("attack",t,s,n),this}triggerRelease(t,e){Array.isArray(t)||(t=[t]);const n=this.toSeconds(e);return this._scheduleEvent("release",t,n),this}triggerAttackRelease(t,e,n,s){const i=this.toSeconds(n);if(this.triggerAttack(t,i,s),Uw(e)){Hw(Uw(t),"If the duration is an array, the notes must also be an array");for(let n=0;n<t.length;n++){const s=e[Math.min(n,e.length-1)],r=this.toSeconds(s);Hw(r>0,"The duration must be greater than 0"),this.triggerRelease(t[n],i+r)}}else{const n=this.toSeconds(e);Hw(n>0,"The duration must be greater than 0"),this.triggerRelease(t,i+n)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(t){const e=yk(t,["onsilence","context"]);return this.options=fk(this.options,e),this._voices.forEach(t=>t.set(e)),this._dummyVoice.set(e),this}get(){return this._dummyVoice.get()}releaseAll(t){const e=this.toSeconds(t);return this._activeVoices.forEach(({voice:t})=>{t.triggerRelease(e)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(t=>t.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class WT extends yT{constructor(){super(mk(WT.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=mk(WT.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach(n=>{const s=parseInt(n,10);if(Hw(Gw(n)||zw(s)&&isFinite(s),`url key is neither a note or midi pitch: ${n}`),Gw(n)){const s=new Zk(this.context,n).toMidi();e[s]=t.urls[n]}else zw(s)&&isFinite(s)&&(e[s]=t.urls[s])}),this._buffers=new vS({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(yT.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Nk,onerror:Nk,release:.1,urls:{}})}_findClosest(t){let e=0;for(;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,n=1){return this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach(t=>{const s=Hk(new Zk(this.context,t).toFrequency()),i=Math.round(s),r=s-i,o=this._findClosest(i),a=i-o,l=this._buffers.get(a),u=Uk(o+r),c=new NS({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:u}).connect(this.output);c.start(e,0,l.duration/u,n),Uw(this._activeSources.get(i))||this._activeSources.set(i,[]),this._activeSources.get(i).push(c),c.onended=()=>{if(this._activeSources&&this._activeSources.has(i)){const t=this._activeSources.get(i),e=t.indexOf(c);-1!==e&&t.splice(e,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(t=>{const n=new Zk(this.context,t).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){const t=this._activeSources.get(n);e=this.toSeconds(e),t.forEach(t=>{t.stop(e)}),this._activeSources.set(n,[])}}),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach(t=>{for(;t.length;)t.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,n,s=1){const i=this.toSeconds(n);return this.triggerAttack(t,i,s),Uw(e)?(Hw(Uw(t),"notes must be an array when duration is array"),t.forEach((t,n)=>{const s=e[Math.min(n,e.length-1)];this.triggerRelease(t,i+this.toSeconds(s))})):this.triggerRelease(t,i+this.toSeconds(e)),this}add(t,e,n){if(Hw(Gw(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Gw(t)){const s=new Zk(this.context,t).toMidi();this._buffers.add(s,e,n)}else this._buffers.add(t,e,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}ok([iT(0)],WT.prototype,"attack",void 0),ok([iT(0)],WT.prototype,"release",void 0);class UT extends eS{constructor(){super(mk(UT.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new nS("stopped"),this._startOffset=0;const t=mk(UT.getDefaults(),arguments,["callback","value"]);this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(eS.getDefaults(),{callback:Nk,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,t=>{let e;if("started"===t.state){-1!==t.id&&this.context.transport.clear(t.id);const n=t.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||zw(this._loop)&&this._loop>1){e=1/0,zw(this._loop)&&(e=this._loop*this._getLoopDuration());const s=this._state.getAfter(n);null!==s&&(e=Math.min(e,s.time-n)),e!==1/0&&(e=new xS(this.context,e));const i=new xS(this.context,this._getLoopDuration());t.id=this.context.transport.scheduleRepeat(this._tick.bind(this),i,new xS(this.context,n),e)}else t.id=this.context.transport.schedule(this._tick.bind(this),new xS(this.context,n))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);const e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});const t=this._state.getBefore(e);let n=e;null!==t&&(n=t.time),this._rescheduleEvents(n)}return this}cancel(t){t=gk(t,-1/0);const e=this.toTicks(t);return this._state.forEachFrom(e,t=>{this.context.transport.clear(t.id)}),this._state.cancel(e),this}_tick(t){const e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let e=.02;Ww(this.humanize)||(e=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*e}this.callback(t,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new xS(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new xS(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){const n=this._getLoopDuration();return(t-e.time)%n/n}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class $T extends eS{constructor(){super(mk($T.getDefaults(),arguments,["callback","interval"])),this.name="Loop";const t=mk($T.getDefaults(),arguments,["callback","interval"]);this._event=new UT({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:t.interval,playbackRate:t.playbackRate,probability:t.probability,humanize:t.humanize}),this.callback=t.callback,this.iterations=t.iterations}static getDefaults(){return Object.assign(eS.getDefaults(),{interval:"4n",callback:Nk,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(t){return this._event.start(t),this}stop(t){return this._event.stop(t),this}cancel(t){return this._event.cancel(t),this}_tick(t){this.callback(t)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(t){this._event.loopEnd=t}get playbackRate(){return this._event.playbackRate}set playbackRate(t){this._event.playbackRate=t}get humanize(){return this._event.humanize}set humanize(t){this._event.humanize=t}get probability(){return this._event.probability}set probability(t){this._event.probability=t}get mute(){return this._event.mute}set mute(t){this._event.mute=t}get iterations(){return!0===this._event.loop?1/0:this._event.loop}set iterations(t){this._event.loop=t===1/0||t}dispose(){return super.dispose(),this._event.dispose(),this}}class GT extends UT{constructor(){super(mk(GT.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new nS("stopped"),this._events=new Set;const t=mk(GT.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,t.events.forEach(t=>{Uw(t)?this.add(t[0],t[1]):this.add(t)})}static getDefaults(){return Object.assign(UT.getDefaults(),{events:[]})}start(t,e){const n=this.toTicks(t);if("started"!==this._state.getValueAtTime(n)){e=gk(e,this._loop?this._loopStart:0),e=this._loop?gk(e,this._loopStart):gk(e,0);const t=this.toTicks(e);this._state.add({id:-1,offset:t,state:"started",time:n}),this._forEach(e=>{this._startNote(e,n,t)})}return this}_startNote(t,e,n){e-=n,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<n&&(e+=this._getLoopDuration()),t.start(new xS(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=n&&(t.loop=!1,t.start(new xS(this.context,e))):t.startOffset>=n&&t.start(new xS(this.context,e))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach(t=>{t.startOffset+=this._startOffset})}stop(t){const e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach(e=>{e.stop(t)}),this}at(t,e){const n=new tS(this.context,t).toTicks(),s=new xS(this.context,1).toSeconds(),i=this._events.values();let r=i.next();for(;!r.done;){const t=r.value;if(Math.abs(n-t.startOffset)<s)return qw(e)&&(t.value=e),t;r=i.next()}return qw(e)?(this.add(t,e),this.at(t)):null}add(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);const n=this.toTicks(t);let s;return e instanceof UT?(s=e,s.callback=this._tick.bind(this)):s=new UT({callback:this._tick.bind(this),context:this.context,value:e}),s.startOffset=n,s.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(s),this._restartEvent(s),this}_restartEvent(t){this._state.forEach(e=>{"started"===e.state?this._startNote(t,e.time,e.offset):t.stop(new xS(this.context,e.time))})}remove(t,e){return Bw(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach(n=>{n.startOffset===t&&(jw(e)||qw(e)&&n.value===e)&&(this._events.delete(n),n.dispose())}),this}clear(){return this._forEach(t=>t.dispose()),this._events.clear(),this}cancel(t){return this._forEach(e=>e.cancel(t)),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events&&this._events.forEach(e=>{e instanceof GT?e._forEach(t):t(e)}),this}_setAll(t,e){this._forEach(n=>{n[t]=e})}_tick(t,e){this.mute||this.callback(t,e)}_testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll("probability",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll("humanize",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach(e=>{e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.loop=t,this._testLoopBoundries(e)})}get loopEnd(){return new xS(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(e=>{e.loopEnd=t,this._testLoopBoundries(e)})}get loopStart(){return new xS(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(t=>{t.loopStart=this.loopStart,this._testLoopBoundries(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll("playbackRate",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*HT(t){let e=0;for(;e<t;)e=Sk(e,0,t-1),yield e,e++}function*QT(t){let e=t-1;for(;e>=0;)e=Sk(e,0,t-1),yield e,e--}function*YT(t,e){for(;;)yield*e(t)}function*XT(t,e){let n=e?0:t-1;for(;;)n=Sk(n,0,t-1),yield n,e?(n++,n>=t-1&&(e=!1)):(n--,n<=0&&(e=!0))}function*ZT(t){let e=0,n=0;for(;e<t;)e=Sk(e,0,t-1),yield e,n++,e+=n%2?2:-1}function*KT(t){let e=t-1,n=0;for(;e>=0;)e=Sk(e,0,t-1),yield e,n++,e+=n%2?-2:1}function*JT(t){const e=[];for(let n=0;n<t;n++)e.push(n);for(;e.length>0;){const n=Sk(e.splice(Math.floor(e.length*Math.random()),1)[0],0,t-1);yield n}}function*tC(t,e="up",n=0){switch(Hw(t>=1,"The number of values must be at least one"),e){case"up":yield*YT(t,HT);case"down":yield*YT(t,QT);case"upDown":yield*XT(t,!0);case"downUp":yield*XT(t,!1);case"alternateUp":yield*YT(t,ZT);case"alternateDown":yield*YT(t,KT);case"random":yield*function*(t){for(;;){const e=Math.floor(Math.random()*t);yield e}}(t);case"randomOnce":yield*YT(t,JT);case"randomWalk":yield*function*(t){let e=Math.floor(Math.random()*t);for(;;)0===e?e++:e===t-1||Math.random()<.5?e--:e++,yield e}(t)}}class eC extends $T{constructor(){super(mk(eC.getDefaults(),arguments,["callback","values","pattern"])),this.name="Pattern";const t=mk(eC.getDefaults(),arguments,["callback","values","pattern"]);this.callback=t.callback,this._values=t.values,this._pattern=tC(t.values.length,t.pattern),this._type=t.pattern}static getDefaults(){return Object.assign($T.getDefaults(),{pattern:"up",values:[],callback:Nk})}_tick(t){const e=this._pattern.next();this._index=e.value,this._value=this._values[e.value],this.callback(t,this._value)}get values(){return this._values}set values(t){this._values=t,this.pattern=this._type}get value(){return this._value}get index(){return this._index}get pattern(){return this._type}set pattern(t){this._type=t,this._pattern=tC(this._values.length,this._type)}}class nC extends UT{constructor(){super(mk(nC.getDefaults(),arguments,["callback","events","subdivision"])),this.name="Sequence",this._part=new GT({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[];const t=mk(nC.getDefaults(),arguments,["callback","events","subdivision"]);this._subdivision=this.toTicks(t.subdivision),this.events=t.events,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.playbackRate=t.playbackRate,this.probability=t.probability,this.humanize=t.humanize,this.mute=t.mute,this.playbackRate=t.playbackRate}static getDefaults(){return Object.assign(yk(UT.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(t,e){null===e||this.mute||this.callback(t,e)}get events(){return this._events}set events(t){this.clear(),this._eventsArray=t,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(t,e){return this._part.start(t,e?this._indexTime(e):e),this}stop(t){return this._part.stop(t),this}get subdivision(){return new xS(this.context,this._subdivision).toSeconds()}_createSequence(t){return new Proxy(t,{get:(t,e)=>t[e],set:(t,e,n)=>($w(e)&&isFinite(parseInt(e,10))&&Uw(n)?t[e]=this._createSequence(n):t[e]=n,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(t,e,n){t.forEach((t,s)=>{const i=s*e+n;if(Uw(t))this._rescheduleSequence(t,e/t.length,i);else{const e=new xS(this.context,i,"i").toSeconds();this._part.add(e,t)}})}_indexTime(t){return new xS(this.context,t*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(t){this._part.loop=t}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this._part.loopStart=this._indexTime(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this._part.loopEnd=0===t?this._indexTime(this._eventsArray.length):this._indexTime(t)}get startOffset(){return this._part.startOffset}set startOffset(t){this._part.startOffset=t}get playbackRate(){return this._part.playbackRate}set playbackRate(t){this._part.playbackRate=t}get probability(){return this._part.probability}set probability(t){this._part.probability=t}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(t){this._part.humanize=t}get length(){return this._part.length}}class sC extends iS{constructor(){super(Object.assign(mk(sC.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new uT({context:this.context}),this.a=new lS({context:this.context,gain:0}),this.b=new lS({context:this.context,gain:0}),this.output=new lS({context:this.context}),this._internalChannels=[this.a,this.b];const t=mk(sC.getDefaults(),arguments,["fade"]);this.fade=new hS({context:this.context,units:"normalRange",value:t.fade}),Pk(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",oS(this._split,this.a.gain,0),oS(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(iS.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class iC extends iS{constructor(t){super(t),this.name="Effect",this._dryWet=new sC({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new lS({context:this.context}),this.effectReturn=new lS({context:this.context}),this.input=new lS({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(t.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Pk(this,"wet")}static getDefaults(){return Object.assign(iS.getDefaults(),{wet:1})}connectEffect(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class rC extends iC{constructor(t){super(t),this.name="LFOEffect",this._lfo=new nT({context:this.context,frequency:t.frequency,amplitude:t.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=t.type,Pk(this,["frequency","depth"])}static getDefaults(){return Object.assign(iC.getDefaults(),{frequency:1,type:"sine",depth:1})}start(t){return this._lfo.start(t),this}stop(t){return this._lfo.stop(t),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class oC extends rC{constructor(){super(mk(oC.getDefaults(),arguments,["frequency","baseFrequency","octaves"])),this.name="AutoFilter";const t=mk(oC.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);this.filter=new ST(Object.assign(t.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=t.octaves,this.baseFrequency=t.baseFrequency}static getDefaults(){return Object.assign(rC.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._lfo.max=this._lfo.min*Math.pow(2,t)}dispose(){return super.dispose(),this.filter.dispose(),this}}class aC extends iS{constructor(){super(Object.assign(mk(aC.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=mk(aC.getDefaults(),arguments,["pan"]);this.pan=new sS({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",Pk(this,"pan")}static getDefaults(){return Object.assign(iS.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class lC extends rC{constructor(){super(mk(lC.getDefaults(),arguments,["frequency"])),this.name="AutoPanner";const t=mk(lC.getDefaults(),arguments,["frequency"]);this._panner=new aC({context:this.context,channelCount:t.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(rC.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class uC extends iS{constructor(){super(mk(uC.getDefaults(),arguments,["smoothing"])),this.name="Follower";const t=mk(uC.getDefaults(),arguments,["smoothing"]);this._abs=this.input=new lT({context:this.context}),this._lowpass=this.output=new qT({context:this.context,frequency:1/this.toSeconds(t.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=t.smoothing}static getDefaults(){return Object.assign(iS.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(t){this._smoothing=t,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class cC extends iC{constructor(){super(mk(cC.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"])),this.name="AutoWah";const t=mk(cC.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);this._follower=new uC({context:this.context,smoothing:t.follower}),this._sweepRange=new fT({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this._inputBoost=new lS({context:this.context}),this._bandpass=new ST({context:this.context,rolloff:-48,frequency:0,Q:t.Q}),this._peaking=new ST({context:this.context,type:"peaking"}),this._peaking.gain.value=t.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=t.sensitivity,Pk(this,["gain","Q"])}static getDefaults(){return Object.assign(iC.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(t){this._follower.smoothing=t}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._setSweepRange()}get sensitivity(){return Wk(1/this._inputBoost.gain.value)}set sensitivity(t){this._inputBoost.gain.value=1/Bk(t)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}const hC="bit-crusher";NT(hC,"\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class dC extends iC{constructor(){super(mk(dC.getDefaults(),arguments,["bits"])),this.name="BitCrusher";const t=mk(dC.getDefaults(),arguments,["bits"]);this._bitCrusherWorklet=new pC({context:this.context,bits:t.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(iC.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class pC extends VT{constructor(){super(mk(pC.getDefaults(),arguments)),this.name="BitCrusherWorklet";const t=mk(pC.getDefaults(),arguments);this.input=new lS({context:this.context}),this.output=new lS({context:this.context}),this.bits=new sS({context:this.context,value:t.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(VT.getDefaults(),{bits:12})}_audioWorkletName(){return hC}onReady(t){rS(this.input,t,this.output);const e=t.parameters.get("bits");this.bits.setParam(e)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class fC extends iC{constructor(){super(mk(fC.getDefaults(),arguments,["order"])),this.name="Chebyshev";const t=mk(fC.getDefaults(),arguments,["order"]);this._shaper=new DS({context:this.context,length:4096}),this._order=t.order,this.connectEffect(this._shaper),this.order=t.order,this.oversample=t.oversample}static getDefaults(){return Object.assign(iC.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(t,e,n){return n.has(e)||(0===e?n.set(e,0):1===e?n.set(e,t):n.set(e,2*t*this._getCoefficient(t,e-1,n)-this._getCoefficient(t,e-2,n))),n.get(e)}get order(){return this._order}set order(t){Hw(Number.isInteger(t),"'order' must be an integer"),this._order=t,this._shaper.setMap(e=>this._getCoefficient(e,t,new Map))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class mC extends iS{constructor(){super(mk(mC.getDefaults(),arguments,["channels"])),this.name="Split";const t=mk(mC.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(iS.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class gC extends iS{constructor(){super(mk(gC.getDefaults(),arguments,["channels"])),this.name="Merge";const t=mk(gC.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(t.channels)}static getDefaults(){return Object.assign(iS.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class yC extends iS{constructor(t){super(t),this.name="StereoEffect",this.input=new lS({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new sC({context:this.context,fade:t.wet}),this.wet=this._dryWet.fade,this._split=new mC({context:this.context,channels:2}),this._merge=new gC({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Pk(this,["wet"])}connectEffectLeft(...t){this._split.connect(t[0],0,0),rS(...t),oS(t[t.length-1],this._merge,0,0)}connectEffectRight(...t){this._split.connect(t[0],1,0),rS(...t),oS(t[t.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(iS.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class vC extends yC{constructor(t){super(t),this.feedback=new hS({context:this.context,value:t.feedback,units:"normalRange"}),this._feedbackL=new lS({context:this.context}),this._feedbackR=new lS({context:this.context}),this._feedbackSplit=new mC({context:this.context,channels:2}),this._feedbackMerge=new gC({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Pk(this,["feedback"])}static getDefaults(){return Object.assign(yC.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class _C extends vC{constructor(){super(mk(_C.getDefaults(),arguments,["frequency","delayTime","depth"])),this.name="Chorus";const t=mk(_C.getDefaults(),arguments,["frequency","delayTime","depth"]);this._depth=t.depth,this._delayTime=t.delayTime/1e3,this._lfoL=new nT({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new nT({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._delayNodeL=new yS({context:this.context}),this._delayNodeR=new yS({context:this.context}),this.frequency=this._lfoL.frequency,Pk(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=t.type,this.spread=t.spread}static getDefaults(){return Object.assign(vC.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(t){this._depth=t;const e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}get delayTime(){return 1e3*this._delayTime}set delayTime(t){this._delayTime=t/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class xC extends iC{constructor(){super(mk(xC.getDefaults(),arguments,["distortion"])),this.name="Distortion";const t=mk(xC.getDefaults(),arguments,["distortion"]);this._shaper=new DS({context:this.context,length:4096}),this._distortion=t.distortion,this.connectEffect(this._shaper),this.distortion=t.distortion,this.oversample=t.oversample}static getDefaults(){return Object.assign(iC.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(t){this._distortion=t;const e=100*t,n=Math.PI/180;this._shaper.setMap(t=>Math.abs(t)<.001?0:(3+e)*t*20*n/(Math.PI+e*Math.abs(t)))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class bC extends iC{constructor(t){super(t),this.name="FeedbackEffect",this._feedbackGain=new lS({context:this.context,gain:t.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,Pk(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(iC.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class wC extends bC{constructor(){super(mk(wC.getDefaults(),arguments,["delayTime","feedback"])),this.name="FeedbackDelay";const t=mk(wC.getDefaults(),arguments,["delayTime","feedback"]);this._delayNode=new yS({context:this.context,delayTime:t.delayTime,maxDelay:t.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),Pk(this,"delayTime")}static getDefaults(){return Object.assign(bC.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class kC extends iS{constructor(t){super(t),this.name="PhaseShiftAllpass",this.input=new lS({context:this.context}),this.output=new lS({context:this.context}),this.offset90=new lS({context:this.context}),this._bank0=this._createAllPassFilterBank([.6923878,.9360654322959,.988229522686,.9987488452737]),this._bank1=this._createAllPassFilterBank([.4021921162426,.856171088242,.9722909545651,.9952884791278]),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),rS(this.input,...this._bank0,this._oneSampleDelay,this.output),rS(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(t){return t.map(t=>{const e=[[t*t,0,-1],[1,0,-t*t]];return this.context.createIIRFilter(e[0],e[1])})}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach(t=>t.disconnect()),this._bank1.forEach(t=>t.disconnect()),this._oneSampleDelay.disconnect(),this}}class SC extends iC{constructor(){super(mk(SC.getDefaults(),arguments,["frequency"])),this.name="FrequencyShifter";const t=mk(SC.getDefaults(),arguments,["frequency"]);this.frequency=new hS({context:this.context,units:"frequency",value:t.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new BS({context:this.context,type:"sine"}),this._cosine=new WS({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new $S({context:this.context}),this._cosineMultiply=new $S({context:this.context}),this._negate=new cT({context:this.context}),this._add=new JS({context:this.context}),this._phaseShifter=new kC({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const e=this.immediate();this._sine.start(e),this._cosine.start(e)}static getDefaults(){return Object.assign(iC.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}const TC=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],CC=[225,556,441,341];class AC extends yC{constructor(){super(mk(AC.getDefaults(),arguments,["roomSize","dampening"])),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];const t=mk(AC.getDefaults(),arguments,["roomSize","dampening"]);this.roomSize=new hS({context:this.context,value:t.roomSize,units:"normalRange"}),this._allpassFiltersL=CC.map(t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e}),this._allpassFiltersR=CC.map(t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e}),this._combFilters=TC.map((e,n)=>{const s=new LT({context:this.context,dampening:t.dampening,delayTime:e});return n<TC.length/2?this.connectEffectLeft(s,...this._allpassFiltersL):this.connectEffectRight(s,...this._allpassFiltersR),this.roomSize.connect(s.resonance),s}),Pk(this,["roomSize"])}static getDefaults(){return Object.assign(yC.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(t){this._combFilters.forEach(e=>e.dampening=t)}dispose(){return super.dispose(),this._allpassFiltersL.forEach(t=>t.disconnect()),this._allpassFiltersR.forEach(t=>t.disconnect()),this._combFilters.forEach(t=>t.dispose()),this.roomSize.dispose(),this}}const EC=[.06748,.06404,.08212,.09004],DC=[.773,.802,.753,.733],MC=[347,113,37];class OC extends yC{constructor(){super(mk(OC.getDefaults(),arguments,["roomSize"])),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[];const t=mk(OC.getDefaults(),arguments,["roomSize"]);this.roomSize=new hS({context:this.context,value:t.roomSize,units:"normalRange"}),this._scaleRoomSize=new tT({context:this.context,min:-.733,max:.197}),this._allpassFilters=MC.map(t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e}),this._feedbackCombFilters=EC.map((t,e)=>{const n=new jT({context:this.context,delayTime:t});return this._scaleRoomSize.connect(n.resonance),n.resonance.value=DC[e],e<EC.length/2?this.connectEffectLeft(...this._allpassFilters,n):this.connectEffectRight(...this._allpassFilters,n),n}),this.roomSize.connect(this._scaleRoomSize),Pk(this,["roomSize"])}static getDefaults(){return Object.assign(yC.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach(t=>t.disconnect()),this._feedbackCombFilters.forEach(t=>t.dispose()),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class RC extends vC{constructor(t){super(t),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),Pk(this,["feedback"])}}class PC extends RC{constructor(){super(mk(PC.getDefaults(),arguments,["delayTime","feedback"])),this.name="PingPongDelay";const t=mk(PC.getDefaults(),arguments,["delayTime","feedback"]);this._leftDelay=new yS({context:this.context,maxDelay:t.maxDelay}),this._rightDelay=new yS({context:this.context,maxDelay:t.maxDelay}),this._rightPreDelay=new yS({context:this.context,maxDelay:t.maxDelay}),this.delayTime=new hS({context:this.context,units:"time",value:t.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),Pk(this,["delayTime"])}static getDefaults(){return Object.assign(RC.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class FC extends bC{constructor(){super(mk(FC.getDefaults(),arguments,["pitch"])),this.name="PitchShift";const t=mk(FC.getDefaults(),arguments,["pitch"]);this._frequency=new hS({context:this.context}),this._delayA=new yS({maxDelay:1,context:this.context}),this._lfoA=new nT({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new yS({maxDelay:1,context:this.context}),this._lfoB=new nT({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new sC({context:this.context}),this._crossFadeLFO=new nT({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new yS({delayTime:t.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,Pk(this,"delayTime"),this._pitch=t.pitch,this._windowSize=t.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const e=this.now();this._lfoA.start(e),this._lfoB.start(e),this._crossFadeLFO.start(e),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(bC.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(t){this._pitch=t;let e=0;t<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,e=Uk(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,e=Uk(t)-1),this._frequency.value=e*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class NC extends yC{constructor(){super(mk(NC.getDefaults(),arguments,["frequency","octaves","baseFrequency"])),this.name="Phaser";const t=mk(NC.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);this._lfoL=new nT({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new nT({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this.Q=new hS({context:this.context,value:t.Q,units:"positive"}),this._filtersL=this._makeFilters(t.stages,this._lfoL),this._filtersR=this._makeFilters(t.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=t.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=t.baseFrequency,this.octaves=t.octaves,this._lfoL.start(),this._lfoR.start(),Pk(this,["frequency","Q"])}static getDefaults(){return Object.assign(yC.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(t,e){const n=[];for(let s=0;s<t;s++){const t=this.context.createBiquadFilter();t.type="allpass",this.Q.connect(t.Q),e.connect(t.frequency),n.push(t)}return n}get octaves(){return this._octaves}set octaves(t){this._octaves=t;const e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(t=>t.disconnect()),this._filtersR.forEach(t=>t.disconnect()),this.frequency.dispose(),this}}class VC extends iC{constructor(){super(mk(VC.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const t=mk(VC.getDefaults(),arguments,["decay"]);this._decay=t.decay,this._preDelay=t.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(iC.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(t){Qw(t=this.toSeconds(t),.001),this._decay=t,this.generate()}get preDelay(){return this._preDelay}set preDelay(t){Qw(t=this.toSeconds(t),0),this._preDelay=t,this.generate()}generate(){return ak(this,void 0,void 0,function*(){const t=this.ready,e=new Ik(2,this._decay+this._preDelay,this.context.sampleRate),n=new VS({context:e}),s=new VS({context:e}),i=new gC({context:e});n.connect(i,0,0),s.connect(i,0,1);const r=new lS({context:e}).toDestination();i.connect(r),n.start(0),s.start(0),r.gain.setValueAtTime(0,0),r.gain.setValueAtTime(1,this._preDelay),r.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const o=e.render();return this.ready=o.then(Nk),yield t,this._convolver.buffer=(yield o).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class IC extends iS{constructor(){super(mk(IC.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new mC({channels:2,context:this.context}),this._midAdd=new JS({context:this.context}),this.mid=new $S({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new hT({context:this.context}),this.side=new $S({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class jC extends iS{constructor(){super(mk(jC.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new lS({context:this.context}),this.side=new lS({context:this.context}),this._left=new JS({context:this.context}),this._leftMult=new $S({context:this.context,value:Math.SQRT1_2}),this._right=new hT({context:this.context}),this._rightMult=new $S({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new gC({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class qC extends iC{constructor(t){super(t),this.name="MidSideEffect",this._midSideMerge=new jC({context:this.context}),this._midSideSplit=new IC({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...t){this._midSend.chain(...t,this._midReturn)}connectEffectSide(...t){this._sideSend.chain(...t,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class LC extends qC{constructor(){super(mk(LC.getDefaults(),arguments,["width"])),this.name="StereoWidener";const t=mk(LC.getDefaults(),arguments,["width"]);this.width=new hS({context:this.context,value:t.width,units:"normalRange"}),Pk(this,["width"]),this._twoTimesWidthMid=new $S({context:this.context,value:2}),this._twoTimesWidthSide=new $S({context:this.context,value:2}),this._midMult=new $S({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new hT({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),oS(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new $S({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(qC.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class zC extends yC{constructor(){super(mk(zC.getDefaults(),arguments,["frequency","depth"])),this.name="Tremolo";const t=mk(zC.getDefaults(),arguments,["frequency","depth"]);this._lfoL=new nT({context:this.context,type:t.type,min:1,max:0}),this._lfoR=new nT({context:this.context,type:t.type,min:1,max:0}),this._amplitudeL=new lS({context:this.context}),this._amplitudeR=new lS({context:this.context}),this.frequency=new hS({context:this.context,value:t.frequency,units:"frequency"}),this.depth=new hS({context:this.context,value:t.depth,units:"normalRange"}),Pk(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=t.spread}static getDefaults(){return Object.assign(yC.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class BC extends iC{constructor(){super(mk(BC.getDefaults(),arguments,["frequency","depth"])),this.name="Vibrato";const t=mk(BC.getDefaults(),arguments,["frequency","depth"]);this._delayNode=new yS({context:this.context,delayTime:0,maxDelay:t.maxDelay}),this._lfo=new nT({context:this.context,type:t.type,min:0,max:t.maxDelay,frequency:t.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=t.depth,Pk(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(iC.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class WC extends iS{constructor(){super(mk(WC.getDefaults(),arguments,["type","size"])),this.name="Analyser",this._analysers=[],this._buffers=[];const t=mk(WC.getDefaults(),arguments,["type","size"]);this.input=this.output=this._gain=new lS({context:this.context}),this._split=new mC({context:this.context,channels:t.channels}),this.input.connect(this._split),Qw(t.channels,1);for(let e=0;e<t.channels;e++)this._analysers[e]=this.context.createAnalyser(),this._split.connect(this._analysers[e],e,0);this.size=t.size,this.type=t.type,this.smoothing=t.smoothing}static getDefaults(){return Object.assign(iS.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((t,e)=>{const n=this._buffers[e];"fft"===this._type?t.getFloatFrequencyData(n):"waveform"===this._type&&t.getFloatTimeDomainData(n)}),1===this.channels?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(t){this._analysers.forEach((e,n)=>{e.fftSize=2*t,this._buffers[n]=new Float32Array(t)})}get channels(){return this._analysers.length}get type(){return this._type}set type(t){Hw("waveform"===t||"fft"===t,`Analyser: invalid type: ${t}`),this._type=t}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(t){this._analysers.forEach(e=>e.smoothingTimeConstant=t)}dispose(){return super.dispose(),this._analysers.forEach(t=>t.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class UC extends iS{constructor(){super(mk(UC.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new WC({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class $C extends UC{constructor(){super(mk($C.getDefaults(),arguments,["smoothing"])),this.name="Meter";const t=mk($C.getDefaults(),arguments,["smoothing"]);this.input=this.output=this._analyser=new WC({context:this.context,size:256,type:"waveform",channels:t.channelCount}),this.smoothing=t.smoothing,this.normalRange=t.normalRange,this._rms=new Array(t.channelCount),this._rms.fill(0)}static getDefaults(){return Object.assign(UC.getDefaults(),{smoothing:.8,normalRange:!1,channelCount:1})}getLevel(){return nk("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const t=this._analyser.getValue(),e=(1===this.channels?[t]:t).map((t,e)=>{const n=t.reduce((t,e)=>t+e*e,0),s=Math.sqrt(n/t.length);return this._rms[e]=Math.max(s,this._rms[e]*this.smoothing),this.normalRange?this._rms[e]:Wk(this._rms[e])});return 1===this.channels?e[0]:e}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class GC extends UC{constructor(){super(mk(GC.getDefaults(),arguments,["size"])),this.name="FFT";const t=mk(GC.getDefaults(),arguments,["size"]);this.normalRange=t.normalRange,this._analyser.type="fft",this.size=t.size}static getDefaults(){return Object.assign(iS.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map(t=>this.normalRange?Bk(t):t)}get size(){return this._analyser.size}set size(t){this._analyser.size=t}get smoothing(){return this._analyser.smoothing}set smoothing(t){this._analyser.smoothing=t}getFrequencyOfIndex(t){return Hw(0<=t&&t<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),t*this.context.sampleRate/(2*this.size)}}class HC extends UC{constructor(){super(mk(HC.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class QC extends UC{constructor(){super(mk(QC.getDefaults(),arguments,["size"])),this.name="Waveform";const t=mk(QC.getDefaults(),arguments,["size"]);this._analyser.type="waveform",this.size=t.size}static getDefaults(){return Object.assign(UC.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(t){this._analyser.size=t}}class YC extends iS{constructor(){super(mk(YC.getDefaults(),arguments,["solo"])),this.name="Solo";const t=mk(YC.getDefaults(),arguments,["solo"]);this.input=this.output=new lS({context:this.context}),YC._allSolos.has(this.context)||YC._allSolos.set(this.context,new Set),YC._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(iS.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),YC._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){YC._soloed.has(this.context)||YC._soloed.set(this.context,new Set),YC._soloed.get(this.context).add(this)}_removeSolo(){YC._soloed.has(this.context)&&YC._soloed.get(this.context).delete(this)}_isSoloed(){return YC._soloed.has(this.context)&&YC._soloed.get(this.context).has(this)}_noSolos(){return!YC._soloed.has(this.context)||YC._soloed.has(this.context)&&0===YC._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),YC._allSolos.get(this.context).delete(this),this._removeSolo(),this}}YC._allSolos=new Map,YC._soloed=new Map;class XC extends iS{constructor(){super(mk(XC.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=mk(XC.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new aC({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new TS({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,Pk(this,["pan","volume"])}static getDefaults(){return Object.assign(iS.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class ZC extends iS{constructor(){super(mk(ZC.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=mk(ZC.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new YC({solo:t.solo,context:this.context}),this._panVol=this.output=new XC({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Pk(this,["pan","volume"])}static getDefaults(){return Object.assign(iS.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return ZC.buses.has(t)||ZC.buses.set(t,new lS({context:this.context})),ZC.buses.get(t)}send(t,e=0){const n=this._getBus(t),s=new lS({context:this.context,units:"decibels",gain:e});return this.connect(s),s.connect(n),s}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}ZC.buses=new Map;class KC extends iS{constructor(){super(mk(KC.getDefaults(),arguments)),this.name="Mono",this.input=new lS({context:this.context}),this._merge=this.output=new gC({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}class JC extends iS{constructor(){super(mk(JC.getDefaults(),arguments,["lowFrequency","highFrequency"])),this.name="MultibandSplit",this.input=new lS({context:this.context}),this.output=void 0,this.low=new ST({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new ST({context:this.context,frequency:0,type:"highpass"}),this.mid=new ST({context:this.context,frequency:0,type:"lowpass"}),this.high=new ST({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high];const t=mk(JC.getDefaults(),arguments,["lowFrequency","highFrequency"]);this.lowFrequency=new hS({context:this.context,units:"frequency",value:t.lowFrequency}),this.highFrequency=new hS({context:this.context,units:"frequency",value:t.highFrequency}),this.Q=new hS({context:this.context,units:"positive",value:t.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),Pk(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(iS.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),Fk(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class tA extends iS{constructor(){super(...arguments),this.name="Listener",this.positionX=new sS({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new sS({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new sS({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new sS({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new sS({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new sS({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new sS({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new sS({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new sS({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(iS.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Ak(t=>{t.listener=new tA({context:t})}),Dk(t=>{t.listener.dispose()});class eA extends iS{constructor(){super(mk(eA.getDefaults(),arguments,["positionX","positionY","positionZ"])),this.name="Panner3D";const t=mk(eA.getDefaults(),arguments,["positionX","positionY","positionZ"]);this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=t.panningModel,this.maxDistance=t.maxDistance,this.distanceModel=t.distanceModel,this.coneOuterGain=t.coneOuterGain,this.coneOuterAngle=t.coneOuterAngle,this.coneInnerAngle=t.coneInnerAngle,this.refDistance=t.refDistance,this.rolloffFactor=t.rolloffFactor,this.positionX=new sS({context:this.context,param:this._panner.positionX,value:t.positionX}),this.positionY=new sS({context:this.context,param:this._panner.positionY,value:t.positionY}),this.positionZ=new sS({context:this.context,param:this._panner.positionZ,value:t.positionZ}),this.orientationX=new sS({context:this.context,param:this._panner.orientationX,value:t.orientationX}),this.orientationY=new sS({context:this.context,param:this._panner.orientationY,value:t.orientationY}),this.orientationZ=new sS({context:this.context,param:this._panner.orientationZ,value:t.orientationZ})}static getDefaults(){return Object.assign(iS.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(t,e,n){return this.positionX.value=t,this.positionY.value=e,this.positionZ.value=n,this}setOrientation(t,e,n){return this.orientationX.value=t,this.orientationY.value=e,this.orientationZ.value=n,this}get panningModel(){return this._panner.panningModel}set panningModel(t){this._panner.panningModel=t}get refDistance(){return this._panner.refDistance}set refDistance(t){this._panner.refDistance=t}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(t){this._panner.rolloffFactor=t}get distanceModel(){return this._panner.distanceModel}set distanceModel(t){this._panner.distanceModel=t}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(t){this._panner.coneInnerAngle=t}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(t){this._panner.coneOuterAngle=t}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(t){this._panner.coneOuterGain=t}get maxDistance(){return this._panner.maxDistance}set maxDistance(t){this._panner.maxDistance=t}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class nA extends iS{constructor(){super(mk(nA.getDefaults(),arguments)),this.name="Recorder";const t=mk(nA.getDefaults(),arguments);this.input=new lS({context:this.context}),Hw(nA.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:t.mimeType})}static getDefaults(){return iS.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return null!==ik&&Reflect.has(ik,"MediaRecorder")}get state(){return"inactive"===this._recorder.state?"stopped":"paused"===this._recorder.state?"paused":"started"}start(){return ak(this,void 0,void 0,function*(){Hw("started"!==this.state,"Recorder is already started");const t=new Promise(t=>{const e=()=>{this._recorder.removeEventListener("start",e,!1),t()};this._recorder.addEventListener("start",e,!1)});return this._recorder.start(),yield t})}stop(){return ak(this,void 0,void 0,function*(){Hw("stopped"!==this.state,"Recorder is not started");const t=new Promise(t=>{const e=n=>{this._recorder.removeEventListener("dataavailable",e,!1),t(n.data)};this._recorder.addEventListener("dataavailable",e,!1)});return this._recorder.stop(),yield t})}pause(){return Hw("started"===this.state,"Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class sA extends iS{constructor(){super(mk(sA.getDefaults(),arguments,["threshold","ratio"])),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor;const t=mk(sA.getDefaults(),arguments,["threshold","ratio"]);this.threshold=new sS({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:t.threshold}),this.attack=new sS({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:t.attack}),this.release=new sS({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:t.release}),this.knee=new sS({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:t.knee}),this.ratio=new sS({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:t.ratio}),Pk(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(iS.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class iA extends iS{constructor(){super(Object.assign(mk(iA.getDefaults(),arguments,["threshold","smoothing"]))),this.name="Gate";const t=mk(iA.getDefaults(),arguments,["threshold","smoothing"]);this._follower=new uC({context:this.context,smoothing:t.smoothing}),this._gt=new pT({context:this.context,value:Bk(t.threshold)}),this.input=new lS({context:this.context}),this._gate=this.output=new lS({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(iS.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return Wk(this._gt.value)}set threshold(t){this._gt.value=Bk(t)}get smoothing(){return this._follower.smoothing}set smoothing(t){this._follower.smoothing=t}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class rA extends iS{constructor(){super(Object.assign(mk(rA.getDefaults(),arguments,["threshold"]))),this.name="Limiter";const t=mk(rA.getDefaults(),arguments,["threshold"]);this._compressor=this.input=this.output=new sA({context:this.context,ratio:20,attack:.003,release:.01,threshold:t.threshold}),this.threshold=this._compressor.threshold,Pk(this,"threshold")}static getDefaults(){return Object.assign(iS.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class oA extends iS{constructor(){super(Object.assign(mk(oA.getDefaults(),arguments))),this.name="MidSideCompressor";const t=mk(oA.getDefaults(),arguments);this._midSideSplit=this.input=new IC({context:this.context}),this._midSideMerge=this.output=new jC({context:this.context}),this.mid=new sA(Object.assign(t.mid,{context:this.context})),this.side=new sA(Object.assign(t.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),Pk(this,["mid","side"])}static getDefaults(){return Object.assign(iS.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class aA extends iS{constructor(){super(Object.assign(mk(aA.getDefaults(),arguments))),this.name="MultibandCompressor";const t=mk(aA.getDefaults(),arguments);this._splitter=this.input=new JC({context:this.context,lowFrequency:t.lowFrequency,highFrequency:t.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new lS({context:this.context}),this.low=new sA(Object.assign(t.low,{context:this.context})),this.mid=new sA(Object.assign(t.mid,{context:this.context})),this.high=new sA(Object.assign(t.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),Pk(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(iS.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class lA extends iS{constructor(){super(mk(lA.getDefaults(),arguments,["low","mid","high"])),this.name="EQ3",this.output=new lS({context:this.context}),this._internalChannels=[];const t=mk(lA.getDefaults(),arguments,["low","mid","high"]);this.input=this._multibandSplit=new JC({context:this.context,highFrequency:t.highFrequency,lowFrequency:t.lowFrequency}),this._lowGain=new lS({context:this.context,gain:t.low,units:"decibels"}),this._midGain=new lS({context:this.context,gain:t.mid,units:"decibels"}),this._highGain=new lS({context:this.context,gain:t.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),Pk(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(iS.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),Fk(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class uA extends iS{constructor(){super(mk(uA.getDefaults(),arguments,["url","onload"])),this.name="Convolver",this._convolver=this.context.createConvolver();const t=mk(uA.getDefaults(),arguments,["url","onload"]);this._buffer=new Vk(t.url,e=>{this.buffer=e,t.onload()}),this.input=new lS({context:this.context}),this.output=new lS({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=t.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(iS.getDefaults(),{normalize:!0,onload:Nk})}load(t){return ak(this,void 0,void 0,function*(){this.buffer=yield this._buffer.load(t)})}get buffer(){return this._buffer.length?this._buffer:null}set buffer(t){t&&this._buffer.set(t),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const e=this._buffer.get();this._convolver.buffer=e||null}get normalize(){return this._convolver.normalize}set normalize(t){this._convolver.normalize=t}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}const cA=Lk().transport,hA=Lk().destination,dA=Lk().destination,pA=Lk().listener,fA=Lk().draw,mA=Lk(),gA=Vk,yA=vS,vA=NS,_A=Object.freeze(Object.defineProperty({__proto__:null,AMOscillator:GS,AMSynth:wT,Abs:lT,Add:JS,AmplitudeEnvelope:_T,Analyser:WC,AudioToGain:US,AutoFilter:oC,AutoPanner:lC,AutoWah:cC,BaseContext:Ok,BiquadFilter:kT,BitCrusher:dC,Buffer:gA,BufferSource:vA,Buffers:yA,Channel:ZC,Chebyshev:fC,Chorus:_C,Clock:gS,Compressor:sA,Context:Rk,Convolver:uA,CrossFade:sC,DCMeter:HC,Delay:yS,Destination:hA,Distortion:xC,Draw:fA,DuoSynth:AT,EQ3:lA,Emitter:Mk,Envelope:mT,FFT:GC,FMOscillator:HS,FMSynth:ET,FatOscillator:YS,FeedbackCombFilter:jT,FeedbackDelay:wC,Filter:ST,Follower:uC,Freeverb:AC,Frequency:function(t,e){return new Zk(Lk(),t,e)},FrequencyClass:Zk,FrequencyEnvelope:TT,FrequencyShifter:SC,Gain:lS,GainToAudio:uT,Gate:iA,GrainPlayer:aT,GreaterThan:pT,GreaterThanZero:dT,IntervalTimeline:wS,JCReverb:OC,LFO:nT,Limiter:rA,Listener:pA,Loop:$T,LowpassCombFilter:LT,Master:dA,MembraneSynth:OT,Merge:gC,MetalSynth:MT,Meter:$C,MidSideCompressor:oA,MidSideMerge:jC,MidSideSplit:IC,Midi:function(t,e){return new _S(Lk(),t,e)},MidiClass:_S,Mono:KC,MonoSynth:CT,MultibandCompressor:aA,MultibandSplit:JC,Multiply:$S,Negate:cT,Noise:VS,NoiseSynth:RT,Offline:function(t,e,n=2,s=Lk().sampleRate){return ak(this,void 0,void 0,function*(){const i=Lk(),r=new Ik(n,e,s);zk(r),yield t(r);const o=r.render();zk(i);const a=yield o;return new Vk(a)})},OfflineContext:Ik,OmniOscillator:KS,OnePoleFilter:qT,Oscillator:WS,PWMOscillator:XS,PanVol:XC,Panner:aC,Panner3D:eA,Param:sS,Part:GT,Pattern:eC,Phaser:NC,PingPongDelay:PC,PitchShift:FC,Player:rT,Players:oT,PluckSynth:zT,PolySynth:BT,Pow:MS,PulseOscillator:QS,Recorder:nA,Reverb:VC,Sampler:WT,Scale:tT,ScaleExp:fT,Sequence:nC,Signal:hS,Solo:YC,Split:mC,StateTimeline:nS,StereoWidener:LC,Subtract:hT,SyncedSignal:class extends hS{constructor(){super(mk(hS.getDefaults(),arguments,["value","units"])),this.name="SyncedSignal",this.override=!1;const t=mk(hS.getDefaults(),arguments,["value","units"]);this._lastVal=t.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new cS({context:this.context,offset:t.value,units:t.units}).start(0),this.setValueAtTime(t.value,0)}_onTick(t){const e=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==e&&(this._lastVal=e,this._constantSource.offset.setValueAtTime(e,t))}_anchorValue(t){const e=super.getValueAtTime(this.context.transport.seconds);this._lastVal=e,this._constantSource.offset.cancelAndHoldAtTime(t),this._constantSource.offset.setValueAtTime(e,t)}getValueAtTime(t){const e=new tS(this.context,t).toSeconds();return super.getValueAtTime(e)}setValueAtTime(t,e){const n=new tS(this.context,e).toSeconds();return super.setValueAtTime(t,n),this}linearRampToValueAtTime(t,e){const n=new tS(this.context,e).toSeconds();return super.linearRampToValueAtTime(t,n),this}exponentialRampToValueAtTime(t,e){const n=new tS(this.context,e).toSeconds();return super.exponentialRampToValueAtTime(t,n),this}setTargetAtTime(t,e,n){const s=new tS(this.context,e).toSeconds();return super.setTargetAtTime(t,s,n),this}cancelScheduledValues(t){const e=new tS(this.context,t).toSeconds();return super.cancelScheduledValues(e),this}setValueCurveAtTime(t,e,n,s){const i=new tS(this.context,e).toSeconds();return n=this.toSeconds(n),super.setValueCurveAtTime(t,i,n,s),this}cancelAndHoldAtTime(t){const e=new tS(this.context,t).toSeconds();return super.cancelAndHoldAtTime(e),this}setRampPoint(t){const e=new tS(this.context,t).toSeconds();return super.setRampPoint(e),this}exponentialRampTo(t,e,n){const s=new tS(this.context,n).toSeconds();return super.exponentialRampTo(t,e,s),this}linearRampTo(t,e,n){const s=new tS(this.context,n).toSeconds();return super.linearRampTo(t,e,s),this}targetRampTo(t,e,n){const s=new tS(this.context,n).toSeconds();return super.targetRampTo(t,e,s),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}},Synth:xT,Ticks:function(t,e){return new xS(Lk(),t,e)},TicksClass:xS,Time:function(t,e){return new Xk(Lk(),t,e)},TimeClass:Xk,Timeline:Tk,ToneAudioBuffer:Vk,ToneAudioBuffers:vS,ToneAudioNode:iS,ToneBufferSource:NS,ToneEvent:UT,ToneOscillatorNode:BS,Transport:cA,TransportTime:function(t,e){return new tS(Lk(),t,e)},TransportTimeClass:tS,Tremolo:zC,Unit:SS,UserMedia:LS,Vibrato:BC,Volume:TS,WaveShaper:DS,Waveform:QC,Zero:eT,connect:oS,connectSeries:rS,connectSignal:dS,context:mA,dbToGain:Bk,debug:sk,defaultArg:gk,disconnect:aS,fanIn:function(...t){const e=t.pop();qw(e)&&t.forEach(t=>oS(t,e))},ftom:Gk,gainToDb:Wk,getContext:Lk,getDestination:function(){return Lk().destination},getDraw:function(){return Lk().draw},getListener:function(){return Lk().listener},getTransport:function(){return Lk().transport},immediate:function(){return Lk().immediate()},intervalToFrequencyRatio:Uk,isArray:Uw,isBoolean:Ww,isDefined:qw,isFunction:Lw,isNote:Gw,isNumber:zw,isObject:Bw,isString:$w,isUndef:jw,loaded:function(){return Vk.loaded()},mtof:Qk,now:function(){return Lk().now()},optionsFromArguments:mk,setContext:zk,start:function(){return qk.resume()},supported:()=>(async(t,e,n,s,i,r,o,a,l,u,c,h,d,p,f,m)=>!!(t(e,e)&&t(n,n)&&t(i,i)&&t(r,r)&&t(a,a)&&t(l,l)&&t(u,u)&&t(c,c)&&t(h,h)&&t(d,d)&&t(p,p))&&(await Promise.all([t(s,s),t(o,o),t(f,f),t(m,m)])).every(t=>t))(kx,(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createBuffer(1,1,44100);if(void 0===e.copyToChannel)return!0;const n=new Float32Array(2);try{e.copyFromChannel(n,0,0)}catch{return!1}return!0})(Px),(t=>()=>{if(null===t)return!1;if(void 0!==t.prototype&&void 0!==t.prototype.close)return!0;const e=new t,n=void 0!==e.close;try{e.close()}catch{}return n})(Ix),(t=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100);return new Promise(t=>{let n=!0;const s=s=>{n&&(n=!1,e.startRendering(),t(s instanceof TypeError))};let i;try{i=e.decodeAudioData(null,()=>{},s)}catch(r){s(r)}void 0!==i&&i.catch(s)})})(Px),(t=>()=>{if(null===t)return!1;let e;try{e=new t({latencyHint:"balanced"})}catch{return!1}return e.close(),!0})(Ix),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createGain(),n=e.connect(e)===e;return e.disconnect(e),n})(Px),((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;const n=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new MessageChannel,i=new e(1,128,44100),r=URL.createObjectURL(n);let o=!1;try{await i.audioWorklet.addModule(r);const e=new t(i,"a",{numberOfOutputs:0}),n=i.createOscillator();await new Promise(t=>{e.port.onmessage=()=>t(),e.port.postMessage(s.port2,[s.port2])}),e.port.onmessage=()=>o=!0,n.connect(e),n.start(0),await i.startRendering(),o=await new Promise(t=>{s.port1.onmessage=({data:e})=>t(1===e),s.port1.postMessage(0)})}catch{}finally{s.port1.close(),URL.revokeObjectURL(r)}return o})(zx,Px),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createChannelMerger();if("max"===e.channelCountMode)return!0;try{e.channelCount=2}catch{return!0}return!1})(Px),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100);return void 0===e.createConstantSource||e.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY})(Px),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100),n=e.createConvolver();n.buffer=e.createBuffer(1,1,e.sampleRate);try{n.buffer=e.createBuffer(1,1,e.sampleRate)}catch{return!1}return!0})(Px),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createConvolver();try{e.channelCount=1}catch{return!1}return!0})(Px),fx,(t=>()=>null!==t&&t.hasOwnProperty("isSecureContext"))(Cx),(t=>()=>{if(null===t)return!1;const e=new t;try{return e.createMediaStreamSource(new MediaStream),!1}catch(n){return!0}finally{e.close()}})(Ix),(t=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100);if(void 0===e.createStereoPanner)return Promise.resolve(!0);if(void 0===e.createConstantSource)return Promise.resolve(!0);const n=e.createConstantSource(),s=e.createStereoPanner();return n.channelCount=1,n.offset.value=1,s.channelCount=1,n.start(),n.connect(s).connect(e.destination),e.startRendering().then(t=>1!==t.getChannelData(0)[0])})(Px),mx),version:Hy},Symbol.toStringTag,{value:"Module"}));window.Tone||(window.Tone=_A),"function"!=typeof structuredClone&&(globalThis.structuredClone=t=>JSON.parse(JSON.stringify(t)));const xA=(()=>{let t,e,n=!1,s={},i={},r=null,o=0,a=-6;const l={async initialize(){if(n||!window.Tone)return!1;try{return"running"!==window.Tone.context.state&&await window.Tone.start(),window.Tone.getContext().rawContext,window.Tone.context.lookAhead=.03,window.Tone.Transport.lookAhead=.03,(()=>{const n=window.Tone;n&&(t=new n.Channel({volume:a,pan:0}).toDestination(),e=new n.Channel({volume:0,pan:0}).toDestination())})(),(()=>{const t=window.Tone;if(!t)return;const n=new t.Reverb({decay:2,wet:.2}).connect(e),i=new t.Reverb({decay:.5,wet:.15}).connect(e);s.tick=new t.MembraneSynth({pitchDecay:.01,octaves:10,oscillator:{type:"sine"},envelope:{attack:.001,decay:.1,sustain:0,release:.1},volume:0}).connect(i),s.tickNoise=new t.NoiseSynth({noise:{type:"white"},envelope:{attack:.001,decay:.02,sustain:0},volume:-22}).connect(i),s.spinBlip=new t.Synth({oscillator:{type:"square"},envelope:{attack:.01,decay:.2,sustain:0}}).connect(n),s.spinNoise=new t.NoiseSynth({noise:{type:"white"},envelope:{attack:.01,decay:.5,sustain:0}}).connect(e);const r=new t.AutoFilter("8n",500,4).connect(n).start();s.spinNoise.connect(r),s.wheelStopChord=new t.PolySynth(t.Synth,{volume:-8,oscillator:{type:"fatsine"},envelope:{attack:.1,release:1}}).connect(n),s.wheelStopArp=new t.PluckSynth({dampening:6e3,resonance:.9,volume:-5}).connect(n),s.wheelStopArpSeq=new t.Sequence((t,e)=>{s.wheelStopArp.triggerAttack(e,t)},["C5","E5","G5","C6"],"16n");const o=new t.Filter(1e3,"highpass").connect(n);s.modalWhoosh=new t.NoiseSynth({noise:{type:"white"},envelope:{attack:.05,decay:.3,release:.5},volume:-20}).connect(o),s.modalShimmer=new t.MetalSynth({frequency:600,harmonicity:8,modulationIndex:20,envelope:{attack:.2,decay:.2},volume:-15}).connect(n),s.modalClose=new t.PluckSynth({dampening:4e3,volume:-5}).connect(n),s.correct=new t.PolySynth(t.Synth,{oscillator:{type:"triangle"},envelope:{attack:.01,decay:.3,release:.5},volume:-10}).connect(n),s.wrong=new t.Synth({oscillator:{type:"sawtooth"},envelope:{attack:.01,decay:.5,release:.5},volume:-10}).connect(n);const a=new t.Filter(200,"highpass").connect(n);s.extremeSwell=new t.NoiseSynth({noise:{type:"pink"},envelope:{attack:1.5,decay:.2,sustain:0,release:.2},volume:-15}).connect(a),s.extremeHit=new t.FMSynth({harmonicity:.5,modulationIndex:10,envelope:{attack:.01,decay:1,sustain:0,release:1},volume:-5}).connect(n),s.refuse=new t.Synth({oscillator:{type:"sine"},portamento:.2,envelope:{attack:.1,release:.5},volume:-8}).connect(n),s.uiConfirm=new t.Synth({oscillator:{type:"sine"},envelope:{attack:.01,decay:.1,sustain:0},volume:-15}).connect(e)})(),(()=>{const e=window.Tone;if(!e)return;const n=(t,n)=>{const s=new e.Part((e,n)=>{t.triggerAttackRelease(n.notes,n.duration,e)},n);return s.loop=!0,s.loopEnd=n.reduce((t,n)=>Math.max(t,e.Time(n.time).toSeconds()+e.Time(n.duration).toSeconds()),0),s},s=new e.Reverb({decay:5,wet:.5}).connect(t),r=new e.FeedbackDelay("8n.",.4).connect(s),o=new e.PolySynth(e.Synth,{oscillator:{type:"fatsawtooth"},envelope:{attack:2,decay:1,sustain:.5,release:3}}).connect(r),a=new e.FMSynth({harmonicity:.5,modulationIndex:5,envelope:{attack:.01,release:.5}}).connect(s);i.velourNights={bpm:85,parts:[n(o,[{time:"0:0",notes:["C3","E3","G3"],duration:"2m"},{time:"2:0",notes:["A2","C3","E3"],duration:"2m"}]),new e.Sequence((t,e)=>{a.triggerAttackRelease(e,"8n",t)},["C2","C2","C2","E2","A1","A1","A1","G1"],"4n")]};const l=new e.Reverb({decay:8,wet:.6}).connect(t),u=new e.PolySynth(e.Synth,{oscillator:{type:"triangle"},envelope:{attack:4,release:4},volume:-12}).connect(l),c=new e.MetalSynth({frequency:400,harmonicity:12,modulationIndex:20,envelope:{attack:.01,decay:1.5},volume:-15}).connect(l);i.lotusDreamscape={bpm:60,parts:[n(u,[{time:"0:0",notes:["C4","E4","G4"],duration:"1m"},{time:"1m:0",notes:["D4","F4","A4"],duration:"1m"}]),new e.Sequence((t,e)=>{c.triggerAttack(e,t)},[["C6","E6"],null,"G5",null,"D6",null,"A5",null],"2n")]};const h=new e.Reverb({decay:2,wet:.4}).connect(t),d=new e.PolySynth(e.MembraneSynth,{pitchDecay:.01,octaves:4,envelope:{attack:.005,decay:.3,sustain:0}}).connect(h),p=new e.Synth({oscillator:{type:"fmsquare"},envelope:{attack:.01,decay:.2,sustain:0}}).connect(h);i.velvetCarnival={bpm:110,parts:[new e.Pattern((t,e)=>{d.triggerAttackRelease(e,"8n",t)},["C4","E4","G4","A4","G4","E4"],"randomWalk"),new e.Sequence((t,e)=>{p.triggerAttackRelease(e,"16n",t)},["C2",null,"C2",["E2","D2"]],"8n")]};const f=new e.Distortion(.6).connect(t),m=new e.Synth({oscillator:{type:"sawtooth"},envelope:{attack:.01,decay:.5,release:.2}}).connect(f);i.crimsonFrenzy={bpm:120,parts:[new e.Sequence((t,e)=>{m.triggerAttackRelease(e,"16n",t)},["C2","C2","C2","C#2","C2","C2","C2","D#2"],"8n")]};const g=new e.Reverb({decay:10,wet:.7}).connect(t),y=new e.PolySynth(e.Synth,{oscillator:{type:"fatsine"},envelope:{attack:8,release:8},volume:-10}).connect(g),v=new e.FMSynth({harmonicity:3,modulationIndex:1.5,envelope:{attack:.01,decay:2,release:2},volume:-15}).connect(new e.FeedbackDelay("4n",.6).connect(g)),_=new e.Synth({oscillator:"sine",envelope:{attack:4,release:4},volume:-8}).connect(g);let x,b;i.starlitAbyss={bpm:60,parts:[n(y,[{time:"0:0",notes:["A2","C3","E3"],duration:"1m"},{time:"1m:0",notes:["G2","B2","D3"],duration:"1m"}]),new e.Sequence((t,e)=>{v.triggerAttackRelease(e,"2n",t)},["C5",null,"E5","G5",null,"D5",null,"B4"],"2n"),new e.Sequence((t,e)=>{_.triggerAttackRelease(e,"1m",t)},["A1","G1"],"1m")],init:()=>{x=new e.Noise("brown").start(),b=new e.AutoFilter({frequency:"8m",baseFrequency:100,octaves:2}).connect(t).start(),x.connect(b),x.volume.value=-25},cleanup:()=>{x&&"started"===x.state&&x.stop().dispose(),b&&b.started&&b.stop().dispose()}}})(),n=!0,!0}catch(r){return!1}},async startTheme(e){const s=window.Tone;if(!n||!s||!i[e])return;if("running"!==s.context.state&&await s.start(),"started"!==s.Transport.state&&s.Transport.start(),r&&r.name===e)return;const o=()=>{r&&(r.cleanup&&r.cleanup(),r.parts.forEach(t=>{t.stop&&t.stop(0),t.cancel&&t.cancel(0)})),r=i[e],r.name=e,s.Transport.bpm.value=r.bpm,r.init&&r.init(),r.parts.forEach(t=>t.start(0)),t.volume.rampTo(a,1.5)};r&&"started"===s.Transport.state?(t.volume.rampTo(-1/0,.5),setTimeout(o,550)):o()},stopTheme(){const t=window.Tone;n&&t&&r&&(r.cleanup&&r.cleanup(),r.parts.forEach(t=>{t.stop&&t.stop(0),t.cancel&&t.cancel(0)}),r=null,"started"===t.Transport.state&&(t.Transport.stop(),t.Transport.cancel(0),t.Transport.seconds=0))},getCurrentBpm:()=>r?r.bpm:85,toggleMute(t){const e=window.Tone;n&&e&&(e.Destination.mute=t)},setMasterVolume(t){n&&window.Tone&&(window.Tone.Destination.volume.value=t)},setMusicVolume(e){n&&t&&(a=e,t.volume.value=e)},setSfxVolume(t){n&&e&&(e.volume.value=t)},playWheelSpinStart:()=>{if(!n)return;const t=window.Tone.now();s.spinBlip.triggerAttackRelease("C5","8n",t),s.spinNoise.triggerAttack(t)},playWheelTick:()=>{if(!n)return;const t=window.Tone.now();t-o>.03&&(s.tick.triggerAttackRelease("C7","32n",t),s.tickNoise.triggerAttackRelease("32n",t),o=t)},playWheelStopSound:()=>{if(!n)return;const t=window.Tone.now();s.wheelStopChord.triggerAttackRelease(["E4","G4","C5"],"4n",t),s.wheelStopArpSeq.start(t).stop(t+.5)},playModalOpen:()=>{if(!n)return;const t=window.Tone.now();s.modalWhoosh.triggerAttack(t),s.modalShimmer.triggerAttackRelease("2n",t+.1)},playModalClose:()=>{if(!n)return;const t=window.Tone.now();s.modalClose.triggerAttack("G5",t),s.modalClose.triggerAttack("C4",t+.1)},playCorrect:()=>{n&&s.correct.triggerAttackRelease(["C5","E5","G5"],"8n",window.Tone.now())},playWrong:()=>{if(!n)return;const t=window.Tone.now();s.wrong.frequency.setValueAtTime("G4",t),s.wrong.frequency.linearRampToValueAtTime("G3",t+.4),s.wrong.triggerAttack(t),s.wrong.triggerRelease(t+.4)},playExtremePrompt:()=>{if(!n)return;const t=window.Tone.now();s.extremeSwell.triggerAttack(t),s.extremeHit.triggerAttackRelease("C1","1m",t+1.4)},playRefuse:()=>{if(!n)return;const t=window.Tone.now();s.refuse.triggerAttack("C6",t),s.refuse.triggerAttack("C4",t+.1)},playUIConfirm:()=>{n&&s.uiConfirm.triggerAttackRelease("C6","16n")}};return l})(),bA={truthPrompts:{normal:["Would you remarry if your partner died?","Do you ever regret marrying your partner?","What's your biggest regret? Explain.","What's your favorite thing that your partner does for you?","What do you envision the next 50 years with your partner being like? Explain in great detail.","Tell your partner something that they need to improve on. Go into great detail.","What's one thing you're scared to ask me, but really want to know?","What is a secret you've kept from your parents?","Describe a dream you've had about me.","If you could change one thing about our history, what would it be?","What's the most childish thing you still do?","What do you think is your partner's biggest strength?","If money didn't matter, what would you want your partner to do with their life?","What song always makes you think of your partner?","What was your happiest childhood memory?","What's one thing you've always wanted to tell your partner, but never have?","What scares you most about the future with your partner?","What's one thing you wish you and your partner could do more often?","If you could relive one day of your relationship, which would it be?"],spicy:["What's your favorite part of your partner's body?","Describe a time they turned you on without even realizing it.","Tell me a sexual fantasy involving us you've never shared.","What's the most embarrassing thing that's ever happened to you during sex?","Who's the best sexual partner you've ever had? And why?","Name a celebrity you've had a sexual fantasy about.","If you could only do one sex act for the rest of your life, what would it be?","Have you ever cheated on a partner?","Have you ever faked an orgasm with your current partner?","Tell your partner what you're thinking about in great detail, when you're horny prior to sex.","What's the naughtiest thought you've had about me this week?","Rank your top three favorite positions.","What's one thing you want me to do to you in bed more often?","What's the sexiest dream you've ever had about your partner?","What's the dirtiest compliment you secretly want from your partner?","Where's the riskiest place you'd want to fool around with your partner?","If you could make your partner wear any outfit for you, what would it be?","What's your favorite way your partner touches you when you want it to lead to sex?","What's a fantasy involving your partner you've never admitted out loud?","If you could freeze time, what would you do to your partner while no one else was watching?","What's a kink you're curious about but nervous to try with your partner?","Which body part of your partner do you think about most when they're not around?","What's your favorite way your partner has teased you without realizing it?"],extreme:["Describe your partner's genitals in great detail.","Which ex would you most likely allow to have a threesome with you and your partner?","Which ex looked the best naked?","Describe a sexual experience with an ex in great detail.","Have you ever masturbated in an inappropriate time or place?","What do you want to do to your partner right now? Be detailed.","Tell your partner any ways that they can improve in bed.","What is the biggest lie you have ever told me?","Have you ever considered leaving me? If so, why?","Describe the most intense orgasm you've ever had, with or without me.","What is something you've never told anyone about your sexual history?","Describe, in detail, your perfect sexual scenario with your partner.","What's the nastiest thought you've ever had about your partner in public?","If you could film yourself and your partner doing anything in bed, what would you want captured?","What's the dirtiest porn search you've ever typed that you'd want to try with your partner?","Which of your partner's friends have you thought about sexually (even fleetingly)?","What's the roughest or wildest thing you secretly want your partner to do to you?","What's your most shameful fantasy you'd never tell your partner's family?","If you could erase one sexual experience from your past before meeting your partner, what would it be?","What do you imagine when you masturbate that you haven't told your partner?"]},darePrompts:{normal:["Take a cute selfie with your partner.","Give your best impression of your partner.","Let your partner tickle you for 30 seconds.","Give your partner a shoulder rub for 3 minutes.","Do a somersault.","Do 10 jumping jacks.","Give your partner a hug, as if they were dying.","Post a picture of your partner on social media with a loving caption.","Let your partner draw a temporary tattoo on you with a pen.","Serenade your partner with a love song, even if you can't sing.","Do your best runway walk for your partner.","Take a silly selfie right now and show your partner.","Speak in an accent for the next 2 rounds with your partner.","Tell your partner two truths and a lie.","Share your screen time stats with your partner.","Do your best dance move for your partner for 20 seconds.","Hug a pillow and pretend it's your partner for one minute.","Let your partner pick a silly nickname for you for the rest of the game.","Text a random emoji to a friend and show your partner the reply.","Sing your favorite chorus from memory to your partner.","Pretend to be your partner for one round."],spicy:["Give me a passionate kiss, as if we haven't seen each other in a month.","Whisper what you want to do to me later tonight in my ear.","Gently remove one item of my clothing.","Sit in your partner's lap for 3 rounds.","Touch your partner through their clothes until they're aroused.","Take a sexy selfie in only your underwear and send it to your partner.","Flash your partner a private part of your choosing.","Explain in graphic detail how you like to masturbate.","Give your partner a topless lap dance.","Gently kiss your partner's naked genitals.","Let me choose an item of your clothing for you to remove.","Give your partner a hickey somewhere they can hide it.","Describe how you would tease me if we were in public right now.","Describe out loud how you'd undress your partner right now.","Let your partner choose a body part for you to kiss.","Show your partner how you'd seduce them in public without anyone noticing.","Whisper something filthy in your partner's ear.","Stroke your partner's hand or arm like you would in foreplay.","Show your partner your sexiest facial expression.","Bite your lip and hold eye contact with your partner for 30 seconds.","Kiss your partner as if it were your first time.","Moan your partner's name in a way that turns them on."],extreme:["Give your partner a hand job for 3 minutes.","Sit on your partner's face, or let them sit on your face for 3 minutes.","Soak for 5 minutes.","Masturbate for 5 minutes while watching porn that your partner picked.","Edge your partner twice.","Perform oral sex on your partner for 2 minutes.","Use a sex toy on your partner for 3 minutes.","Allow your partner to use any sex toy they'd like on your for the next 5 minutes.","Wear a butt plug for the next 10 minutes.","Let your partner tie you up for 5 minutes and do what they want.","Roleplay a fantasy of your partner's choosing for 5 minutes.","Take a nude photo and send it to your partner right now.","Lick or suck on a body part your partner chooses.","Let your partner spank you as hard as they want 5 times.","Send your partner a dirty voice note moaning their name.","Simulate oral sex on your fingers for 30 seconds in front of your partner.","Strip completely naked and pose however your partner says.","Show your partner how you masturbate, in detail.","Act out your favorite porn scene with your partner.","Put something of your partner's in your mouth and treat it like foreplay.","Let your partner tie your hands for the next 3 rounds.","Edge yourself while your partner watches for 2 minutes.","Edge your partner while you watch for 2 minutes."]},triviaQuestions:{normal:["What is your partner's birthday?","What is your partner's favorite show?","What is their biggest insecurity?","What is your partner's biggest fear?","What is their dream job if money were no object?","What is one thing your partner has always wanted to try but hasn't yet?","What is the first gift you gave each other?","What is your partner's favorite childhood cartoon?","What is the name of your partner's first pet?","What is your partner's favorite board game?","Would you rather go into the past and meet your ancestors or go into the future and meet your great-great grandchildren?","What was their favorite band in high school?","What do they love most about themselves?","What do they love the most about you?","What's my favorite animal?","If they could haunt anyone as a ghost, who would it be?","What is their dream vacation?","What accomplishment are they most proud of?","What historical figure would they most want to have lunch with?","What is their least favorite food?","What's your partner's go-to comfort food?","What movie does your partner always want to rewatch?","What's your partner's biggest pet peeve?","Which holiday does your partner love the most?","What's your partner's dream car?","What color does your partner secretly dislike wearing?","Who was your partner's first celebrity crush?","What's your partner's most annoying habit (to you)?","If your partner could instantly master one skill, what would it be?"]},consequences:{normal:["You have to call your partner a name of their choosing for the rest of the game.","Every wrong answer for the rest of the game gets you tickled for 20 seconds.","Go get your partner a drink.","Make your partner a snack.","You have to end every sentence with 'my love' for the next 3 rounds.","Give your partner your phone and let them send one playful text to anyone.","Compliment your partner 5 times in a row.","Give your partner control of the TV remote tonight.","Swap seats with your partner for the next round.","Tell your partner a secret you've never told them.","Let your partner take an unflattering picture of you.","You can only answer your partner with 'yes, my love' until your next turn.","Wear a silly hat (or make one) until the game ends with your partner.","Post a sweet compliment about your partner on social media."],spicy:["Play the next 3 rounds topless.","For the next 5 rounds, every time it's your turn, you have to start by kissing your partner.","Your partner gets to give you one command, and you must obey.","Play the next 3 rounds bottomless.","Every wrong answer or refusal requires you to send your partner a nude picture for the rest of the game. Even your partner's wrong answers.","Remove an article of clothing each round for the remainder of the game.","Do ten jumping jacks completely naked.","Swap clothes with your partner for the remainder of the game.","Your partner gets to spank you, as hard as they want, 5 times.","Kiss your partner somewhere unexpected.","Tell your partner your dirtiest thought in the last 24 hours.","For the next round, sit on your partner's lap.","Let your partner bite or nibble a place of their choice.","You have to let your partner mark you with lipstick or a marker.","Show your partner your favorite sex position (with clothes on).","Tease your partner without kissing for 1 minute.","Send your partner a sexy text right now while sitting next to them.","Give your partner a 1-minute lap dance."],extreme:["Wear a butt plug for the remainder of the game.","Record yourself masturbating right now and send it to your partner.","Use a sex toy of your partner's choosing for the remainder of the game.","Edge yourself for the remainder of the game.","Allow your partner to act out a fantasy of theirs, and you can't say no.","You must perform any sexual act your partner demands, right now.","Send your partner the filthiest nude you've ever taken.","Use your tongue on any body part your partner picks.","Strip completely and stay that way until the round ends with your partner.","Let your partner spank or choke you until they're satisfied.","Put on a show of how you like to be touched for your partner.","Allow your partner to record 30 seconds of you doing something sexual.","Play with a toy in front of your partner right now.","Moan out loud for 1 minute straight for your partner.","Let your partner pick your sexual punishment and don't complain."]}},wA=()=>Q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),kA=L.memo(()=>Q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("circle",{cx:"12",cy:"12",r:"3"}),Q.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1.51-1V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V12c0 .36.05.7.14 1.03.22.84.97 1.34 1.77 1.34h.09a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09A1.65 1.65 0 0 0 19.4 15z"})]})),SA=L.memo(({muted:t})=>t?Q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),Q.jsx("line",{x1:"22",y1:"9",x2:"16",y2:"15"}),Q.jsx("line",{x1:"16",y1:"9",x2:"22",y2:"15"})]}):Q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Q.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),Q.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"})]})),TA=L.memo(()=>Q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[var(--theme-highlight)] opacity-70","aria-hidden":"true",children:[Q.jsx("path",{d:"M12 20h9"}),Q.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})]})),CA=L.memo(()=>Q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#F777B6] hover:text-[#FFC0CB]","aria-hidden":"true",children:[Q.jsx("polyline",{points:"3 6 5 6 21 6"}),Q.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})),AA=()=>Q.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"animate-spin","aria-hidden":"true",children:[Q.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeDasharray:"16 12",opacity:"0.4"}),Q.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeDasharray:"56.548",strokeDashoffset:"42.411",strokeLinecap:"round",children:Q.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 12 12",to:"360 12 12",dur:"1s",repeatCount:"indefinite"})})]}),EA=L.memo(({currentTheme:t,pulseLevel:e,bpm:n,reducedMotion:s,style:i})=>{const r=q.useRef(null),o=q.useRef(null);return q.useEffect(()=>{const i=r.current;if(!i)return;const a=i.getContext("2d");if(!a)return;let l,u,c=[],h=document.hidden;i.style.position="fixed",i.style.inset="0";const d=()=>{h=document.hidden,h||s||o.current||(o.current=requestAnimationFrame(_))},p=window.innerWidth<768,f={velourNights:{num:p?80:120,palette:["#F777B6","#FFD700","#FFFFFF"],type:"ember"},lotusDreamscape:{num:p?60:100,palette:["#6A5ACD","#FFFFFF","#ADD8E6"],type:"mote"},velvetCarnival:{num:p?100:150,palette:["#FFD700","#FF4500","#FFFFFF","#F777B6"],type:"confetti"},starlitAbyss:{num:p?150:250,palette:["#FFFFFF","#E6E6FA","#D8BFD8"],type:"star"},crimsonFrenzy:{num:p?80:120,palette:["#FFD700","#DC2626","#FF4500"],type:"spark"}},m=f[t]||f.velourNights,g=()=>{const e=Math.min(window.devicePixelRatio||1,2),n=window.innerWidth,r=window.innerHeight;i.width=Math.max(1,Math.floor(n*e)),i.height=Math.max(1,Math.floor(r*e)),i.style.width=`${n}px`,i.style.height=`${r}px`,a.setTransform(e,0,0,e,0,0),l=n,u=r,s?(()=>{const e=Math.min(window.devicePixelRatio||1,2);a.setTransform(e,0,0,e,0,0),a.clearRect(0,0,l,u);const n=f[t]||f.starlitAbyss,s=n.num/3;for(let t=0;t<s;t++){const t=n.palette[Math.floor(Math.random()*n.palette.length)];a.fillStyle=t;const e=Math.random()*l,s=Math.random()*u,i=1.2*Math.random();a.globalAlpha=.5*Math.random()+.1,a.beginPath(),a.arc(e,s,i,0,2*Math.PI),a.fill()}a.globalAlpha=1})():(()=>{c=[];for(let t=0;t<m.num;t++)c.push(new y(t))})()};if(s)return g(),window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g)};document.addEventListener("visibilitychange",d);class y{constructor(t){this.index=t,this.x=Math.random()*l,this.y=Math.random()*u,this.layer=Math.random();const e=m.palette[Math.floor(Math.random()*m.palette.length)];this.baseColorRgb=(t=>{let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null})(e),this.type=m.type,this.initType()}initType(){const t=e/100;let n=1;switch(e>80?n=1.8:e>50&&(n=1.5),this.type){case"star":this.radius=Math.random()*(this.layer>.6?1.2:.7)+.1,this.speedX=Math.max(-.5,Math.min(.5,.05*(Math.random()-.5)*this.layer*n)),this.speedY=Math.max(-.5,Math.min(.5,.05*(Math.random()-.5)*this.layer*n)),this.shadowBlur=3*this.radius+3*t,this.baseAlpha=.2+.8*this.layer;break;case"ember":case"spark":this.radius=1.5*Math.random()+.5,this.speedX=Math.max(-.5,Math.min(.5,(Math.random()-.5)*(.1+.3*t)*n)),this.speedY=Math.max(-.5,Math.min(.5,-Math.random()*(.3+.7*t)*n)),this.shadowBlur=4*this.radius+4*t,this.baseAlpha=.5*Math.random()+.2,this.life=50*Math.random()+50;break;default:this.radius=Math.random()*("confetti"===this.type?2.5:1.5)+.5,this.speedX=Math.max(-.5,Math.min(.5,(Math.random()-.5)*(.2+.4*t)*n)),this.speedY=Math.max(-.5,Math.min(.5,(Math.random()-.5)*(.2+.4*t)*n)),this.shadowBlur=2*this.radius,this.baseAlpha=.6*Math.random()+.1}}update(){this.x+=this.speedX,this.y+=this.speedY,"ember"===this.type||"spark"===this.type?(this.life--,this.life<=0&&(this.x=Math.random()*l,this.y=u+2*this.radius,this.life=50*Math.random()+50,this.baseAlpha=.5*Math.random()+.2)):(this.x<-this.radius&&(this.x=l+this.radius),this.x>l+this.radius&&(this.x=-this.radius),this.y<-this.radius&&(this.y=u+this.radius),this.y>u+this.radius&&(this.y=-this.radius))}draw(t){const s=60/n,i=Math.max(.8,Math.min(1.4,1/s)),r=(.005+this.index%10*.001)*i,o="star"===this.type?.5+.5*Math.abs(Math.sin(t*r+this.index)):1;let l=this.baseAlpha*o;"ember"!==this.type&&"spark"!==this.type||(l*=this.life/50),a.beginPath(),a.arc(this.x,this.y,this.radius,0,2*Math.PI);const u=`rgba(${this.baseColorRgb.r}, ${this.baseColorRgb.g}, ${this.baseColorRgb.b}, ${l})`;e>80?(a.shadowBlur=6*this.radius,a.shadowColor=`rgba(${this.baseColorRgb.r}, ${this.baseColorRgb.g}, ${this.baseColorRgb.b}, ${.5*l})`):(a.shadowBlur=this.shadowBlur,a.shadowColor=`rgba(${this.baseColorRgb.r}, ${this.baseColorRgb.g}, ${this.baseColorRgb.b}, 0.8)`),a.fillStyle=u,a.fill()}}let v=0;const _=()=>{h||!r.current||s?o.current=null:(a.clearRect(0,0,i.width,i.height),c.forEach(t=>{t.update(),t.draw(v)}),v++,o.current=requestAnimationFrame(_))};return g(),_(),window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g),document.removeEventListener("visibilitychange",d),o.current&&(cancelAnimationFrame(o.current),o.current=null)}},[t,e,n,s]),Q.jsx("canvas",{ref:r,className:"particle-canvas",style:i})}),DA=({onFinish:t,origin:e,theme:n,reducedMotion:s})=>{const i=q.useRef(null),r=q.useRef(e);return q.useEffect(()=>{r.current=e},[e]),q.useEffect(()=>{if(s)return void(t&&t());const e=i.current;if(!e)return;const o=e.getContext("2d");if(!o)return;const a=Math.min(window.devicePixelRatio||1,2),l=()=>{let t=e.offsetWidth,n=e.offsetHeight;e.width=t*a,e.height=n*a,e.style.width=`${t}px`,e.style.height=`${n}px`,o.setTransform(a,0,0,a,0,0)};window.addEventListener("resize",l),l();const u={velourNights:["#F777B6","#FFD700","#FFFFFF"],lotusDreamscape:["#6A5ACD","#FFFFFF","#ADD8E6"],velvetCarnival:["#FFD700","#FF4500","#FFFFFF"],starlitAbyss:["#FFFFFF","#E6E6FA","#D8BFD8"],crimsonFrenzy:["#FFD700","#DC2626","#FFFFFF"]},c=u[n]||u.velourNights,h=[],d=r.current.x*e.offsetWidth,p=r.current.y*e.offsetHeight;for(let t=0;t<200;t++){const t=Math.random()*Math.PI*2,e=8*Math.random()+4;h.push({x:d,y:p,vx:Math.cos(t)*e,vy:Math.sin(t)*e,radius:6*Math.random()+4,color:c[Math.floor(Math.random()*c.length)],tiltAngle:Math.random()*Math.PI,tiltAngleIncrement:.1*Math.random()-.05,alpha:1})}let f;const m=Date.now(),g=()=>{const n=h.every(t=>t.alpha<=0);if(Date.now()-m>4e3||n)return f&&cancelAnimationFrame(f),void(t&&t());o.clearRect(0,0,e.width,e.height),h.forEach(t=>{t.vy+=.1,t.vx*=.98,t.vy*=.98,t.x+=t.vx,t.y+=t.vy,t.alpha-=.005,t.tiltAngle+=t.tiltAngleIncrement,o.fillStyle=t.color,o.globalAlpha=Math.max(0,t.alpha),o.beginPath(),o.save(),o.translate(t.x,t.y),o.rotate(t.tiltAngle),o.fillRect(-t.radius/2,-t.radius,t.radius,2*t.radius),o.restore()}),o.globalAlpha=1,f=requestAnimationFrame(g)};return g(),()=>{f&&cancelAnimationFrame(f),window.removeEventListener("resize",l),h.length=0}},[t,n,s]),Q.jsx("canvas",{ref:i,className:"fixed inset-0 w-full h-full z-[100] pointer-events-none"})},MA=["TRUTH","DARE","TRIVIA"],OA=L.memo(({onSpinFinish:t,playWheelSpinStart:e,playWheelTick:n,playWheelStop:s,setIsSpinInProgress:i,currentTheme:r,canSpin:o,reducedMotion:a})=>{const[l,u]=q.useState(!1),[c,h]=q.useState(!1),d=q.useRef(0),p=q.useRef(null),f=q.useRef(null),m=q.useRef(!1),g=q.useRef(0);q.useEffect(()=>()=>{f.current&&(cancelAnimationFrame(f.current),f.current=null)},[]),q.useEffect(()=>{const t=setTimeout(()=>{a&&p.current&&!m.current&&(p.current.style.transform="none")},100);return()=>clearTimeout(t)},[a]);const y=q.useMemo(()=>(t,e)=>{if(!t)return;const n=e/2,s=Math.max(0,n-25),i=e/10,o=2*Math.PI/MA.length;t.clearRect(0,0,e,e);const a={velourNights:{rim:{base:"#D4AF37",high:"#FFD700",low:"#7A5C00"},slices:{DARE:{base:"#DC143C",high:"#FF6F91",low:"#7A1C1C"},TRUTH:{base:"#6A0DAD",high:"#B266FF",low:"#2E003E"},TRIVIA:{base:"#D4AF37",high:"#FFD700",low:"#7A5C00"}}},lotusDreamscape:{rim:{base:"#C0C0C0",high:"#E6E6FA",low:"#5A5A7A"},slices:{DARE:{base:"#DA70D6",high:"#FFB7FF",low:"#5A2D6A"},TRUTH:{base:"#4169E1",high:"#7AA2FF",low:"#1A1A66"},TRIVIA:{base:"#C0C0C0",high:"#E6E6FA",low:"#5A5A7A"}}},velvetCarnival:{rim:{base:"#FF4500",high:"#FF944D",low:"#662200"},slices:{DARE:{base:"#FF4500",high:"#FF944D",low:"#662200"},TRUTH:{base:"#9B111E",high:"#FF4C5B",low:"#400000"},TRIVIA:{base:"#D4AF37",high:"#FFD700",low:"#7A5C00"}}},starlitAbyss:{rim:{base:"#4C4A9E",high:"#8A2BE2",low:"#1C1030"},slices:{DARE:{base:"#483D8B",high:"#8A2BE2",low:"#1C1030"},TRUTH:{base:"#191970",high:"#4169E1",low:"#0A0A33"},TRIVIA:{base:"#6C5CE7",high:"#A29BFE",low:"#2D3436"}}},crimsonFrenzy:{rim:{base:"#8B0000",high:"#DC143C",low:"#3D0000"},slices:{DARE:{base:"#DC143C",high:"#FF6F91",low:"#7A1C1C"},TRUTH:{base:"#483D8B",high:"#8A2BE2",low:"#1C1030"},TRIVIA:{base:"#D4AF37",high:"#FFD700",low:"#7A5C00"}}}},l=a[r]||a.velourNights,u=l.rim;MA.forEach((r,a)=>{const u=l.slices[r];if(!u)return;const{base:c,high:h,low:d}=u,p=a*o-Math.PI/2-o/2,f=(a+1)*o-Math.PI/2-o/2;t.save(),t.beginPath(),t.moveTo(n,n),s>0&&t.arc(n,n,s,p,f),t.closePath();const m=t.createRadialGradient(n,n,i,n,n,s);m.addColorStop(0,h),m.addColorStop(.8,c),m.addColorStop(1,d),t.fillStyle=m,t.fill(),t.clip();const g=t.createLinearGradient(0,0,e,e);g.addColorStop(0,"rgba(255,255,255,0.08)"),g.addColorStop(.5,"rgba(255,255,255,0)"),g.addColorStop(1,"rgba(255,255,255,0.08)"),t.fillStyle=g,t.save(),t.translate(n,n),t.rotate(Math.PI/6),t.fillRect(-e,-e/4,2*e,e/2),t.rotate(-Math.PI/3),t.fillRect(-e,-e/4,2*e,e/2),t.restore(),t.restore()});for(let r=0;r<MA.length;r++){const e=r*o-Math.PI/2-o/2;t.save(),t.translate(n,n),t.rotate(e),t.beginPath(),t.moveTo(i-5,0),t.lineTo(s+2,0),t.strokeStyle="rgba(0,0,0,0.4)",t.lineWidth=3,t.stroke(),t.beginPath(),t.moveTo(i-5,-1),t.lineTo(s+2,-1),t.strokeStyle="rgba(255,255,255,0.15)",t.lineWidth=1,t.stroke(),t.restore()}t.strokeStyle=u.low,t.lineWidth=10;const c=document.getElementById("app-container")||document.documentElement,h=getComputedStyle(c).getPropertyValue("--theme-highlight").trim()||"#FFD700";t.shadowColor=h,t.shadowBlur=15,t.beginPath(),s>0&&t.arc(n,n,s+4,0,2*Math.PI),t.stroke(),t.shadowBlur=0;const d=t.createLinearGradient(n-s,n-s,n+s,n+s);d.addColorStop(0,u.high),d.addColorStop(.5,u.base),d.addColorStop(1,u.low),t.strokeStyle=d,t.lineWidth=8,t.beginPath(),s>0&&t.arc(n,n,s+4,0,2*Math.PI),t.stroke();for(let r=1;r<=12;r++)t.beginPath(),s>0&&t.arc(n,n,s+4-.5*r,0,2*Math.PI),t.strokeStyle=`rgba(0,0,0,${r%2==0?.1:.05})`,t.lineWidth=.5,t.stroke();t.strokeStyle="rgba(255, 255, 255, 0.5)",t.lineWidth=1.5,t.beginPath(),s>0&&t.arc(n,n,s,0,2*Math.PI),t.stroke(),MA.forEach((i,r)=>{const a=r*o-Math.PI/2;t.save(),t.translate(n,n),t.rotate(a);const l=Math.max(20,e/13);t.font=`800 ${l}px 'Inter', sans-serif`,t.fillStyle="white",t.textAlign="center",t.textBaseline="middle",t.shadowColor="rgba(0,0,0,0.9)",t.shadowBlur=10;const u=.6*s;t.fillText(i,u,0),t.restore()})},[r]);q.useEffect(()=>{const t=p.current;if(!t)return;const e=t.getContext("2d");if(!e)return;const n=t.parentElement;let s;const i=()=>{if(m.current)return;const s=Math.max(280,Math.min(n.offsetWidth,n.offsetHeight,480)),i=Math.min(window.devicePixelRatio||1,2);(t.width!==s*i||t.height!==s*i)&&(t.width=s*i,t.height=s*i,t.style.width=`${s}px`,t.style.height=`${s}px`,e.setTransform(i,0,0,i,0,0)),y(e,s)};return document.fonts.ready.then(()=>{s=requestAnimationFrame(i)}),window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i),s&&cancelAnimationFrame(s)}},[y]);const v=q.useCallback(()=>{const e=d.current%360,n=360/MA.length,s=(e+(()=>{const t=document.getElementById("app-container")||document.documentElement,e=getComputedStyle(t).getPropertyValue("--pointer-tilt")||"0deg",n=parseFloat(e);return Number.isFinite(n)?n:0})())%360,i=(s+n/2)%360,r=Math.floor(i/n),o=MA[r%MA.length].toLowerCase();t(o)},[t]),_=q.useCallback(()=>{const t=Date.now();m.current||!o||t-g.current<1e3||(g.current=t,p.current&&(p.current.style.transition="none"),requestAnimationFrame(()=>{if(m.current)return;m.current=!0,u(!0),i(!0),e();const t=setTimeout(()=>{m.current&&(m.current=!1,u(!1),i(!1),f.current&&(cancelAnimationFrame(f.current),f.current=null))},7e3);if(a){clearTimeout(t);const e=d.current%360+(360+360*Math.random());return d.current=e,p.current&&(p.current.style.transition="transform 0.5s ease-out",p.current.style.transform=`rotate(${e}deg)`),n(),setTimeout(()=>n(),80),void setTimeout(()=>{s(),h(!0),v(),setTimeout(()=>{u(!1),i(!1),m.current=!1,p.current&&(p.current.style.transition="")},500)},500)}const r=Math.random(),o=4500+1e3*r,l=performance.now(),c=d.current%360,g=7200+3600*r,y=c+g;let _=c;const x=e=>{if(!p.current)return clearTimeout(t),f.current=null,void(m.current=!1);const i=e-l,r=Math.min(i/o,1),a=(t=>1-Math.pow(1-t,3))(r),b=c+a*g;p.current.style.transform=`rotate(${b}deg)`;const w=360/MA.length/2;b-_>=w&&(n(),_+=w),r<1?f.current=requestAnimationFrame(x):(clearTimeout(t),f.current=null,d.current=y,s(),u(!1),h(!0),v(),m.current=!1)};f.current=requestAnimationFrame(x)}))},[o,i,e,n,s,v,a]);return Q.jsxs("div",{className:"wheel-container",role:"img","aria-label":"Game wheel",children:[Q.jsx("canvas",{ref:p,className:"wheel-canvas"}),Q.jsx("div",{className:"pointer",children:Q.jsx(Ry.div,{className:"pointer-anim",animate:c?"settle":"rest",variants:{rest:{rotate:0},settle:{rotate:[0,-3,2.5,-1.5,.5,0]}},transition:{duration:.3,ease:"easeOut"},onAnimationComplete:()=>h(!1),children:Q.jsx("div",{className:"pointer-tip-outer",children:Q.jsx("div",{className:"pointer-tip-inner"})})})}),Q.jsx("div",{className:"spin-button-wrapper",children:Q.jsx(Ry.button,{"aria-label":"Spin",className:"spin-button",onClick:_,disabled:l||!o,whileTap:{scale:.95},children:l?Q.jsx(AA,{}):"SPIN"})})]})}),RA=({level:t})=>Q.jsxs("div",{className:"pulse-meter",children:[Q.jsx("div",{className:"pulse-meter__fill",style:{width:`${t}%`}}),Q.jsx("div",{className:"pulse-meter__wave"}),Q.jsx("div",{className:"pulse-meter__gloss"})]}),PA=({isOpen:t,onClose:e,title:n,children:s,activeVisualTheme:i,customClasses:r=""})=>{const o=((t=10)=>{const e=q.useRef(null),n=zy(0),s=zy(0),i=Gy(n,{stiffness:300,damping:30}),r=Uy(Gy(s,{stiffness:300,damping:30}),[-.5,.5],[`${t}deg`,`-${t}deg`]),o=Uy(i,[-.5,.5],[`-${t}deg`,`${t}deg`]);return q.useEffect(()=>{const t=e.current;if(!t)return;let i=!1;const r=e=>{i||(i=!0,window.requestAnimationFrame(()=>{const r=t.getBoundingClientRect(),o=r.width,a=r.height,l=(e.clientX-r.left)/o-.5,u=(e.clientY-r.top)/a-.5;n.set(l),s.set(u),i=!1}))},o=()=>{n.set(0),s.set(0)};return t.addEventListener("mousemove",r),t.addEventListener("mouseleave",o),()=>{t&&(t.removeEventListener("mousemove",r),t.removeEventListener("mouseleave",o))}},[n,s]),{ref:e,style:{rotateX:r,rotateY:o,transformStyle:"preserve-3d"}}})(8),a=!!t;return L.useEffect(()=>{if(!a)return;const t=document.activeElement,n=setTimeout(()=>{const t=o.ref.current,e=t?.querySelector('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])');(e??t)?.focus?.()},0),s=t=>{if("Escape"!==t.key){if("Tab"===t.key&&o.ref.current){const e=Array.from(o.ref.current.querySelectorAll('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])'));if(!e.length)return;const n=e[0],s=e[e.length-1];t.shiftKey?document.activeElement===n&&(s.focus(),t.preventDefault()):document.activeElement===s&&(n.focus(),t.preventDefault())}}else e?.()};return document.addEventListener("keydown",s),()=>{clearTimeout(n),document.removeEventListener("keydown",s),t?.focus?.()}},[a,e,o.ref]),a?Q.jsx(Ry.div,{className:"fixed inset-0 z-[110] flex items-center justify-center p-4",onClick:e,initial:{backgroundColor:"rgba(0,0,0,0)"},animate:{backgroundColor:"rgba(0,0,0,0.5)"},exit:{backgroundColor:"rgba(0,0,0,0)"},children:Q.jsxs(Ry.div,{ref:o.ref,style:o.style,tabIndex:-1,className:`relative outline-none w-full max-w-sm flex flex-col modal-metallic ${i?.themeClass??""} ${r}`,onClick:t=>t.stopPropagation(),initial:{scale:.95,opacity:0,y:30,filter:"blur(8px)"},animate:{scale:1,opacity:1,y:0,filter:"blur(0px)"},exit:{scale:.95,opacity:0,y:30,filter:"blur(8px)"},transition:{type:"tween",duration:.25},role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[Q.jsxs("div",{className:"modal-header",children:[n&&Q.jsx("h2",{id:"modal-title",className:"modal-title text-3xl text-white",children:n}),Q.jsx(Ry.button,{"aria-label":"Close modal",onClick:e,className:"modal-close-button text-white/70 hover:text-white",whileTap:{scale:.9},whileHover:{scale:1.1},children:Q.jsx(wA,{})})]}),Q.jsx("div",{className:"modal-body",children:s})]})}):null},FA=()=>Q.jsx("div",{className:"fixed inset-0 z-10 pointer-events-none vignette-overlay"}),NA=({reducedMotion:t})=>Q.jsx("div",{className:"fixed inset-0 z-10 pointer-events-none opacity-[0.04] "+(t?"":"noise-animated")}),VA=({reducedMotion:t})=>{const e=zy("-100%"),n=zy("-100%");return q.useEffect(()=>{if(t)return;const s=t=>{e.set(`${t.clientX}px`),n.set(`${t.clientY}px`)};return window.addEventListener("mousemove",s),()=>window.removeEventListener("mousemove",s)},[e,n,t]),Q.jsx(Ry.div,{className:"radial-light-overlay",style:{"--light-x":e,"--light-y":n}})},IA=({onComplete:t,reducedMotion:e})=>Q.jsx(Ry.div,{className:"fixed inset-0 z-[130] pointer-events-none bg-power-surge",initial:{scale:0,opacity:0},animate:{scale:3,opacity:[0,1,0]},transition:{duration:e?.1:1.5,ease:"easeInOut"},onAnimationComplete:t}),jA=({theme:t,reducedMotion:e})=>Q.jsx(Ry.div,{className:`fixed inset-0 z-[125] pointer-events-none extreme-effect-bg ${t}`,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:!e&&Q.jsx("div",{className:"extreme-scanlines"})}),qA=({children:t,activeVisualTheme:e})=>Q.jsx("div",{className:`w-full h-full flex flex-col items-center justify-center p-8 text-center ${e.themeClass}`,children:t}),LA=({onUnlock:t,disabled:e,activeVisualTheme:n})=>Q.jsx("div",{className:"start-screen",children:Q.jsxs(qA,{activeVisualTheme:n,children:[Q.jsx("h1",{className:"text-8xl font-['Great_Vibes']",style:{filter:`drop-shadow(0 0 15px ${n.titleShadow})`},children:"Pulse"}),Q.jsxs("p",{className:"text-xl mt-4 text-white/80 max-w-xs",children:["The intimate couples game. ",Q.jsx("br",{}),"Best with sound on."]}),Q.jsx(Ry.button,{onClick:t,disabled:e,className:"btn btn--primary mt-12 text-2xl px-12 py-5 begin-button",whileTap:{scale:.95},children:e?Q.jsx(AA,{}):"Begin"})]})}),zA=({onNext:t,activeVisualTheme:e})=>Q.jsxs(qA,{activeVisualTheme:e,children:[Q.jsx("h2",{className:"text-4xl font-bold",children:"Welcome to Pulse"}),Q.jsx("p",{className:"text-lg mt-4 text-white/70 max-w-sm",children:"Get ready to connect on a deeper level. Answer truths, complete dares, and see how well you really know each other."}),Q.jsx(Ry.button,{onClick:t,className:"btn btn--primary text-xl px-10 py-4 mt-10",whileTap:{scale:.95},children:"Continue"})]}),BA=({onVibeSelect:t,currentTheme:e,activeVisualTheme:n})=>Q.jsxs(qA,{activeVisualTheme:n,children:[Q.jsx("h2",{className:"text-4xl font-bold",children:"Choose Your Vibe"}),Q.jsx("p",{className:"text-lg mt-2 text-white/70",children:"Set the mood for your night."}),Q.jsx("div",{className:"flex flex-col gap-4 mt-8 w-full max-w-xs",children:[{id:"velourNights",name:"Velour Nights",colors:["#F777B6","#FFD700","#6A0DAD"]},{id:"lotusDreamscape",name:"Lotus Dreamscape",colors:["#6A5ACD","#FFFFFF","#ADD8E6"]},{id:"velvetCarnival",name:"Velvet Carnival",colors:["#FFD700","#FF4500","#9B111E"]},{id:"starlitAbyss",name:"Starlit Abyss",colors:["#FFFFFF","#E6E6FA","#483D8B"]}].map(e=>Q.jsxs(Ry.div,{onClick:()=>t(e.id),className:"theme-swatch",whileTap:{scale:.97},whileHover:{scale:1.03},children:[Q.jsx("div",{className:"theme-chips",children:e.colors.map(t=>Q.jsx("div",{className:"theme-chip",style:{backgroundColor:t}},t))}),Q.jsx("span",{className:"font-bold text-lg",children:e.name})]},e.id))})]}),WA=({onStart:t,activeVisualTheme:e})=>{const[n,s]=q.useState(""),[i,r]=q.useState("");return Q.jsxs(qA,{activeVisualTheme:e,children:[Q.jsx("h2",{className:"text-4xl font-bold",children:"Who's Playing?"}),Q.jsxs("form",{onSubmit:e=>{e.preventDefault(),t({p1:n||"Player 1",p2:i||"Player 2"})},className:"flex flex-col gap-5 mt-8 w-full max-w-xs",children:[Q.jsx("div",{className:"metallic-input-wrapper",children:Q.jsx("input",{type:"text",value:n,onChange:t=>s(t.target.value),placeholder:"Player 1 Name",className:"w-full h-full p-4 text-center text-xl text-[var(--theme-highlight)]"})}),Q.jsx("div",{className:"metallic-input-wrapper",children:Q.jsx("input",{type:"text",value:i,onChange:t=>r(t.target.value),placeholder:"Player 2 Name",className:"w-full h-full p-4 text-center text-xl text-[var(--theme-highlight)]"})}),Q.jsx(Ry.button,{type:"submit",className:"btn btn--primary text-xl px-10 py-4 mt-4",whileTap:{scale:.95},children:"Start Game"})]})]})},UA=({isOpen:t,onClose:e,activeVisualTheme:n})=>Q.jsx(PA,{isOpen:t,onClose:e,activeVisualTheme:n,children:Q.jsxs("div",{className:"text-center",children:[Q.jsx("h2",{className:"text-5xl font-black text-[var(--theme-highlight)] uppercase tracking-wider",style:{WebkitTextStroke:"1px black"},children:"EXTREME"}),Q.jsx("p",{className:"text-2xl font-bold mt-2 text-white",children:"The game is heating up!"}),Q.jsx("p",{className:"mt-4 text-white/80",children:"The prompts are about to get much more intense. Are you ready?"}),Q.jsx(Ry.button,{onClick:e,className:"btn btn--danger text-xl w-full mt-8",whileTap:{scale:.95},children:"Let's Do It"})]})}),$A=({isOpen:t,onClose:e,onRefuse:n,prompt:s,activeVisualTheme:i})=>Q.jsx(PA,{isOpen:t,onClose:e,title:s.title,activeVisualTheme:i,children:Q.jsxs("div",{className:"text-center flex flex-col gap-6",children:[Q.jsx("p",{className:"text-2xl font-semibold leading-relaxed text-white",children:s.text}),Q.jsxs("div",{className:"flex gap-4",children:[Q.jsx(Ry.button,{onClick:e,className:"btn btn--primary flex-1",whileTap:{scale:.95},children:"Done"}),Q.jsx(Ry.button,{onClick:n,className:"btn btn--secondary flex-1",whileTap:{scale:.95},children:"Refuse"})]})]})}),GA=({isOpen:t,onClose:e,text:n,activeVisualTheme:s})=>Q.jsx(PA,{isOpen:t,onClose:e,title:"Consequence",activeVisualTheme:s,children:Q.jsxs("div",{className:"text-center flex flex-col gap-6",children:[Q.jsx("p",{className:"text-2xl font-semibold leading-relaxed text-white",children:n}),Q.jsx(Ry.button,{onClick:e,className:"btn btn--danger w-full",whileTap:{scale:.95},children:"Accept Fate"})]})}),HA=({isOpen:t,onClose:e,prompts:n,onReset:s,activeVisualTheme:i})=>{const[r,o]=q.useState(()=>structuredClone(n)),a=()=>e(r),l=q.useRef(null),[u,c]=q.useState(!0),[h,d]=q.useState(!1),p=q.useCallback(()=>{const t=l.current;t&&(c(t.scrollTop<=0),d(t.scrollTop+t.clientHeight>=t.scrollHeight-1))},[]);return q.useEffect(()=>{p()},[p]),Q.jsx(PA,{isOpen:t,onClose:a,title:"Edit Prompts",activeVisualTheme:i,customClasses:"max-w-lg",children:Q.jsxs("div",{className:"flex flex-col gap-4 text-white",children:[Q.jsx("div",{ref:l,onScroll:p,className:"editor-scroll-area pr-2","data-at-top":u,"data-at-bottom":h,children:Object.entries(r).map(([t,e])=>Q.jsxs("div",{className:"mb-6",children:[Q.jsx("h3",{className:"text-2xl font-bold capitalize mb-3 text-[var(--theme-highlight)]",children:t.replace(/([A-Z])/g," $1").trim()}),Object.entries(e).map(([e,n])=>Q.jsxs("div",{className:"mb-4 pl-4 border-l-2 border-white/10",children:[Q.jsx("h4",{className:"font-semibold capitalize text-white/80 mb-2",children:e}),n.map((n,s)=>Q.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Q.jsx("input",{type:"text",value:n,onChange:n=>((t,e,n,s)=>{const i=structuredClone(r);i[t][e][n]=s,o(i)})(t,e,s,n.target.value),className:"w-full bg-black/20 rounded-md p-2 border border-white/20 focus:border-[var(--theme-highlight)] focus:ring-0"}),Q.jsx(Ry.button,{onClick:()=>((t,e,n)=>{const s=structuredClone(r);s[t][e].splice(n,1),o(s)})(t,e,s),whileTap:{scale:.9},children:Q.jsx(CA,{})})]},s)),Q.jsx("button",{onClick:()=>((t,e)=>{const n=structuredClone(r);n[t][e].push(""),o(n)})(t,e),className:"btn--inline text-sm",children:"+ Add"})]},e))]},t))}),Q.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-white/10",children:[Q.jsx("button",{onClick:s,className:"btn--inline text-sm text-red-400 border-red-400/50 hover:bg-red-500/10",children:"Reset All to Default"}),Q.jsx(Ry.button,{onClick:a,className:"btn btn--primary",whileTap:{scale:.95},children:"Save & Close"})]})]})})},QA=({isOpen:t,onClose:e,settings:n,onSettingsChange:s,isMuted:i,onMuteToggle:r,onEditPrompts:o,currentTheme:a,onThemeChange:l,userId:u,onRestart:c,onQuit:h,activeVisualTheme:d,reducedMotion:p,onReducedMotionToggle:f})=>Q.jsx(PA,{isOpen:t,onClose:e,title:"Settings",activeVisualTheme:d,children:Q.jsxs("div",{className:"flex flex-col gap-6 text-white",children:[Q.jsxs("div",{className:"settings-section",children:[Q.jsx("h3",{className:"text-xl font-bold mb-3 text-[var(--theme-label)]",children:"Audio"}),Q.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Q.jsx("label",{htmlFor:"master-vol",children:"Master"}),Q.jsx("button",{onClick:r,children:Q.jsx(SA,{muted:i})})]}),Q.jsx("input",{id:"master-vol",type:"range",min:"0",max:"100",value:n.masterVolume,onChange:t=>s({masterVolume:+t.target.value}),className:"w-full"}),Q.jsx("label",{htmlFor:"music-vol",className:"mt-2 block",children:"Music"}),Q.jsx("input",{id:"music-vol",type:"range",min:"0",max:"100",value:n.musicVolume,onChange:t=>s({musicVolume:+t.target.value}),className:"w-full"}),Q.jsx("label",{htmlFor:"sfx-vol",className:"mt-2 block",children:"SFX"}),Q.jsx("input",{id:"sfx-vol",type:"range",min:"0",max:"100",value:n.sfxVolume,onChange:t=>s({sfxVolume:+t.target.value}),className:"w-full"})]}),Q.jsxs("div",{className:"settings-section",children:[Q.jsx("h3",{className:"text-xl font-bold mb-3 text-[var(--theme-label)]",children:"Vibe"}),Q.jsx("div",{className:"flex flex-col gap-2",children:[{id:"velourNights",name:"Velour Nights",colors:["#F777B6","#FFD700","#6A0DAD"]},{id:"lotusDreamscape",name:"Lotus Dreamscape",colors:["#6A5ACD","#FFFFFF","#ADD8E6"]},{id:"velvetCarnival",name:"Velvet Carnival",colors:["#FFD700","#FF4500","#9B111E"]},{id:"starlitAbyss",name:"Starlit Abyss",colors:["#FFFFFF","#E6E6FA","#483D8B"]}].map(t=>Q.jsxs("div",{onClick:()=>l(t.id),className:"theme-swatch "+(a===t.id?"ring-2 ring-[var(--theme-highlight)]":""),children:[Q.jsx("div",{className:"theme-chips",children:t.colors.map(t=>Q.jsx("div",{className:"theme-chip",style:{backgroundColor:t}},t))}),Q.jsx("span",{className:"font-bold",children:t.name})]},t.id))})]}),Q.jsxs("div",{className:"settings-section",children:[Q.jsx("h3",{className:"text-xl font-bold mb-3 text-[var(--theme-label)]",children:"Game"}),Q.jsxs("button",{onClick:o,className:"btn--inline w-full flex items-center justify-center gap-2",children:[Q.jsx(TA,{})," Edit Custom Prompts"]}),Q.jsxs("div",{className:"flex items-center justify-between mt-3",children:[Q.jsx("label",{htmlFor:"reduced-motion",children:"Reduced Motion"}),Q.jsx("input",{type:"checkbox",id:"reduced-motion",checked:p,onChange:f,className:"w-5 h-5 rounded text-[var(--theme-highlight)] bg-white/10 border-white/20 focus:ring-[var(--theme-highlight)]"})]})]}),Q.jsxs("div",{className:"flex gap-2",children:[Q.jsx(Ry.button,{onClick:c,className:"btn btn--secondary flex-1",whileTap:{scale:.95},children:"Restart"}),Q.jsx(Ry.button,{onClick:h,className:"btn btn--danger flex-1",whileTap:{scale:.95},children:"Quit"})]})]})}),YA=({isOpen:t,onClose:e,onConfirm:n,title:s,message:i,activeVisualTheme:r})=>Q.jsx(PA,{isOpen:t,onClose:e,title:s,activeVisualTheme:r,children:Q.jsxs("div",{className:"text-center flex flex-col gap-6",children:[Q.jsx("p",{className:"text-lg text-white/80",children:i}),Q.jsxs("div",{className:"flex gap-4",children:[Q.jsx(Ry.button,{onClick:e,className:"btn btn--secondary flex-1",whileTap:{scale:.95},children:"Cancel"}),Q.jsx(Ry.button,{onClick:n,className:"btn btn--danger flex-1",whileTap:{scale:.95},children:"Confirm"})]})]})});function XA(){const{prompts:t,updatePrompts:e,resetPrompts:n,userId:s}=(()=>{const[t,e]=q.useState(()=>{try{const t=localStorage.getItem("prompts");return t?JSON.parse(t):bA}catch{return bA}});return{prompts:t,updatePrompts:t=>{e(t),localStorage.setItem("prompts",JSON.stringify(t))},resetPrompts:()=>{e(bA),localStorage.setItem("prompts",JSON.stringify(bA))},userId:"local",isLoading:!1}})(),[i,r]=q.useState("loading"),[o,a]=q.useState(!1),[l,u]=q.useState({type:null,data:{}}),c=(()=>{const t={theme:"velourNights",volumes:{masterVolume:100,musicVolume:80,sfxVolume:100},reducedMotion:!1};try{const e=localStorage.getItem("settings");if(e){const n=JSON.parse(e);return{...t,...n}}}catch(e){}return t})(),[h,d]=q.useState(c.theme),[p,f]=q.useState(c.volumes),[m,g]=q.useState(c.reducedMotion),[y,v]=q.useState(c.theme),[_,x]=q.useState(1),[b,w]=q.useState(!1),[k,S]=q.useState(0),[T,C]=q.useState(!1),[A,E]=q.useState(0),[D,M]=q.useState(!1),[O,R]=q.useState(!1),[P,F]=q.useState(null),[N,V]=q.useState(!1),[I,j]=q.useState({x:.5,y:.5}),[L,z]=q.useState(!1),[B,W]=q.useState(null),[U,$]=q.useState(!1),[G,H]=q.useState("unlock"),[Y,X]=q.useState({p1:"Player 1",p2:"Player 2"}),[Z,K]=q.useState("p1"),[J,tt]=q.useState({truth:[],dare:[],trivia:[]}),et=q.useRef(null),nt=q.useRef(null),st={velourNights:{bg:"theme-velour-nights-bg",titleText:"text-white",titleShadow:"#F777B6",themeClass:"theme-velour-nights"},lotusDreamscape:{bg:"theme-lotus-dreamscape-bg",titleText:"text-white",titleShadow:"#F777B6",themeClass:"theme-lotus-dreamscape"},velvetCarnival:{bg:"theme-velvet-carnival-bg",titleText:"text-white",titleShadow:"#FFD700",themeClass:"theme-velvet-carnival"},starlitAbyss:{bg:"theme-starlit-abyss-bg",titleText:"text-white",titleShadow:"#8A2BE2",themeClass:"theme-starlit-abyss"},crimsonFrenzy:{bg:"theme-crimson-frenzy-bg",titleText:"text-white",titleShadow:"#ff0000",themeClass:"theme-crimson-frenzy"}},it=st[h]||st.velourNights,rt=st[h]?.bg||st.velourNights.bg,[ot,at]=q.useState(rt);q.useEffect(()=>{try{const t={theme:h,volumes:p,reducedMotion:m};localStorage.setItem("settings",JSON.stringify(t))}catch(t){}},[h,p,m]),q.useEffect(()=>{const t=window.matchMedia("(prefers-reduced-motion: reduce)"),e=()=>g(t.matches);return null===localStorage.getItem("settings")&&e(),t.addEventListener("change",e),()=>t.removeEventListener("change",e)},[]),q.useEffect(()=>{window.debugReset=()=>{z(!1),u({type:null,data:{}})};const t=setInterval(()=>{window.debugReset&&L&&!document.querySelector(".spin-button:disabled")&&(document.querySelector(".spin-button svg.animate-spin")||window.debugReset())},2e3);return()=>{delete window.debugReset,clearInterval(t)}},[L]),q.useEffect(()=>{if(l.type&&"playing"===G){const t=setTimeout(()=>{let t=null;try{t=document.querySelector('[role="dialog"]')}catch{}!t&&l.type&&u({type:null,data:{}})},1e4);return()=>clearTimeout(t)}},[l.type,G]),q.useEffect(()=>(clearTimeout(nt.current),"turnIntro"===G&&(nt.current=setTimeout(()=>{H("playing")},2800)),()=>clearTimeout(nt.current)),[G]);const lt=q.useCallback((t,e={})=>{clearTimeout(nt.current),u(n=>n.type?n:{type:t,data:e})},[]);q.useEffect(()=>{if(window.Tone)return void r("loaded");const t=document.createElement("script");return t.src="https://cdn.jsdelivr.net/npm/tone@14.7.77/build/Tone.min.js",t.async=!0,t.onload=()=>{window.Tone&&r("loaded")},t.onerror=()=>r("error"),document.body.appendChild(t),()=>{t.parentNode&&t.parentNode.removeChild(t)}},[]),q.useEffect(()=>{l.type&&"settings"!==l.type&&"editor"!==l.type&&xA.playModalOpen()},[l.type]),q.useEffect(()=>{const t=t=>0===t?-1/0:t/100*40-40;xA.setMasterVolume(t(p.masterVolume)),xA.setMusicVolume(t(p.musicVolume)),xA.setSfxVolume(t(p.sfxVolume))},[p]),q.useEffect(()=>{xA.toggleMute(b)},[b]),q.useEffect(()=>{const t=D?"crimsonFrenzy":h;t!==y&&(at(rt),x(t=>1===t?2:1),v(t))},[D,h,y,rt]);const ut=q.useCallback(t=>{h!==t&&(d(t),xA.startTheme(t))},[h]),ct=q.useCallback(t=>{const e=et.current?.querySelector(".spin-button");if(e){const t=e.getBoundingClientRect(),n=(t.left+t.width/2)/window.innerWidth,s=(t.top+t.height/2+window.scrollY)/document.documentElement.scrollHeight;j({x:n,y:s})}C(!0),xA.playExtremePrompt(),xA.startTheme("crimsonFrenzy"),V(!0),F(t),lt("extremeIntro")},[lt]);q.useEffect(()=>{L||l.type||!B||(ct(B),W(null))},[L,l.type,B,ct]);const ht=q.useCallback(async()=>{if(o)return;a(!0);const t=async()=>{if(!window.Tone||!window.Tone.context)return r("error"),!1;await window.Tone.start(),await window.Tone.context.resume();const t=await xA.initialize();return t&&await xA.startTheme("velourNights"),t};try{await t()||setTimeout(async()=>{await t()||$(!0)},1e3)}catch(e){$(!0)}finally{H("onboarding_intro"),a(!1)}},[o]),dt=q.useCallback(t=>{X(t),H("turnIntro")},[]),pt=q.useCallback(()=>w(t=>!t),[]),ft=q.useCallback(()=>{D&&(M(!1),F(null),xA.startTheme(h));const t=A+1;E(t),K(t=>"p1"===t?"p2":"p1"),H("turnIntro");let e=5;t>10?e=20:t>5&&(e=10);const n=Math.min(k+e,100);n>=100&&!D?(W("spark"),S(100)):S(n),!D&&n<100&&Math.random()<.1&&(L||l.type?W("random"):ct("random"))},[D,A,k,L,l.type,ct,h]),mt=q.useCallback(()=>{xA.playModalClose(),u({type:null,data:{}})},[]),gt=q.useCallback(()=>{mt(),ft()},[mt,ft]),yt=q.useCallback(()=>{mt(),ft()},[mt,ft]),vt=q.useCallback(()=>{u({type:null}),M(!0),H("extremeRound"),R(!0),"spark"===P&&(A+1)%5==0&&setTimeout(()=>S(0),1e3)},[P,A]),_t=q.useCallback((t,e)=>{const n=J[t]||[],s=e.filter(t=>!n.includes(t)),i=s.length>0?s[Math.floor(Math.random()*s.length)]:e[Math.floor(Math.random()*e.length)]||"No prompts available.";return tt(e=>({...e,[t]:[...n.slice(-4),i]})),i},[J]),xt=q.useCallback(e=>{const{truthPrompts:n,darePrompts:s,triviaQuestions:i}=t,r=("truth"===e?D?n.extreme:[...n.normal,...n.spicy]:"dare"===e?D?s.extreme:[...s.normal,...s.spicy]:[...i.normal]).filter(t=>"string"==typeof t&&""!==t.trim()),o=_t(e,r),a={truth:"The Velvet Truth...",dare:"The Royal Dare!",trivia:"The Trivia Challenge"}[e]||"Your Challenge";setTimeout(()=>{lt("prompt",{title:a,text:o}),z(!1)},600)},[t,D,_t,lt]),bt=q.useCallback(()=>{xA.playRefuse(),u(t=>({...t,type:null}));const e=(D?[...t.consequences.extreme||[]]:[...t.consequences.normal||[],...t.consequences.spicy||[]]).filter(t=>t&&""!==t.trim()),n=e.length>0?e[Math.floor(Math.random()*e.length)]:"Add consequences in the editor!";setTimeout(()=>{lt("consequence",{text:n})},50)},[D,t,lt]),wt=q.useCallback(t=>{t&&(xA.playCorrect(),e(t)),"settings"===l.data?.from?u({type:"settings"}):mt()},[e,l.data,mt]),kt=q.useCallback(()=>{xA.playRefuse(),n(),u({type:"editor",data:{from:"settings"}})},[n]),St=q.useCallback(()=>{S(0),E(0),X({p1:"Player 1",p2:"Player 2"}),K("p1"),M(!1),u({type:null}),H("onboarding_intro")},[]),Tt=q.useCallback(()=>{St(),H("unlock")},[St]);return Q.jsx("div",{id:"app-container",className:`min-h-screen ${it.themeClass} font-['Inter',_sans-serif] text-white flex flex-col items-center overflow-hidden relative ${m?"reduced-motion":""}`,style:{"--pulse-glow-intensity":""+k/100,"--beat-duration":60/xA.getCurrentBpm()+"s"},children:Q.jsxs(Ly,{transition:{type:"spring",stiffness:240,damping:24},children:[Q.jsx("div",{className:`bg-layer ${1===_?"opacity-100":"opacity-0"} ${ot}`}),Q.jsx("div",{className:`bg-layer ${2===_?"opacity-100":"opacity-0"} ${rt}`}),Q.jsx(EA,{currentTheme:y,pulseLevel:k,bpm:xA.getCurrentBpm(),reducedMotion:m}),Q.jsx("div",{className:"hdr-glow-overlay"}),Q.jsx(FA,{}),Q.jsx(NA,{reducedMotion:m}),Q.jsx("div",{className:"aurora-reflect"}),Q.jsx(VA,{reducedMotion:m}),Q.jsxs(qy,{children:[N&&Q.jsx(DA,{onFinish:()=>V(!1),origin:I,theme:h,reducedMotion:m},"confetti"),T&&Q.jsx(IA,{onComplete:()=>C(!1),reducedMotion:m},"power-surge")]}),Q.jsx("div",{id:"app-content","aria-hidden":!!l.type,className:"w-full h-screen relative overflow-hidden",children:(()=>{const t={activeVisualTheme:it},e={className:"w-full h-full absolute inset-0",initial:{x:"100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-100%",opacity:0},transition:{duration:.4,ease:"easeInOut"}},n=!L&&!l.type&&("playing"===G||"extremeRound"===G&&O);return Q.jsxs(qy,{mode:"wait",initial:!1,children:["unlock"===G&&Q.jsx(Ry.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:Q.jsx(LA,{onUnlock:ht,disabled:o,...t})},"unlock"),"onboarding_intro"===G&&Q.jsx(Ry.div,{...e,children:Q.jsx(zA,{onNext:()=>H("onboarding_vibe"),...t})},"onboarding_intro"),"onboarding_vibe"===G&&Q.jsx(Ry.div,{...e,children:Q.jsx(BA,{currentTheme:h,onVibeSelect:t=>{ut(t),H("enterNames")},...t})},"onboarding_vibe"),"enterNames"===G&&Q.jsx(Ry.div,{...e,children:Q.jsx(WA,{onStart:dt,...t})},"enterNames"),("playing"===G||"turnIntro"===G||"extremeRound"===G)&&Q.jsx(Ry.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:Q.jsxs("div",{ref:et,className:"w-full h-full z-[60] flex flex-col",children:[Q.jsxs("header",{className:"relative w-full flex justify-center items-center p-4 pt-6 shrink-0",children:[Q.jsx("h1",{className:`text-6xl ${it.titleText} font-['Great_Vibes']`,style:{filter:`drop-shadow(0 0 15px ${it.titleShadow})`},children:"Pulse"}),Q.jsx(Ry.button,{onClick:()=>{xA.playUIConfirm(),u({type:"settings"})},className:"absolute top-6 right-4 text-[#FFD700] hover:text-yellow-300 bg-black/20 backdrop-blur-md border border-white/10 p-3 rounded-full shadow-lg",whileTap:{scale:.9,rotate:-15},whileHover:{scale:1.15,rotate:15,boxShadow:"0 0 25px var(--theme-highlight)"},"aria-label":"Settings",children:Q.jsx(kA,{})})]}),Q.jsxs("main",{className:"w-full flex-grow flex flex-col items-center justify-center px-4",style:{perspective:"1000px"},children:[Q.jsx(OA,{onSpinFinish:xt,playWheelSpinStart:xA.playWheelSpinStart,playWheelTick:xA.playWheelTick,playWheelStop:xA.playWheelStopSound,setIsSpinInProgress:z,currentTheme:h,canSpin:n,reducedMotion:m}),Q.jsx(RA,{level:k}),("playing"===G||"extremeRound"===G)&&Q.jsxs("div",{className:"turn-banner",children:[Y[Z],"'s Turn!"]})]}),Q.jsx("footer",{className:"w-full p-4 flex flex-col items-center shrink-0"}),U&&Q.jsx("div",{className:"fixed bottom-24 right-4 z-[60] bg-red-900/50 text-white text-xs px-3 py-1 rounded-full border border-red-500 backdrop-blur-sm",children:"Audio failed to initialize."})]})},"playing")]})})()}),Q.jsxs(qy,{initial:!1,children:["extremeIntro"===l.type&&Q.jsxs(Q.Fragment,{children:[Q.jsx(jA,{theme:h,reducedMotion:m},`introfx-${h}`),Q.jsx(UA,{isOpen:!0,onClose:vt,activeVisualTheme:it})]}),"prompt"===l.type&&Q.jsx($A,{isOpen:!0,onClose:gt,onRefuse:bt,prompt:l.data,activeVisualTheme:it},"prompt"),"consequence"===l.type&&Q.jsx(GA,{isOpen:!0,onClose:yt,text:l.data.text,activeVisualTheme:it},"consequence"),"editor"===l.type&&Q.jsx(HA,{isOpen:!0,onClose:wt,prompts:t,onReset:()=>u({type:"confirmReset",data:{from:"settings"}}),activeVisualTheme:it},"editor"),"settings"===l.type&&Q.jsx(QA,{isOpen:!0,onClose:()=>u({type:null}),settings:p,onSettingsChange:t=>f(e=>({...e,...t})),isMuted:b,onMuteToggle:pt,onEditPrompts:()=>u({type:"editor",data:{from:"settings"}}),onResetPrompts:()=>u({type:"confirmReset"}),onThemeChange:ut,currentTheme:h,userId:s,onRestart:()=>u({type:"confirmRestart"}),onQuit:()=>u({type:"confirmQuit"}),activeVisualTheme:it,reducedMotion:m,onReducedMotionToggle:()=>g(t=>!t)},"settings"),"confirmReset"===l.type&&Q.jsx(YA,{isOpen:!0,onClose:()=>{u({type:"settings"===l.data?.from?"editor":"settings",data:{from:"settings"}})},onConfirm:kt,title:"Confirm Reset",message:"Are you sure? This will replace all prompts with the defaults.",activeVisualTheme:it},"confirm-reset"),"confirmRestart"===l.type&&Q.jsx(YA,{isOpen:!0,onClose:()=>u({type:"settings"}),onConfirm:St,title:"Confirm Restart",message:"Are you sure? This will restart the game and reset all progress.",activeVisualTheme:it},"confirm-restart"),"confirmQuit"===l.type&&Q.jsx(YA,{isOpen:!0,onClose:()=>u({type:"settings"}),onConfirm:Tt,title:"Confirm Quit",message:"Are you sure you want to quit? All progress will be lost.",activeVisualTheme:it},"confirm-quit")]})]})})}Y.createRoot(document.getElementById("root")).render(Q.jsx(L.StrictMode,{children:Q.jsx(XA,{})}));
